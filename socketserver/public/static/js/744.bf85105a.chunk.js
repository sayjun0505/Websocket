"use strict";(self.webpackChunkfoxconnect_app=self.webpackChunkfoxconnect_app||[]).push([[744],{48744:function(e,t,r){r.r(t),r.d(t,{default:function(){return Tr}});var n,a,o,s=r(29439),i=r(4942),c=r(47619),l=r(23132),u=r(47313),d=r(22408),p=r(97890),h=r(69649),f=r(88564),m=r(90065),x=r(9038),g=r(74165),b=r(15861),v=r(80827),Z=(0,v.hg)("todoApp/filters/getFilters",(0,b.Z)((0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:0,handle:"starred",title:"Starred",icon:"star"},{id:1,handle:"important",title:"Priority",icon:"error"},{id:2,handle:"dueDate",title:"Sheduled",icon:"schedule"},{id:3,handle:"today",title:"Today",icon:"today"},{id:4,handle:"completed",title:"Done",icon:"check"},{id:5,handle:"deleted",title:"Deleted",icon:"delete"}]);case 1:case"end":return e.stop()}}),e)})))),y=(0,v.HF)({}),j=y.getSelectors((function(e){return e.todoApp.filters})),w=j.selectAll,T=(j.selectById,(0,v.oM)({name:"todoApp/filters",initialState:y.getInitialState({}),reducers:{},extraReducers:(0,i.Z)({},Z.fulfilled,y.setAll)})),S=T.reducer,k=(0,v.hg)("todoApp/folders/getFolders",(0,b.Z)((0,g.Z)().mark((function e(){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[{id:0,handle:"all",title:"All",icon:"view_headline"}]);case 1:case"end":return e.stop()}}),e)})))),N=(0,v.HF)({}),C=N.getSelectors((function(e){return e.todoApp.folders})),A=C.selectAll,z=(C.selectById,(0,v.oM)({name:"todoApp/folders",initialState:N.getInitialState({}),reducers:{},extraReducers:(0,i.Z)({},k.fulfilled,N.setAll)}).reducer),I=r(31881),R=r.n(I),D=r(43850),B=r(42939),M=(0,v.hg)("todoApp/labels/getLabels",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().get("/api/".concat(s,"/todo/label/list"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});case 10:return i=e.sent,e.next=13,i.data;case 13:return c=e.sent,e.abrupt("return",c);case 17:throw e.prev=17,e.t0=e.catch(1),n((0,D.PV)({message:"Get Todo label List error",variant:"error"})),e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,r){return e.apply(this,arguments)}}()),L=((0,v.hg)("todoApp/labels/getLabels",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().get("/api/".concat(s,"/todo/label"),{params:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});case 10:return i=e.sent,e.next=13,i.data;case 13:return c=e.sent,e.abrupt("return",c);case 17:throw e.prev=17,e.t0=e.catch(1),n((0,D.PV)({message:"Get Todo label error",variant:"error"})),e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,v.hg)("todoApp/labels/addLabel",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().post("/api/".concat(s,"/todo/label"),{labels:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});case 10:return i=e.sent,e.next=13,i.data;case 13:return c=e.sent,n(M()),n((0,D.PV)({message:"Todo label added!",variant:"success"})),e.abrupt("return",c);case 19:throw e.prev=19,e.t0=e.catch(1),n((0,D.PV)({message:"Add Todo label error",variant:"error"})),e.t0;case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,r){return e.apply(this,arguments)}}())),P=(0,v.HF)({}),V=P.getSelectors((function(e){return e.todoApp.labels})),E=V.selectAll,H=V.selectEntities,O=(V.selectById,(0,v.oM)({name:"todoApp/labels",initialState:P.getInitialState(null),reducers:{},extraReducers:(n={},(0,i.Z)(n,M.fulfilled,P.setAll),(0,i.Z)(n,L.fulfilled,P.addOne),n)}).reducer),F=(0,v.hg)("todoApp/todos/getTodos",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().get("/api/".concat(s,"/todo/list"),{params:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});case 10:return i=e.sent,e.next=13,i.data;case 13:return c=e.sent,e.abrupt("return",c);case 17:throw e.prev=17,e.t0=e.catch(1),n((0,D.PV)({message:"Get Todo List error",variant:"error"})),e.t0;case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,r){return e.apply(this,arguments)}}()),U=(0,v.hg)("todoApp/todos/addTodo",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.todo,a=r.dispatch,o=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return i=o().organization.organizationId,e.next=11,R().post("/api/".concat(i,"/todo"),{todo:n},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 11:return c=e.sent,e.next=14,c.data;case 14:return l=e.sent,a(F({filter:"all"})),a(M()),a((0,D.PV)({message:"Todo added!",variant:"success"})),e.abrupt("return",l);case 21:throw e.prev=21,e.t0=e.catch(2),a((0,D.PV)({message:"Add Todo error",variant:"error"})),e.t0;case 25:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t,r){return e.apply(this,arguments)}}()),_=(0,v.hg)("todoApp/todos/updateTodo",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.todo,a=r.dispatch,o=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return i=o().organization.organizationId,e.next=11,R().put("/api/".concat(i,"/todo"),{todo:n},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 11:return c=e.sent,e.next=14,c.data;case 14:return l=e.sent,a(F({filter:"all"})),a(M()),a((0,D.PV)({message:"Todo updated!",variant:"success"})),e.abrupt("return",l);case 21:throw e.prev=21,e.t0=e.catch(2),a((0,D.PV)({message:"Update Todo error",variant:"error"})),e.t0;case 25:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t,r){return e.apply(this,arguments)}}()),G=(0,v.hg)("todoApp/todos/removeTodo",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().delete("/api/".concat(s,"/todo"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},params:{id:t}});case 10:return i=e.sent,e.next=13,i.data;case 13:return c=e.sent,n(F({filter:"all"})),n((0,D.PV)({message:"Todo removed!",variant:"success"})),e.abrupt("return",c);case 19:throw e.prev=19,e.t0=e.catch(1),n((0,D.PV)({message:"Remove Todo error",variant:"error"})),e.t0;case 23:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,r){return e.apply(this,arguments)}}()),Q=(0,v.HF)({}),J=Q.getSelectors((function(e){return e.todoApp.todos})),W=J.selectAll,q=(J.selectById,(0,v.oM)({name:"todoApp/todos",initialState:Q.getInitialState({searchText:"",orderBy:"",orderDescending:!1,routeParams:{},todoDialog:{type:"new",props:{open:!1},data:null}}),reducers:{setTodosSearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}},toggleOrderDescending:function(e,t){e.orderDescending=!e.orderDescending},changeOrder:function(e,t){e.orderBy=t.payload},openNewTodoDialog:function(e,t){e.todoDialog={type:"new",props:{open:!0,selectedAccount:t.payload},data:null}},closeNewTodoDialog:function(e,t){e.todoDialog={type:"new",props:{open:!1},data:null}},openEditTodoDialog:function(e,t){e.todoDialog={type:"edit",props:{open:!0},data:t.payload}},closeEditTodoDialog:function(e,t){e.todoDialog={type:"edit",props:{open:!1},data:null}}},extraReducers:(a={},(0,i.Z)(a,_.fulfilled,Q.upsertOne),(0,i.Z)(a,U.fulfilled,Q.addOne),(0,i.Z)(a,F.fulfilled,(function(e,t){Q.setAll(e,t.payload),e.searchText=""})),a)})),Y=q.actions,K=Y.setTodosSearchText,X=Y.toggleOrderDescending,$=Y.changeOrder,ee=Y.openNewTodoDialog,te=Y.closeNewTodoDialog,re=Y.openEditTodoDialog,ne=Y.closeEditTodoDialog,ae=q.reducer,oe=(0,v.oM)({name:"todoApp/sidebars",initialState:{mobileChatsSidebarOpen:!0,customerSidebarOpen:!1},reducers:{openMobileChatsSidebar:function(e,t){e.mobileChatsSidebarOpen=!0},closeMobileChatsSidebar:function(e,t){e.mobileChatsSidebarOpen=!1},openCustomerSidebar:function(e,t){e.customerSidebarOpen=!0},closeCustomerSidebar:function(e,t){e.customerSidebarOpen=!1}}}),se=oe.actions,ie=se.openMobileChatsSidebar,ce=se.closeMobileChatsSidebar,le=se.openCustomerSidebar,ue=se.closeCustomerSidebar,de=oe.reducer,pe=(0,v.hg)("chatApp/current/updateCurrent",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.next=3,B.Z.getAccessToken();case 3:if(o=e.sent){e.next=6;break}return e.abrupt("return",null);case 6:if(s=a().organization.organizationId,i=a().chatApp.current,c=i.selected,"chat"!==i.selectType){e.next=17;break}return e.next=11,R().get("/api/".concat(s,"/chat"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},params:{id:c.id}});case 11:return l=e.sent,e.next=14,l.data;case 14:return(u=e.sent)&&n(xe(u)),e.abrupt("return",u);case 17:return e.abrupt("return",null);case 18:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),he={selected:null,selectType:null,listType:"active",filterLabel:[]},fe=(0,v.oM)({name:"todoApp/current",initialState:he,reducers:{setListType:function(e,t){e.listType=t.payload},addSendingMessage:function(e,t){if(e.selected&&e.selected.message&&e.selected.message.length){var r=e.selected.message;r.push(t.payload),e.selected.message=r}},setChatSelected:function(e,t){e.selected=t.payload,e.selectType="chat"},setHistorySelected:function(e,t){e.selected=t.payload,e.selectType="history"},setFilterLabel:function(e,t){e.filterLabel=t.payload},clearSelect:function(e,t){return he}},extraReducers:{}}),me=fe.actions,xe=me.setChatSelected,ge=me.setHistorySelected,be=(me.setListType,me.setFilterLabel,me.clearSelect,me.addSendingMessage),ve=fe.reducer,Ze=(0,v.hg)("todoApp/chat/getChats",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u,d;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:if(a().todoApp){e.next=9;break}return e.abrupt("return",null);case 9:return s=a().organization.organizationId,i=a().scrumboardApp.boardCurrent.listType,c=a().scrumboardApp.boardCurrent.filterLabel,l=i||t||"assignee",e.next=15,R().get("/api/".concat(s,"/chat/list"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)},params:{type:l,label:c.toString()}});case 15:return u=e.sent,e.next=18,u.data;case 18:return d=e.sent,e.abrupt("return",d);case 22:return e.prev=22,e.t0=e.catch(1),console.error("Get Chat list error ",e.t0),n((0,D.PV)({message:"Get Chat list error",variant:"error"})),e.abrupt("return",[]);case 27:case"end":return e.stop()}}),e,null,[[1,22]])})));return function(t,r){return e.apply(this,arguments)}}()),ye=(0,v.hg)("scrumboardApp/chats/getChat",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.chatId,t.isMobile,a=r.dispatch,o=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(s=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:if(n){e.next=10;break}return e.abrupt("return",null);case 10:return i=o().organization.organizationId,e.next=13,R().get("/api/".concat(i,"/chat"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(s)},params:{id:n}});case 13:return c=e.sent,e.next=16,c.data;case 16:return(l=e.sent)&&a(xe(l)),e.abrupt("return",l);case 22:return e.prev=22,e.t0=e.catch(2),console.error("Get Chat error ",e.t0),a((0,D.PV)({message:"Get Chat error",variant:"error"})),e.abrupt("return",[]);case 27:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t,r){return e.apply(this,arguments)}}()),je=(0,v.hg)("todoApp/chats/getChatMessage",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.chatId,a=t.pNum,t.isMobile,o=r.dispatch,s=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:if(n){e.next=10;break}return e.abrupt("return",null);case 10:return c=s().organization.organizationId,e.next=13,R().get("/api/".concat(c,"/scrumboard/chat/getchatmessage"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},params:{id:n,pNum:a}});case 13:return l=e.sent,e.next=16,l.data;case 16:return(u=e.sent)&&o(xe(u)),e.abrupt("return",u);case 22:return e.prev=22,e.t0=e.catch(2),console.error("Get Chat error ",e.t0),o((0,D.PV)({message:"Get Chat error",variant:"error"})),e.abrupt("return",[]);case 27:case"end":return e.stop()}}),e,null,[[2,22]])})));return function(t,r){return e.apply(this,arguments)}}()),we=((0,v.hg)("todoApp/chats/updateChat",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().put("/api/".concat(s,"/chat"),{chat:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});case 10:return i=e.sent,e.next=13,i.data;case 13:return c=e.sent,n((0,D.PV)({message:"Chat Updated",variant:"success"})),n(ye({chatId:t.id})),e.abrupt("return",c);case 19:return e.prev=19,e.t0=e.catch(1),console.error("Update ChatSs error ",e.t0),n((0,D.PV)({message:"Update Chat error",variant:"error"})),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,v.hg)("todoApp/chats/updateChat",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().put("/api/".concat(s,"/chat/owner"),{chat:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});case 10:return i=e.sent,e.next=13,i.data;case 13:return c=e.sent,n((0,D.PV)({message:"Chat Owner Updated",variant:"success"})),n(ye({chatId:t.id})),e.abrupt("return",c);case 19:return e.prev=19,e.t0=e.catch(1),console.error("Update ChatSs error ",e.t0),n((0,D.PV)({message:"Update Chat owner error",variant:"error"})),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(t,r){return e.apply(this,arguments)}}()),(0,v.hg)("todoApp/chats/sendMessage",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.messageText,a=t.chat,t.pNum,o=r.dispatch,s=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return c=s().organization.organizationId,e.next=11,R().post("/api/".concat(c,"/chat/sendMessage"),{chatId:a.id,message:{data:JSON.stringify({text:n}),type:"text"}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});case 11:return l=e.sent,e.next=14,l.data;case 14:return u=e.sent,o(je({chatId:a.id,pNum:a.pageNumber})),e.abrupt("return",u);case 19:return e.prev=19,e.t0=e.catch(2),console.error("[todoApp/chats/sendMessage] ",e.t0),o((0,D.PV)({message:"Send message error",variant:"error"})),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,r){return e.apply(this,arguments)}}())),Te=(0,v.hg)("todoApp/chats/sendFileMessage",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formData,a=t.chat,o=r.dispatch,s=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return c=s().organization.organizationId,e.next=11,R().post("/api/".concat(c,"/chat/uploads/").concat(a.channel.id,"/").concat(a.customer.uid),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(i)}});case 11:return l=e.sent,e.next=14,l.data;case 14:return u=e.sent,e.abrupt("return",setTimeout((0,b.Z)((0,g.Z)().mark((function e(){var t,r;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R().post("/api/".concat(c,"/chat/sendMessage"),{chatId:a.id,message:{data:JSON.stringify({filename:u.fileName}),type:"image"}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});case 2:return t=e.sent,e.next=5,t.data;case 5:return r=e.sent,o(je({chatId:a.id,pNum:a.pageNumber})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),3e3));case 18:return e.prev=18,e.t0=e.catch(2),console.error("[todoApp/chats/sendFileMessage] ",e.t0),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,r){return e.apply(this,arguments)}}()),Se=(0,v.hg)("todoApp/chats/sendTeamChatMessage",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.messageText,a=t.chat,o=r.dispatch,s=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return c=s().organization.organizationId,e.next=11,R().post("/api/".concat(c,"/teamChat/sendMessage"),{chatId:a.id,message:{data:JSON.stringify({text:n}),type:"text"}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});case 11:return l=e.sent,e.next=14,l.data;case 14:return u=e.sent,o(je({chatId:a.id,pNum:a.pageNumber})),e.abrupt("return",u);case 19:return e.prev=19,e.t0=e.catch(2),console.error("TeamChat ",e.t0),o((0,D.PV)({message:"Send TeamChat message error",variant:"error"})),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,r){return e.apply(this,arguments)}}()),ke=(0,v.hg)("todoApp/chats/sendTeamChatFileMessage",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.formData,a=t.chat,o=r.dispatch,s=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return c=s().organization.organizationId,e.next=11,R().post("/api/".concat(c,"/teamChat/uploads/").concat(a.id),n,{headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer ".concat(i)}});case 11:return l=e.sent,e.next=14,l.data;case 14:return u=e.sent,e.abrupt("return",setTimeout((0,b.Z)((0,g.Z)().mark((function e(){var t,r;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R().post("/api/".concat(c,"/teamChat/sendMessage"),{chatId:a.id,message:{data:JSON.stringify({filename:u.fileName}),type:"image"}},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});case 2:return t=e.sent,e.next=5,t.data;case 5:return r=e.sent,o(je({chatId:a.id,pNum:a.pageNumber})),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),3e3));case 18:return e.prev=18,e.t0=e.catch(2),console.error("[todoApp/chats/sendTeamChatFileMessage] ",e.t0),e.abrupt("return",null);case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,r){return e.apply(this,arguments)}}()),Ne=(0,v.hg)("todoApp/chats/markMentionRead",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().put("/api/".concat(s,"/teamChat/read"),{},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});case 10:return i=e.sent,n(pe()),n(Ze()),e.abrupt("return",i);case 16:return e.prev=16,e.t0=e.catch(1),console.error("TeamChat ",e.t0),e.abrupt("return",null);case 20:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t,r){return e.apply(this,arguments)}}()),Ce=(0,v.HF)({}),Ae=Ce.getSelectors((function(e){return e.scrumboardApp.boardChat})),ze=(Ae.selectAll,Ae.selectById,(0,v.oM)({name:"todoApp/chat",initialState:Ce.getInitialState({searchText:""}),reducers:{setChatsSearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}},clearChat:function(e,t){return Ce.getInitialState({searchText:""})}},extraReducers:(0,i.Z)({},Ze.fulfilled,(function(e,t){Ce.setAll(e,t.payload)}))})),Ie=ze.actions,Re=(Ie.setChatsSearchText,Ie.clearChat,ze.reducer),De=(0,v.hg)("chatApp/reply/getReplies",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().get("/api/".concat(s,"/reply/list/quick"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});case 10:return i=e.sent,e.next=13,i.data;case 13:return c=e.sent,e.next=16,c.filter((function(e){return e.response&&e.response.length>0}));case 16:return l=e.sent,e.abrupt("return",l);case 20:return e.prev=20,e.t0=e.catch(1),n((0,D.PV)({message:"Get Quick Reply error",variant:"error"})),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[1,20]])})));return function(t,r){return e.apply(this,arguments)}}()),Be=(0,v.hg)("chatApp/reply/sendReply",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.reply,a=t.chat,o=r.dispatch,s=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return c=s().organization.organizationId,e.next=11,R().post("/api/".concat(c,"/chat/sendReplyMessage"),{chatId:a.id,replyId:n.id},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)}});case 11:return l=e.sent,e.next=14,l.data;case 14:return u=e.sent,o(ye({chatId:a.id})),o(Ze()),e.abrupt("return",u);case 20:return e.prev=20,e.t0=e.catch(2),o((0,D.PV)({message:"Send Quick Reply error",variant:"error"})),e.abrupt("return",{});case 24:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t,r){return e.apply(this,arguments)}}()),Me=(0,v.oM)({name:"todoApp/reply",initialState:null,reducers:{},extraReducers:(0,i.Z)({},De.fulfilled,(function(e,t){return t.payload}))}).reducer,Le=(0,v.hg)("chatApp/history/getHistories",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.dispatch,n=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return o=n().organization.organizationId,e.next=10,R().get("/api/".concat(o,"/chat/history/list"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 10:return s=e.sent,e.next=13,s.data;case 13:return i=e.sent,e.abrupt("return",i);case 17:return e.prev=17,e.t0=e.catch(1),console.error("getHistories ",e.t0),e.abrupt("return",[]);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,r){return e.apply(this,arguments)}}()),Pe=(0,v.hg)("chatApp/history/getHistory",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.historyId,a=t.isMobile,o=r.dispatch,s=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return c=s().organization.organizationId,e.next=11,R().get("/api/".concat(c,"/chat/history"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},params:{id:n}});case 11:return l=e.sent,e.next=14,l.data;case 14:return u=e.sent,o(ge(u)),a&&o(ce()),e.abrupt("return",u);case 20:return e.prev=20,e.t0=e.catch(2),console.error("getHistory ",e.t0),e.abrupt("return",null);case 24:case"end":return e.stop()}}),e,null,[[2,20]])})));return function(t,r){return e.apply(this,arguments)}}()),Ve=(0,v.HF)({}),Ee=Ve.getSelectors((function(e){return e.chatApp.history})),He=(Ee.selectAll,Ee.selectById,(0,v.oM)({name:"todoApp/history",initialState:Ve.getInitialState({searchText:""}),reducers:{setHistorySearchText:{reducer:function(e,t){e.searchText=t.payload},prepare:function(e){return{payload:e.target.value||""}}},clearHistory:function(e,t){Ve.getInitialState({searchText:""})}},extraReducers:(0,i.Z)({},Le.fulfilled,(function(e,t){Ve.setAll(e,t.payload)}))})),Oe=He.actions,Fe=(Oe.setHistorySearchText,Oe.clearHistory,He.reducer),Ue=(0,v.hg)("todoApp/customers/getCustomer",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.customerId,a=t.isMobile,o=r.dispatch,s=r.getState,e.prev=2,e.next=5,B.Z.getAccessToken();case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:if(n){e.next=10;break}return e.abrupt("return",null);case 10:return c=s().organization.organizationId,e.next=13,R().get("/api/".concat(c,"/customer"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(i)},params:{id:n}});case 13:return l=e.sent,e.next=16,l.data;case 16:return u=e.sent,a&&o(ce()),e.abrupt("return",u);case 21:return e.prev=21,e.t0=e.catch(2),o((0,D.PV)({message:"Get Customer error",variant:"error"})),e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,null,[[2,21]])})));return function(t,r){return e.apply(this,arguments)}}()),_e=(0,v.hg)("todoApp/customers/updateCustomer",function(){var e=(0,b.Z)((0,g.Z)().mark((function e(t,r){var n,a,o,s,i,c,l,u,d,p;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.dispatch,a=r.getState,e.prev=1,e.next=4,B.Z.getAccessToken();case 4:if(o=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return s=a().organization.organizationId,e.next=10,R().put("/api/".concat(s,"/customer"),{customer:t},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(o)}});case 10:return i=e.sent,e.next=13,i.data;case 13:return c=e.sent,l=a().scrumboardApp.current,u=l.selected,d=l.selectType,p=l.listType,"chat"===d&&(n(ye({chatId:u.id})),n(Ze(p))),"history"===d&&(n(Pe({historyId:u.id})),n(Le())),n((0,D.PV)({message:"Customer Updated",variant:"success"})),e.abrupt("return",c);case 21:return e.prev=21,e.t0=e.catch(1),n((0,D.PV)({message:"Update Customer error",variant:"error"})),e.abrupt("return",null);case 25:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t,r){return e.apply(this,arguments)}}()),Ge=(0,v.oM)({name:"foxTodoApp/customers",initialState:{customer:null},reducers:{setCustomer:function(e,t){e.customer=t.payload}},extraReducers:(o={},(0,i.Z)(o,Ue.fulfilled,(function(e,t){e.customer=t.payload})),(0,i.Z)(o,_e.fulfilled,(function(e,t){e.customer=t.payload})),o)}),Qe=(Ge.actions.setCustomer,Ge.reducer),Je=(0,x.UY)({todos:ae,folders:z,labels:O,filters:S,sidebars:de,current:ve,chat:Re,reply:Me,history:Fe,customer:Qe}),We=r(1413),qe=r(14790),Ye=r(73564),Ke=r(75627),Xe=r(58970),$e=r(75908),et=r(24193),tt=r(60211),rt=r(57451),nt=r(63585),at=r(51293),ot=r(5365),st=r(94469),it=r(4117),ct=r(96467),lt=r(19536),ut=r(1550),dt=r(71263),pt=r(47131),ht=r(74748),ft=r(83213),mt=r(82047),xt=r(51405),gt=r(24631),bt=r(9289),vt=r(61113),Zt=r(3463),yt=r(33604),jt=r(66212),wt=r(93433),Tt=r(10368),St=r(46417),kt=function(e){e.control;var t=e.setValue,r=e.labelSelect,n=e.labelOption,a=(0,d.I0)();(0,u.useEffect)((function(){r.length>10&&(r.splice(10,r.length-10),a((0,D.PV)({message:"Maximum 10 labels per todo.",variant:"warning"})))}),[a,r]);var o=function(){var e=(0,b.Z)((0,g.Z)().mark((function e(n){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a(L(n)).unwap.then((function(e){e&&e.length&&(e.length+r.length>10?a((0,D.PV)({message:"Maximum 10 labels per todo.",autoHideDuration:6e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"})):t("labels",[].concat((0,wt.Z)(r),(0,wt.Z)(e))))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(){var e=(0,b.Z)((0,g.Z)().mark((function e(s,i){return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i.length<r.length)){e.next=4;break}t("labels",i),e.next=8;break;case 4:return e.next=6,i.filter((function(e){return!r.includes(e)}));case 6:e.sent.forEach(function(){var e=(0,b.Z)((0,g.Z)().mark((function e(s){var i,c,l,u,d,p,h,f;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s||!s.id){e.next=5;break}i=[].concat((0,wt.Z)(r),[s]),t("labels",i),e.next=28;break;case 5:if(!(s.length>0)){e.next=28;break}return e.next=8,s.split(" ");case 8:return c=e.sent,l=(0,wt.Z)(new Set(c)),e.next=12,l.filter((function(e){return e.length<=15}));case 12:return u=e.sent,l.length!==u.length&&a((0,D.PV)({message:"Maximum 15 characters per 1 label.",variant:"warning"})),e.next=16,u.map((function(e){var t=e.toLowerCase(),r=n.find((function(e){return e.label===t}));return r||{title:t}}));case 16:if(d=e.sent,!(u.length+d.length>10)){e.next=20;break}return a((0,D.PV)({message:"Maximum 10 labels per todo.",variant:"warning"})),e.abrupt("return");case 20:return e.next=22,d.filter((function(e){return"string"!==typeof e}));case 22:return(p=e.sent)&&p.length>0&&(h=[].concat((0,wt.Z)(r),(0,wt.Z)(p)),t("labels",h)),e.next=26,d.filter((function(e){return"string"===typeof e&&""!==e}));case 26:(f=e.sent)&&f.length>0&&o(f);case 28:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 8:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}();return(0,St.jsx)(Tt.Z,{multiple:!0,freeSolo:!0,id:"tags-outlined",options:n,getOptionLabel:function(e){return e.title},value:r,onChange:s,filterSelectedOptions:!0,renderInput:function(e){return(0,St.jsx)(gt.Z,(0,We.Z)((0,We.Z)({},e),{},{variant:"outlined",placeholder:"Todo Label"}))},renderTags:function(e,t){return e.map((function(e,r){return(0,St.jsx)(jt.Z,(0,We.Z)((0,We.Z)({avatar:(0,St.jsx)(nt.Z,{classes:{colorDefault:"bg-transparent"},children:(0,St.jsx)(dt.Z,{className:"text-20",style:{color:e.color},children:"label"})}),label:e.title},t({index:r})),{},{className:"mx-4 my-4",classes:{label:"px-8"}}))}))}})},Nt=r(92550),Ct=r(34814),At=r(58448),zt=r(59344),It=r(82295),Rt=r(56605),Dt=r(85281),Bt=r(25002),Mt=r(83061),Lt=r(9619),Pt=r(73428),Vt=r(54641),Et=r(93405),Ht=r(82495),Ot=r(50315),Ft=r(54572),Ut=r(48310),_t=r(60194),Gt=r(48070),Qt=r(65152),Jt=(0,Gt.Z)({root:{minWidth:275},bullet:{display:"inline-block",margin:"0 2px",transform:"scale(0.8)"},title:{fontSize:14},pos:{marginBottom:12}}),Wt=function(e){var t=(0,d.I0)(),r=(0,d.v9)((function(e){return e.chatApp})).reply,n=(0,d.v9)((function(e){return e.chatApp.current.selected})),a=(0,d.v9)((function(e){return e.auth.organization.organization}));(0,u.useEffect)((function(){a&&t(De())}),[t,a]);var o=Jt();return(0,St.jsx)("div",{className:"flex flex-col flex-auto h-full w-full",children:(0,St.jsxs)(Pt.Z,{className:o.root,variant:"outlined",children:[(0,St.jsx)(Vt.Z,{title:"Quick Reply",action:(0,St.jsx)(pt.Z,{"aria-label":"settings",onClick:function(){Qt.Z.push({pathname:"/settings/reply"})},size:"large",children:(0,St.jsx)(Ht.Z,{})})}),(0,St.jsx)(Et.Z,{children:r&&r.length>0?(0,St.jsx)(Ut.Z,{component:"nav","aria-label":"main mailbox folders",children:r.map((function(r,a){return(0,St.jsx)(_t.ZP,{button:!0,onClick:function(){t(Be({reply:r,chat:n})),e.handleReplyClose()},children:r.response&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsxs)(ht.Z,{children:[r.response.length&&"text"===r.response[0].type&&(0,St.jsx)(Ot.Z,{}),r.response.length&&"image"===r.response[0].type&&(0,St.jsx)(Ft.Z,{})]}),(0,St.jsx)(ft.Z,{primary:r.name,secondary:r.response&&r.response.length>0&&"text"===r.response[0].type?JSON.parse(r.response[0].data).text:"Image"})]})},a)}))}):(0,St.jsx)("div",{className:"flex flex-1 items-center justify-center h-full",children:(0,St.jsx)(vt.Z,{color:"textSecondary",variant:"body2",children:"There are no reply!"})})})]})})},qt=r(63445),Yt=function(e){var t=e.text,r=e.limit,n=(0,u.useState)(!0),a=(0,s.Z)(n,2),o=a[0],i=a[1],c=qt.Z.formatMentionToText(t);return(0,St.jsx)("div",{className:"break-all",children:c.length>Number(r)?(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)("div",{dangerouslySetInnerHTML:{__html:o?c.slice(0,Number(r)):c}}),(0,St.jsx)("div",{onClick:function(){i(!o)},className:"text-12 text-blue cursor-pointer",children:o?"...read more":" show less"})]}):c})},Kt=(0,f.ZP)("div")((function(e){var t=e.theme;return{"&.contact":{"& .bubble":{backgroundColor:t.palette.background.paper,color:t.palette.getContrastText(t.palette.background.paper),borderTopLeftRadius:5,borderBottomLeftRadius:5,borderTopRightRadius:20,borderBottomRightRadius:20,"& .time":{marginLeft:12}},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:20}},"&.last-of-group":{"& .bubble":{borderBottomLeftRadius:20}}},"&.me":{paddingLeft:40,"& .avatar":{order:2,margin:"0 0 0 16px"},"& .bubble":{marginLeft:"auto",backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,borderTopLeftRadius:20,borderBottomLeftRadius:20,borderTopRightRadius:5,borderBottomRightRadius:5,"& .time":{justifyContent:"flex-end",right:0,marginRight:12}},"&.first-of-group":{"& .bubble":{borderTopRightRadius:20}},"&.last-of-group":{"& .bubble":{borderBottomRightRadius:20}}},"&.contact + .me, &.me + .contact":{paddingTop:20,marginTop:20},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:20,paddingTop:13}},"&.last-of-group":{"& .bubble":{borderBottomLeftRadius:20,paddingBottom:13,"& .time":{display:"flex"}}}}})),Xt=function(e){var t=(0,d.I0)(),r=(0,u.useRef)(null),n=(0,d.v9)((function(e){return e.todoApp.current.selected})),a=(0,u.useState)(!1),o=(0,s.Z)(a,2),i=o[0],c=o[1],l=(0,u.useState)(!1),p=(0,s.Z)(l,2),h=p[0],f=p[1],m=(0,u.useState)(!1),x=(0,s.Z)(m,2),g=x[0],b=x[1],v=(0,u.useState)(null),Z=(0,s.Z)(v,2),y=Z[0],j=Z[1],w=(0,u.useState)(""),T=(0,s.Z)(w,2),S=T[0],k=T[1];(0,u.useEffect)((function(){n&&!h&&C()}),[n]);var N=function(){};function C(){r&&r.current&&r.current.scrollHeight&&(r.current.scrollTop=r.current.scrollHeight),f(!0)}function A(e,t){return"inbound"===e.direction&&(n.message[t+1]&&"inbound"!==n.message[t+1].direction||!n.message[t+1])}function z(e,t){return 0===t||n.message[t-1]&&n.message[t-1].direction!==e.direction}function I(e,t){return t===n.message.length-1||n.message[t+1]&&n.message[t+1].direction!==e.direction}var R=function(){j(null)},D=Boolean(y),B=D?"simple-popover":void 0;return(0,St.jsxs)("div",{className:(0,Mt.Z)("flex flex-col relative",e.className),children:[(0,St.jsx)(Nt.Z,{ref:r,className:"flex flex-1 flex-col overflow-y-auto",children:n&&n.message.length>0?(0,St.jsxs)(St.Fragment,{children:[n.remainCount>0&&!i?(0,St.jsx)("div",{role:"button","aria-hidden":"true",className:"text-center mt-10 cursor-pointer text-blue",onClick:function(){c(!0),t(je({chatId:n.id,pNum:n.pageNumber})).then((function(e){c(!1)}))},children:"See more"}):(0,St.jsx)("div",{className:"text-center mt-10",children:(0,St.jsx)(Dt.Z,{color:"inherit",size:20})}),(0,St.jsx)("div",{className:"flex flex-col pt-16 px-16 ltr:pl-56 rtl:pr-56 pb-40",children:n.message.map((function(e,t){var r=JSON.parse(e.data);return(0,St.jsxs)(Kt,{className:(0,Mt.Z)("flex flex-col flex-grow-0 flex-shrink-0 items-start justify-end relative px-16 pb-4",{me:"outbound"===e.direction},{contact:"inbound"===e.direction},{"first-of-group":z(e,t)},{"last-of-group":I(e,t)},t+1===n.message.length&&"pb-80"),children:[A(e,t)&&(0,St.jsx)(nt.Z,{className:"avatar absolute ltr:left-0 rtl:right-0 m-0 -mx-32",src:n.customer.pictureURL,alt:n.customer.display}),(0,St.jsxs)("div",{className:"bubble flex relative items-center justify-center p-12 max-w-screen-sm shadow",children:[e.type&&"image"===e.type&&(0,St.jsx)("img",{src:r.url,alt:r.id,className:"w-full h-auto",onLoad:N}),e.type&&"sticker"===e.type&&(0,St.jsx)("img",{src:r.url,alt:"Sticker",className:"w-full h-auto",onLoad:N}),e.type&&"text"===e.type&&(0,St.jsx)(Yt,{text:r.text,limit:50}),(0,St.jsxs)(vt.Z,{className:"time absolute hidden w-full text-11 mt-8 -mb-24 ltr:left-0 rtl:right-0 bottom-0 whitespace-nowrap",color:"textSecondary",children:["outbound"===e.direction&&e.createdBy?(0,St.jsxs)("b",{children:[e.createdBy.display,"\xa0\xa0"]}):null,e.createdAt?(0,Lt.Z)(new Date(e.createdAt),{addSuffix:!1}):null]})]})]},e.id)}))})]}):(0,St.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,St.jsx)("div",{className:"flex flex-col flex-1 items-center justify-center",children:(0,St.jsx)(dt.Z,{className:"text-128",color:"disabled",children:"chat"})}),(0,St.jsx)(vt.Z,{className:"px-16 pb-24 text-center",color:"textSecondary",children:"Start a conversation by typing your message below."})]})}),n&&"none"!==n.status&&(0,St.jsxs)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),""!==S.trim()&&(t(we({messageText:S,chat:n})).then((function(e){C()})),t(be({id:Ct.Z.generateGUID(),data:JSON.stringify({text:S}),type:"text",timestamp:new Date,isError:!1,isRead:!1,direction:"outbound",createdAt:new Date,updatedAt:new Date})),k(""))},className:"absolute bottom-0 right-0 left-0 py-16 px-8",children:[(0,St.jsxs)(It.Z,{className:"flex items-center relative rounded-24 shadow",children:[(0,St.jsx)(Rt.Z,{autoFocus:!1,id:"message-input",disableUnderline:!0,className:"flex flex-grow flex-shrink-0 mx-16 ltr:ml-96 rtl:mr-96 ltr:mr-48 rtl:ml-48 my-8",onChange:function(e){k(e.target.value)},value:S,disabled:g,placeholder:"Enter a Message"}),(0,St.jsx)(pt.Z,{disabled:g,className:"absolute ltr:right-0 rtl:left-0 top-0",type:"submit",size:"large",children:(0,St.jsx)(dt.Z,{className:"text-24",color:"action",children:"send"})}),(0,St.jsx)("input",{accept:"image/gif, image/png, image/jpeg, video/mp4",onChange:function(e){b(!0);var r=new FormData;r.append("file",e.target.files[0]),t(Te({formData:r,chat:n})).then((function(){setTimeout((function(){b(!1)}),5e3)}))},className:"hidden",id:"icon-button-file-chat",type:"file"}),(0,St.jsx)("label",{htmlFor:"icon-button-file-chat",children:(0,St.jsx)(pt.Z,{className:"absolute ltr:left-48 rtl:right-48 top-0","aria-label":"upload picture",component:"span",size:"large",children:g?(0,St.jsx)(Dt.Z,{size:24}):(0,St.jsx)(zt.Z,{})})}),(0,St.jsx)(lt.Z,{className:"absolute ltr:left-48 rtl:right-48 top-0 h-32 my-8",orientation:"vertical"}),(0,St.jsx)(pt.Z,{className:"absolute ltr:left-0 rtl:right-0 top-0",onClick:function(e){j(e.currentTarget)},"aria-describedby":B,size:"large",children:(0,St.jsx)(At.Z,{})})]}),(0,St.jsx)(Bt.ZP,{id:B,open:D,anchorEl:y,onClose:R,anchorOrigin:{vertical:"top",horizontal:"center"},transformOrigin:{vertical:"bottom",horizontal:"center"},children:(0,St.jsx)(Wt,{handleReplyClose:R})})]})]})},$t=r(52500),er=r(57597),tr=(0,f.ZP)("div")((function(e){var t=e.theme;return{position:"relative",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"flex-end",padding:"0 16px 4px 16px",flex:"0 0 auto","& .avatar":{position:"absolute",left:-32,margin:0},"& .bubble":{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",padding:12,maxWidth:"100%"},"& .message":{whiteSpace:"pre-wrap",lineHeight:1.2},"& .time":{position:"absolute",display:"none",width:"100%",fontSize:11,marginTop:8,top:"100%",left:0,whiteSpace:"nowrap"},"&.contact":{"& .bubble":{backgroundColor:t.palette.background.paper,color:t.palette.getContrastText(t.palette.background.paper),borderTopLeftRadius:5,borderBottomLeftRadius:5,borderTopRightRadius:20,borderBottomRightRadius:20,"& .time":{marginLeft:12}},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:20}},"&.last-of-group":{"& .bubble":{borderBottomLeftRadius:20}}},"&.me":{paddingLeft:40,"& .avatar":{order:2,margin:"0 0 0 16px"},"& .bubble":{marginLeft:"auto",backgroundColor:t.palette.primary.main,color:t.palette.primary.contrastText,borderTopLeftRadius:20,borderBottomLeftRadius:20,borderTopRightRadius:5,borderBottomRightRadius:5,"& .time":{justifyContent:"flex-end",right:0,marginRight:12}},"&.first-of-group":{"& .bubble":{borderTopRightRadius:20}},"&.last-of-group":{"& .bubble":{borderBottomRightRadius:20}}},"&.contact + .me, &.me + .contact":{paddingTop:20,marginTop:20},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:20,paddingTop:13}},"&.last-of-group":{"& .bubble":{borderBottomLeftRadius:20,paddingBottom:13,"& .time":{display:"flex"}}}}})),rr=function(e){var t=(0,d.I0)(),r=(0,u.useRef)(null),n=(0,u.useState)((function(){return $t.EditorState.createEmpty()})),a=(0,s.Z)(n,2),o=a[0],i=a[1],c=(0,u.useState)([]),l=(0,s.Z)(c,2),p=l[0],h=l[1],f=(0,u.useState)([]),m=(0,s.Z)(f,2),x=m[0],v=m[1],Z=(0,u.useState)(!1),y=(0,s.Z)(Z,2),j=y[0],w=y[1],T=(0,d.v9)((function(e){return e.todoApp.current})),S=T.selected,k=T.selectType,N=(0,d.v9)((function(e){return e.todoApp.customer.customer})),C=(0,d.v9)((function(e){return e.user.uuid})),A=(0,d.v9)((function(e){return e.auth.organization.organization}));(0,u.useEffect)((function(){e.expanded&&t(Ne())}),[e.expanded]),(0,u.useEffect)((function(){r&&r.current&&r.current.scrollHeight&&(r.current.scrollTop=r.current.scrollHeight)}),[N]),(0,u.useEffect)((function(){S&&z(),S&&S.teamChat&&S.teamChat.length&&v(S.teamChat)}),[S]);var z=function(){var e=(0,b.Z)((0,g.Z)().mark((function e(){var t,r,n,a;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.Z.getAccessToken();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,R().get("/api/".concat(A.id,"/user/list"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)}});case 7:return r=e.sent,e.next=10,r.data;case 10:return n=e.sent,e.next=13,n.map((function(e){return(0,We.Z)((0,We.Z)({},e.user),{},{userId:e.user.id,id:e.user.email,display:"".concat(e.user.firstname," ").concat(e.user.lastname)})}));case 13:(a=e.sent)&&h(a);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,St.jsx)(It.Z,{className:(0,Mt.Z)("flex flex-col relative pb-64 shadow h-full",e.className),sx:{background:function(e){return e.palette.background.default}},children:(0,u.useMemo)((function(){var e=function(e,t){return 0===t||x[t-1]&&x[t-1].createdBy.id!==e.createdBy.id},n=function(e,t){return t===x.length-1||x[t+1]&&x[t+1].createdBy.id!==e.createdBy.id},a=function(){var e=(0,b.Z)((0,g.Z)().mark((function e(r){var n;return(0,g.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(!0),(n=new FormData).append("file",r.target.files[0]),t(ke({formData:n,chat:S})).then((function(){setTimeout((function(){w(!1)}),5e3)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e){e.preventDefault();var r=o.getCurrentContent(),n=qt.Z.formatTextToMention(r.getPlainText(),(0,$t.convertToRaw)(r).entityMap);""!==n.trim()&&t(Se({messageText:n,chat:S})).then((function(){i($t.EditorState.createEmpty())}))};return"chat"!==k?null:(0,St.jsxs)(St.Fragment,{children:[(0,St.jsxs)(Nt.Z,{ref:r,className:"flex flex-1 flex-col overflow-y-auto overscroll-contain pb-16",children:[!x&&(0,St.jsxs)("div",{className:"flex flex-col flex-1 items-center justify-center p-24",children:[(0,St.jsx)(dt.Z,{className:"text-128",color:"disabled",children:"chat"}),(0,St.jsx)(vt.Z,{className:"px-16 pb-24 mt-24 text-center",color:"textSecondary",children:"No Team Chat conversation."})]}),x.length>0&&(0,St.jsx)("div",{className:"flex flex-col pt-16 ltr:pl-40 rtl:pr-40 pb-40",children:x.map((function(t,r){return(0,St.jsx)(tr,{className:(0,Mt.Z)({me:t.createdBy.id===C},{contact:t.createdBy.id!==C},{"first-of-group":e(t,r)},{"last-of-group":n(t,r)}),children:(0,St.jsxs)("div",{className:"bubble shadow",children:[t.type&&"text"===t.type&&(0,St.jsx)("div",{className:"message",children:(0,St.jsx)(Yt,{text:JSON.parse(t.data).text,limit:30})}),t.type&&"image"===t.type&&(0,St.jsx)("div",{className:"message",children:(0,St.jsx)("img",{src:JSON.parse(t.data).url,alt:t.id,className:"max-w-xs"})}),(0,St.jsxs)(vt.Z,{className:"time",color:"textSecondary",children:[t.createdBy?(0,St.jsxs)("b",{children:[t.createdBy.display,"\xa0\xa0"]}):null,t.createdAt?(0,Lt.Z)(new Date(t.createdAt),{addSuffix:!1}):null]})]})},t.createdAt)}))}),0===x.length&&(0,St.jsxs)("div",{className:"flex flex-col flex-1",children:[(0,St.jsx)("div",{className:"flex flex-col flex-1 items-center justify-center",children:(0,St.jsx)(dt.Z,{className:"text-128",color:"disabled",children:"chat"})}),(0,St.jsx)(vt.Z,{className:"px-16 pb-24 text-center",color:"textSecondary",children:"Start a conversation by typing your message below."})]})]}),S&&(0,St.jsx)("form",{onSubmit:s,className:"pb-16 px-8 absolute bottom-64 left-0 right-0",children:(0,St.jsxs)(It.Z,{className:"rounded-24 flex items-center relative shadow",children:[(0,St.jsx)(er.sU,{editorState:o,setEditorState:i,onMessageSubmit:s,options:p&&p.map((function(e){return(0,We.Z)((0,We.Z)({},e),{},{link:e.email,name:e.display})}))}),(0,St.jsx)(pt.Z,{disabled:j,className:"absolute ltr:right-0 rtl:left-0 top-0 p-6 mx-6",type:"submit",size:"large",children:(0,St.jsx)(dt.Z,{className:"text-24",color:"action",children:"send"})}),(0,St.jsx)("input",{accept:"image/gif, image/png, image/jpeg, video/mp4",onChange:a,className:"hidden",id:"tcFile",type:"file"}),(0,St.jsx)("label",{htmlFor:"tcFile",children:(0,St.jsx)(pt.Z,{className:"absolute ltr:left-0 rtl:right-0 top-0 p-6 mx-6","aria-label":"upload picture",component:"span",size:"large",children:j?(0,St.jsx)(Dt.Z,{size:24}):(0,St.jsx)(zt.Z,{})})})]})})]})}),[k,x,S,o,p,j,N.id,t,C])})},nr=function(e){var t=(0,d.I0)(),r=(0,d.v9)((function(e){return e.todoApp.current.selected})),n=(0,d.v9)((function(e){return e.todoApp.current.selectType})),a=(0,d.v9)((function(e){return e.todoApp.customer.customer})),o=(0,d.v9)((function(e){return e.todoApp.sidebars.customerSidebarOpen})),i=(0,u.useState)(!1),c=(0,s.Z)(i,2),l=(c[0],c[1]),p=(0,u.useState)(""),h=(0,s.Z)(p,2),f=(h[0],h[1]),m=(0,u.useState)(""),x=(0,s.Z)(m,2),g=(x[0],x[1]);(0,u.useEffect)((function(){r&&r.channel&&("line"===r.channel.channel&&r.channel.line&&f(r.channel.line.name),"facebook"===r.channel.channel&&r.channel.facebook&&f(r.channel.facebook.name)),r&&r.customer&&(o?t(Ue({customerId:r.customer.id})):l(!1))}),[t,o,r]),(0,u.useEffect)((function(){a&&(a.firstname||a.lastname?g("".concat(a.firstname," ").concat(a.lastname)):a.display&&g(a.display))}),[a]);return a?(0,St.jsxs)("div",{className:"flex flex-col flex-auto h-full w-full",children:[(0,St.jsx)($e.Z,{position:"static",color:"primary",elevation:0,children:(0,St.jsxs)(bt.Z,{className:"flex justify-between items-center px-4",children:[(0,St.jsx)(vt.Z,{className:"px-12",color:"inherit",variant:"subtitle1",children:"Team Chat"}),(0,St.jsx)(pt.Z,{onClick:function(){return t(ue())},color:"inherit",size:"large",children:(0,St.jsx)(dt.Z,{children:"close"})})]})}),"chat"===n&&(0,St.jsx)(rr,{})]}):null},ar={title:"",notes:"",startDate:new Date,dueDate:new Date,completed:!1,starred:!1,important:!1,deleted:!1,labels:[]},or=Zt.Ry().shape({title:Zt.Z_().required("You must enter a title")}),sr=function(e){var t=e.selectedAccount,r=(0,d.I0)(),n=(0,d.v9)((function(e){return e.todoApp.todos.todoDialog})),a=(0,d.v9)(E),o=(0,u.useState)(null),c=(0,s.Z)(o,2),l=c[0],p=c[1],h=(0,Ke.cI)({mode:"onChange",defaultValues:ar,resolver:(0,qe.X)(or)}),m=h.watch,x=h.handleSubmit,g=h.formState,b=h.reset,v=h.control,Z=(h.getValues,h.setValue),y=g.errors,j=(g.isValid,g.isDirty,m("id")),w=m("labels"),T=m("deuDate"),S=m("startDate"),k=(0,d.v9)((function(e){return e.todoApp.current.selectType})),N=(0,d.v9)((function(e){return e.todoApp.current.selected})),C=(0,u.useState)(""),A=(0,s.Z)(C,2),z=A[0],I=A[1],R=(0,d.v9)((function(e){return e.user.uuid})),D=(0,d.v9)((function(e){return e.todoApp.sidebars.customerSidebarOpen}));(0,u.useMemo)((function(){N&&N.channel&&("line"===N.channel.channel&&N.channel.line&&I(N.channel.line.name),"facebook"===N.channel.channel&&N.channel.facebook&&I(N.channel.facebook.name))}),[N]);var B=(0,f.ZP)(tt.Z)((function(e){var t=e.theme;return{"& .MuiDrawer-paper":(0,i.Z)({width:400,maxWidth:"100%",overflow:"hidden"},t.breakpoints.up("md"),{position:"relative"})}})),M=(0,u.useCallback)((function(){"edit"===n.type&&n.data&&b((0,We.Z)({},n.data)),"new"===n.type&&b((0,We.Z)((0,We.Z)({},ar),n.data))}),[n.data,n.type,b]);function L(){return"edit"===n.type?r(ne()):r(te())}return(0,u.useEffect)((function(){n.props.open&&M()}),[n.props.open,M]),(0,St.jsx)(st.Z,(0,We.Z)((0,We.Z)({},n.props),{},{onClose:L,classes:{paper:"max-w-lg w-full m-24"},children:(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(yt.Z,{component:"div",className:"p-0",children:(0,St.jsx)($e.Z,{position:"static",elevation:0,children:(0,St.jsx)(bt.Z,{className:"flex w-full",children:(0,St.jsx)(vt.Z,{variant:"subtitle1",color:"inherit",children:"new"===n.type?"New Todo":"Edit Todo"})})})}),(0,St.jsxs)(ct.Z,{className:"p-16 px-0",children:["new"!==n.type&&n.data&&n.data.chatId.length>0&&N&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)($e.Z,{className:"w-full",elevation:0,position:"static",children:(0,St.jsxs)(bt.Z,{className:"px-16 m-8",children:[(0,St.jsx)(pt.Z,{color:"inherit","aria-label":"Open drawer",onClick:function(){return r(ie())},className:"flex md:hidden",size:"large",children:(0,St.jsx)(dt.Z,{children:"chat"})}),(0,St.jsx)("div",{className:"flex flex-row justify-between w-full",children:(0,St.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:function(){return r(le())},onKeyDown:function(){return r(le())},role:"button",tabIndex:0,children:[(0,St.jsxs)("div",{className:"relative mx-8",children:[(0,St.jsx)("div",{className:"absolute right-0 bottom-0 -m-4 z-10"}),"chat"===k&&(0,St.jsx)(nt.Z,{sx:{width:60,height:60},src:N.customer.pictureURL,alt:N.customer.display}),"history"===k&&(0,St.jsx)(nt.Z,{sx:{width:60,height:60},src:N.pictureURL,alt:N.display})]}),(0,St.jsxs)("div",{className:"flex flex-col",children:[(0,St.jsxs)(vt.Z,{color:"white",className:"text-18 font-semibold px-4",children:["chat"===k&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(rt.Z,{mdDown:!0,children:N.customer.firstname?"".concat(N.customer.firstname.substring(0,15)):"".concat(N.customer.display.substring(0,15))}),(0,St.jsx)(rt.Z,{mdUp:!0,children:N.customer.firstname||N.customer.lastname?"".concat(N.customer.firstname," ").concat(N.customer.lastname):"".concat(N.customer.display)})]}),"history"===k&&(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(rt.Z,{mdDown:!0,children:N.firstname?"".concat(N.firstname.substring(0,15)):"".concat(N.display.substring(0,15))}),(0,St.jsx)(rt.Z,{mdUp:!0,children:N.firstname||N.lastname?"".concat(N.firstname," ").concat(N.lastname):"".concat(N.display)})]})]}),(0,St.jsxs)("div",{className:"flex flex-row space-x-8",children:[(0,St.jsxs)(rt.Z,{mdDown:!0,children:[(0,St.jsx)(jt.Z,{size:"small",variant:"outlined",color:"secondary",className:"w-min m-8",label:z}),"chat"===k&&N.mention.filter((function(e){return!e.isRead&&e.user.id===R})).length>0&&(0,St.jsx)(jt.Z,{size:"small",variant:"outlined",color:"error",className:"w-min m-8",label:"TeamChat mention: ".concat(N.mention.filter((function(e){return!e.isRead&&e.user.id===R})).length)})]}),(0,St.jsxs)(rt.Z,{mdUp:!0,children:[(0,St.jsx)(jt.Z,{size:"small",variant:"outlined",color:"secondary",className:"w-min m-8",label:"".concat(z.substring(0,15),"...")}),"chat"===k&&N.mention.filter((function(e){return!e.isRead&&e.user.id===R})).length>0&&(0,St.jsx)(jt.Z,{size:"small",variant:"outlined",color:"error",className:"w-min m-8",label:"Mention: ".concat(N.mention.filter((function(e){return!e.isRead&&e.user.id===R})).length)})]})]})]})]})})]})}),(0,St.jsx)("div",{className:"ChatApp-content",children:(0,St.jsx)(Xt,{className:"flex flex-1 z-100 max-h-288"})})]}),(0,St.jsxs)("form",{onSubmit:x((function(e){"new"===n.type?r(U({todo:(0,We.Z)((0,We.Z)({},e),{},{userId:t})})):r(_({todo:(0,We.Z)((0,We.Z)((0,We.Z)({},n.data),e),{},{userId:t})})),L()})),children:[(0,St.jsxs)(ct.Z,{classes:{root:"p-0"},children:[(0,St.jsxs)("div",{className:"mb-16",children:[(0,St.jsxs)("div",{className:"flex items-center justify-between p-12",children:[(0,St.jsx)("div",{className:"flex",children:(0,St.jsx)(Ke.Qr,{name:"completed",control:v,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,St.jsx)(pt.Z,{tabIndex:-1,disableRipple:!0,onClick:function(e){return r(!n)},size:"large",children:n?(0,St.jsx)(dt.Z,{color:"secondary",children:"check_circle"}):(0,St.jsx)(dt.Z,{color:"action",children:"radio_button_unchecked"})})}})}),(0,St.jsxs)("div",{className:"flex items-center justify-start",children:[(0,St.jsx)(Ke.Qr,{name:"important",control:v,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,St.jsx)(pt.Z,{onClick:function(){return r(!n)},size:"large",children:n?(0,St.jsx)(dt.Z,{style:{color:at.Z[500]},children:"error"}):(0,St.jsx)(dt.Z,{children:"error_outline"})})}}),(0,St.jsx)(Ke.Qr,{name:"starred",control:v,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,St.jsx)(pt.Z,{onClick:function(){return r(!n)},size:"large",children:n?(0,St.jsx)(dt.Z,{style:{color:ot.Z[500]},children:"star"}):(0,St.jsx)(dt.Z,{children:"star_outline"})})}}),(0,St.jsxs)("div",{children:[(0,St.jsx)(pt.Z,{"aria-owns":l?"label-menu":null,"aria-haspopup":"true",onClick:function(e){return p(e.currentTarget)},size:"large",children:(0,St.jsx)(dt.Z,{children:"label"})}),(0,St.jsx)(Ke.Qr,{name:"labels",control:v,render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,St.jsx)(mt.Z,{id:"label-menu",anchorEl:l,open:Boolean(l),onClose:function(){return p(null)},children:a.length>0&&a.map((function(e){return(0,St.jsxs)(xt.Z,{onClick:function(t){return r(Xe.Z.xorWith(n,[e],Xe.Z.isEqual))},children:[(0,St.jsx)(ht.Z,{className:"min-w-24",children:(0,St.jsx)(dt.Z,{color:"action",children:n.some((function(t){return t.title.includes(e.title)}))?"check_box":"check_box_outline_blank"})}),(0,St.jsx)(ft.Z,{className:"mx-8",primary:e.title,disableTypography:!0}),(0,St.jsx)(ht.Z,{className:"min-w-24",children:(0,St.jsx)(dt.Z,{style:{color:e.color},color:"action",children:"label"})})]},e.id)}))})}})]})]})]}),(0,St.jsx)(lt.Z,{className:"mx-24"})]}),(0,St.jsxs)("div",{className:"px-16 sm:px-24",children:[(0,St.jsx)(ut.Z,{className:"mt-8 mb-16",required:!0,fullWidth:!0,children:(0,St.jsx)(Ke.Qr,{name:"title",control:v,render:function(e){var t,r=e.field;return(0,St.jsx)(gt.Z,(0,We.Z)((0,We.Z)({},r),{},{label:"Title",autoFocus:!0,error:!!y.title,helperText:null===y||void 0===y||null===(t=y.title)||void 0===t?void 0:t.message,required:!0,variant:"outlined"}))}})}),(0,St.jsx)(ut.Z,{className:"mt-8 mb-16",required:!0,fullWidth:!0,children:(0,St.jsx)(Ke.Qr,{name:"notes",control:v,render:function(e){var t=e.field;return(0,St.jsx)(gt.Z,(0,We.Z)((0,We.Z)({},t),{},{label:"Notes",multiline:!0,rows:"6",variant:"outlined"}))}})}),(0,St.jsxs)("div",{className:"flex flex-wrap flex-col w-full mb-16",children:[(0,St.jsxs)("div",{className:"flex  items-center mt-16 mb-12",children:[(0,St.jsx)(dt.Z,{className:"text-20",color:"inherit",children:"label"}),(0,St.jsx)(vt.Z,{className:"font-semibold text-16 mx-8",children:"Labels"})]}),(0,St.jsx)(kt,{control:v,setValue:Z,labelSelect:w,labelOption:a})]}),(0,St.jsxs)("div",{className:"flex -mx-4",children:[(0,St.jsx)(Ke.Qr,{name:"startDate",control:v,defaultValue:"",render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,St.jsx)(Ye.x,{value:n,onChange:r,maxDate:T,renderInput:function(e){return(0,St.jsx)(gt.Z,(0,We.Z)({label:"Start Date",className:"mt-8 mb-16 mx-4"},e))}})}}),(0,St.jsx)(Ke.Qr,{name:"dueDate",control:v,defaultValue:"",render:function(e){var t=e.field,r=t.onChange,n=t.value;return(0,St.jsx)(Ye.x,{value:n,onChange:r,minDate:S,renderInput:function(e){return(0,St.jsx)(gt.Z,(0,We.Z)({label:"Due Date",className:"mt-8 mb-16 mx-4"},e))}})}})]})]})]}),"new"===n.type?(0,St.jsx)(it.Z,{className:"justify-between px-8 py-16",children:(0,St.jsx)("div",{className:"px-16",children:(0,St.jsx)(et.Z,{type:"submit",variant:"contained",color:"secondary",children:"Add"})})}):(0,St.jsxs)(it.Z,{className:"justify-between px-8 py-16",children:[(0,St.jsx)("div",{className:"px-16",children:(0,St.jsx)(et.Z,{type:"submit",variant:"contained",color:"secondary",children:"Save"})}),(0,St.jsx)(pt.Z,{className:"min-w-auto",onClick:function(){r(G(j)).then((function(){L()}))},size:"large",children:(0,St.jsx)(dt.Z,{children:"delete"})})]})]})]}),(0,St.jsx)("div",{children:(0,St.jsx)(B,{className:"h-full absolute z-30",variant:"temporary",anchor:"right",open:D,onOpen:function(e){},onClose:function(){return r(ue())},classes:{paper:"absolute ltr:right-0 rtl:left-0"},sx:{"& .MuiDrawer-paper":{position:"absolute"}},ModalProps:{keepMounted:!0,disablePortal:!0,BackdropProps:{classes:{root:"absolute"}}},children:(0,St.jsx)(nr,{})})})]})}))},ir=r(36304),cr=r(62201),lr=function(e){var t=(0,d.I0)(),r=(0,d.v9)((function(e){return e.todoApp.todos.searchText})),n=(0,d.v9)(cr.rg);return(0,St.jsx)(ir.Z,{theme:n,children:(0,St.jsx)("div",{className:"flex flex-1",children:(0,St.jsxs)(It.Z,{className:"flex items-center w-full h-48 sm:h-56 p-16 ltr:pl-4 lg:ltr:pl-16 rtl:pr-4 lg:rtl:pr-16 shadow",children:[(0,St.jsx)(rt.Z,{lgUp:!0,children:(0,St.jsx)(pt.Z,{onClick:function(t){return e.pageLayout.current.toggleLeftSidebar()},"aria-label":"open left sidebar",size:"large",children:(0,St.jsx)(dt.Z,{children:"menu"})})}),(0,St.jsx)(dt.Z,{color:"action",children:"search"}),(0,St.jsx)(Rt.Z,{placeholder:"Search",className:"px-16",disableUnderline:!0,fullWidth:!0,value:r,inputProps:{"aria-label":"Search"},onChange:function(e){return t(K(e))}})]})})})},ur=r(51938),dr=(0,f.ZP)("div")((function(e){e.theme;return{display:"flex",alignItems:"center",height:20,borderRadius:10,padding:"0 6px",fontSize:10,backgroundColor:"rgba(0,0,0,.08);","& > span":{width:8,height:8,marginRight:4,borderRadius:"50%",backgroundColor:e.color}}})),pr=function(e){return(0,St.jsxs)(dr,{className:e.className,color:e.color,children:[(0,St.jsx)("span",{}),(0,St.jsx)("div",{children:e.title})]})},hr=(0,f.ZP)(_t.ZP)((function(e){e.theme;var t=e.completed;return(0,We.Z)({},t&&{background:"rgba(0,0,0,0.03)","& .todo-title, & .todo-notes":{textDecoration:"line-through"}})})),fr=function(e){var t=(0,d.I0)();(0,d.v9)(H);return(0,St.jsxs)(hr,{className:"py-20 px-0 sm:px-8",completed:e.todo.completed?1:0,onClick:function(r){r.preventDefault(),e.todo.chatId.length>0?t(je({chatId:e.todo.chatId,pNum:0})).unwrap().then((function(r){xe(r),t(re(e.todo))})):t(re(e.todo))},dense:!0,button:!0,children:[(0,St.jsx)(pt.Z,{tabIndex:-1,disableRipple:!0,onClick:function(r){r.stopPropagation(),t(_({todo:(0,We.Z)((0,We.Z)({},e.todo),{},{completed:!e.todo.completed})}))},size:"large",children:e.todo.completed?(0,St.jsx)(dt.Z,{color:"secondary",children:"check_circle"}):(0,St.jsx)(dt.Z,{color:"action",children:"radio_button_unchecked"})}),(0,St.jsxs)("div",{className:"flex flex-1 flex-col relative overflow-hidden px-8",children:[(0,St.jsx)(vt.Z,{className:"todo-title truncate text-14 font-medium",color:e.todo.completed?"textSecondary":"inherit",children:e.todo.title}),(0,St.jsx)(vt.Z,{color:"textSecondary",className:"todo-notes truncate",children:Xe.Z.truncate(e.todo.notes.replace(/<(?:.|\n)*?>/gm,""),{length:180})}),(0,St.jsx)("div",{className:"flex -mx-2 mt-8",children:e.todo.labels.map((function(e){return(0,St.jsx)(pr,{className:"mx-2 mt-4",title:e.title,color:e.color},e.id)}))})]}),(0,St.jsxs)("div",{className:"px-8",children:[(0,St.jsx)(pt.Z,{onClick:function(r){r.preventDefault(),r.stopPropagation(),t(_({todo:(0,We.Z)((0,We.Z)({},e.todo),{},{important:!e.todo.important})}))},size:"large",children:e.todo.important?(0,St.jsx)(dt.Z,{style:{color:at.Z[500]},children:"error"}):(0,St.jsx)(dt.Z,{children:"error_outline"})}),(0,St.jsx)(pt.Z,{onClick:function(r){r.preventDefault(),r.stopPropagation(),t(_({todo:(0,We.Z)((0,We.Z)({},e.todo),{},{starred:!e.todo.starred})}))},size:"large",children:e.todo.starred?(0,St.jsx)(dt.Z,{style:{color:ot.Z[500]},children:"star"}):(0,St.jsx)(dt.Z,{children:"star_outline"})})]})]})},mr=function(e){var t=e.selectedAccount,r=(e.setSelectedCount,(0,d.v9)(W)),n=(0,u.useState)((0,wt.Z)(r)),a=(0,s.Z)(n,2),o=a[0],i=a[1],c=(0,d.v9)((function(e){return e.todoApp.todos.searchText})),l=(0,d.v9)((function(e){return e.todoApp.todos.orderBy})),p=(0,d.v9)((function(e){return e.todoApp.todos.orderDescending})),h=(0,u.useState)(null),f=(0,s.Z)(h,2),m=f[0],x=f[1];if((0,u.useEffect)((function(){i(r.filter((function(e){return e.userId===t})))}),[r,t]),(0,u.useEffect)((function(){var e;o&&x(Xe.Z.orderBy(0===(e=c).length?o:Ct.Z.filterArrayByString(o,e),[l],[p?"desc":"asc"]))}),[o,c,l,p]),!m)return null;if(0===m.length)return(0,St.jsx)(ur.E.div,{initial:{opacity:0},animate:{opacity:1,transition:{delay:.1}},className:"flex flex-1 items-center justify-center h-full",children:(0,St.jsx)(vt.Z,{color:"textSecondary",variant:"h5",children:"There are no todos!"})});var g={hidden:{opacity:0,y:20},show:{opacity:1,y:0}};return(0,St.jsx)(Ut.Z,{className:"p-0",children:(0,St.jsx)(ur.E.div,{variants:{show:{transition:{staggerChildren:.1}}},initial:"hidden",animate:"show",children:m.map((function(e){return(0,St.jsx)(ur.E.div,{variants:g,children:(0,St.jsx)(fr,{todo:e})},e.id)}))})})},xr=r(5227),gr=r(58800),br=(0,f.ZP)(_t.ZP)((function(e){return{color:"inherit!important",textDecoration:"none!important",height:40,width:"100%",borderRadius:6,paddingLeft:12,paddingRight:12,marginBottom:4,"&.active":{backgroundColor:"light"===e.theme.palette.mode?"rgba(0, 0, 0, .05)!important":"rgba(255, 255, 255, .1)!important",pointerEvents:"none","& .list-item-icon":{color:"inherit"}},"& .list-item-icon":{fontSize:16,width:16,height:16,marginRight:16}}})),vr=function(e){var t=e.selectedAccount,r=(0,d.I0)(),n=(0,d.v9)(E),a=(0,d.v9)(A),o=(0,d.v9)(w);return(0,St.jsxs)(ur.E.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1,transition:{delay:.4}},className:"flex-auto border-l-1 border-solid",children:[(0,St.jsx)("div",{className:"p-24 pb-16",children:(0,St.jsx)(et.Z,{onClick:function(){r(ee(t))},variant:"contained",color:"secondary",className:"w-full",children:"Add task"})}),(0,St.jsxs)("div",{className:"px-12",children:[(0,St.jsx)(Ut.Z,{children:a.length>0&&a.map((function(e){return(0,St.jsxs)(br,{button:!0,component:xr.Z,to:"/apps/todo/".concat(e.handle),activeClassName:"active",children:[(0,St.jsx)(dt.Z,{className:"list-item-icon",color:"action",children:e.icon}),(0,St.jsx)(ft.Z,{primary:e.title,disableTypography:!0})]},e.id)}))}),(0,St.jsxs)(Ut.Z,{children:[(0,St.jsx)(gr.Z,{className:"pl-12",disableSticky:!0,children:"FILTERS"}),o.length>0&&o.map((function(e){return(0,St.jsxs)(br,{button:!0,component:xr.Z,to:"/apps/todo/".concat(e.handle),activeClassName:"active",children:[(0,St.jsx)(dt.Z,{className:"list-item-icon",color:"action",children:e.icon}),(0,St.jsx)(ft.Z,{primary:e.title,disableTypography:!0})]},e.id)}))]}),(0,St.jsxs)(Ut.Z,{children:[(0,St.jsx)(gr.Z,{className:"pl-12",disableSticky:!0,children:"LABELS"}),n.length>0&&n.map((function(e){return(0,St.jsxs)(br,{button:!0,component:xr.Z,to:"/apps/todo/label/".concat(e.title.toLowerCase()),children:[(0,St.jsx)(dt.Z,{className:"list-item-icon",style:{color:e.color},color:"action",children:"label"}),(0,St.jsx)(ft.Z,{primary:e.title,disableTypography:!0})]},e.id)}))]})]})]})},Zr=function(e){var t,r,n=e.selectedAccount,a=e.setSelectedCount,o=((0,d.I0)(),(0,d.v9)((function(e){return e.user.data}))),s=(0,d.v9)(m.YN);return(0,u.useEffect)((function(){a(s.find((function(e){return e.user.email===o.email})).user.id)}),[o,s]),(0,St.jsxs)("div",{className:"flex flex-col justify-center h-full p-24",children:[(0,St.jsxs)("div",{className:"flex items-center flex-1",children:[(0,St.jsx)(dt.Z,{component:ur.E.span,initial:{scale:0},animate:{scale:1,transition:{delay:.2}},className:"text-24 md:text-32",children:"check_box"}),(0,St.jsx)(vt.Z,{component:ur.E.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-16 md:text-24 mx-12 font-semibold",children:"To-Do"})]}),(0,St.jsx)(ur.E.div,{initial:{y:20,opacity:.8},animate:{y:0,opacity:1,transition:{delay:.3}},children:(0,St.jsx)(gt.Z,{id:"account-selection",sx:{width:"-webkit-fill-available"},select:!0,label:null===(t=s.find((function(e){return e.user.id===n})))||void 0===t||null===(r=t.user)||void 0===r?void 0:r.display,value:n,onChange:function(e){a(e.target.value)},placeholder:"Select Account",margin:"normal",variant:"filled",children:s.map((function(e,t){return(0,St.jsx)(xt.Z,{value:e.user.id,children:e.user.email},e.user.id)}))})})]})},yr=r(88797),jr=function(e){var t=(0,d.I0)(),r=(0,d.v9)((function(e){return e.todoApp.todos.orderBy})),n=(0,d.v9)((function(e){return e.todoApp.todos.orderDescending}));return(0,St.jsxs)("div",{className:"flex justify-between w-full",children:[(0,St.jsx)("div",{className:"flex"}),(0,St.jsxs)("div",{className:"flex items-center",children:[(0,St.jsx)(ut.Z,{className:"",variant:"filled",children:(0,St.jsxs)(yr.Z,{value:r,onChange:function(e){t($(e.target.value))},displayEmpty:!0,name:"filter",classes:{select:"py-8"},children:[(0,St.jsx)(xt.Z,{value:"",children:(0,St.jsx)("em",{children:"Order by"})}),(0,St.jsx)(xt.Z,{value:"startDate",children:"Start Date"}),(0,St.jsx)(xt.Z,{value:"dueDate",children:"Due Date"}),(0,St.jsx)(xt.Z,{value:"title",children:"Title"})]})}),(0,St.jsx)(pt.Z,{onClick:function(e){return t(X())},size:"large",children:(0,St.jsx)(dt.Z,{style:{transform:n?"scaleY(-1)":"scaleY(1)"},children:"sort"})})]})]})},wr=(0,f.ZP)(c.Z)((function(e){var t=e.theme;return{"& .FusePageCarded-header":(0,i.Z)({minHeight:72,height:72,alignItems:"center"},t.breakpoints.up("sm"),{minHeight:136,height:136})}})),Tr=(0,l.Z)("todoApp",Je)((function(e){var t=(0,d.I0)(),r=(0,u.useState)(!0),n=(0,s.Z)(r,2),a=n[0],o=n[1],i=(0,u.useState)(),c=(0,s.Z)(i,2),l=c[0],f=c[1],x=(0,u.useRef)(null),g=(0,p.UO)();return(0,u.useEffect)((function(){t((0,m.Rf)()).then((function(){return o(!1)})),t(Z()),t(k()),t(M())}),[t]),(0,h.KW)((function(){t(F(g))}),[t,g]),a?null:(0,St.jsxs)(St.Fragment,{children:[(0,St.jsx)(wr,{header:(0,St.jsx)(lr,{pageLayout:x}),contentToolbar:(0,St.jsx)(jr,{}),content:(0,St.jsx)(mr,{selectedAccount:l,setSelectedCount:f}),leftSidebarHeader:(0,St.jsx)(Zr,{selectedAccount:l,setSelectedCount:f}),leftSidebarContent:(0,St.jsx)(vr,{selectedAccount:l}),ref:x,innerScroll:!0}),(0,St.jsx)(sr,{selectedAccount:l})]})}))},58448:function(e,t,r){var n=r(64836);t.Z=void 0;var a=n(r(45045)),o=r(46417),s=(0,a.default)((0,o.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM17 11h-4v4h-2v-4H7V9h4V5h2v4h4v2z"}),"AddComment");t.Z=s},59344:function(e,t,r){var n=r(64836);t.Z=void 0;var a=n(r(45045)),o=r(46417),s=(0,a.default)((0,o.jsx)("path",{d:"M19 7v2.99s-1.99.01-2 0V7h-3s.01-1.99 0-2h3V2h2v3h3v2h-3zm-3 4V8h-3V5H5c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-8h-3zM5 19l3-4 2 3 3-4 4 5H5z"}),"AddPhotoAlternate");t.Z=s},54572:function(e,t,r){var n=r(64836);t.Z=void 0;var a=n(r(45045)),o=r(46417),s=(0,a.default)((0,o.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"}),"Image");t.Z=s},50315:function(e,t,r){var n=r(64836);t.Z=void 0;var a=n(r(45045)),o=r(46417),s=(0,a.default)((0,o.jsx)("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Message");t.Z=s},82495:function(e,t,r){var n=r(64836);t.Z=void 0;var a=n(r(45045)),o=r(46417),s=(0,a.default)((0,o.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");t.Z=s}}]);