"use strict";(self.webpackChunkfoxconnect_app=self.webpackChunkfoxconnect_app||[]).push([[986],{81986:function(e,t,n){n.r(t),n.d(t,{default:function(){return ne}});var r,s=n(29439),a=n(53996),i=n(23132),c=n(47313),o=n(22408),l=n(97890),d=n(69649),u=n(88564),x=n(38768),p=n(46417),m=function(e){return(0,p.jsx)("div",{className:"flex flex-col flex-auto",children:(0,p.jsx)(l.j3,{})})},f=n(61113),h=n(51938),g=n(24193),Z=n(5227),j=n(56993),v=n(4942),y=n(74165),k=n(15861),b=n(80827),w=n(35323),N=n(31881),I=n.n(N),A=n(43850),P=n(28520),S=n(42939),z=(0,b.hg)("tasksApp/tasks/getTasks",function(){var e=(0,k.Z)((0,y.Z)().mark((function e(t,n){var r,s,a,i,c,o;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.dispatch,s=n.getState,e.prev=1,e.next=4,S.Z.getAccessToken();case 4:if(a=e.sent){e.next=7;break}return e.abrupt("return",null);case 7:return i=s().organization.organizationId,e.next=10,I().get("/api/".concat(i,"/tasks/list"),{params:t,headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)}});case 10:return c=e.sent,e.next=13,c.data;case 13:return o=e.sent,e.abrupt("return",o);case 17:return e.prev=17,e.t0=e.catch(1),r((0,A.PV)({message:e.t0.message,variant:"error"})),e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t,n){return e.apply(this,arguments)}}()),T=(0,b.hg)("tasksApp/tasks/reorder",function(){var e=(0,k.Z)((0,y.Z)().mark((function e(t,n){var r,s,a,i,c,o,l,d;return(0,y.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.arr,r=t.startIndex,s=t.endIndex,a=n.dispatch,i=n.getState,e.prev=2,e.next=5,S.Z.getAccessToken();case 5:if(c=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return o=i().organization.organizationId,e.next=11,I().post("/api/".concat(o,"/tasks/reorder"),{startIndex:r,endIndex:s},{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)}});case 11:return l=e.sent,e.next=14,l.data;case 14:return d=e.sent,a((0,A.PV)({message:"List Order Saved",autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"success"})),e.abrupt("return",d);case 19:return e.prev=19,e.t0=e.catch(2),a((0,A.PV)({message:e.t0.message,variant:"error"})),e.abrupt("return",null);case 23:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t,n){return e.apply(this,arguments)}}()),C=(0,b.HF)({}),O=C.getSelectors((function(e){return e.tasksApp.tasks})),D=O.selectAll,F=(O.selectById,(0,w.P1)([D],(function(e){return e.filter((function(e){return"task"===e.type&&!e.completed})).length}))),L=(0,b.oM)({name:"tasksApp/tasks",initialState:C.getInitialState(),extraReducers:(r={},(0,v.Z)(r,T.pending,(function(e,t){var n=t.meta.arg,r=n.arr,a=n.startIndex,i=n.endIndex;C.setAll(e,function(e,t,n){var r=Array.from(e),a=r.splice(t,1),i=(0,s.Z)(a,1)[0];return r.splice(n,0,i),r}(r,a,i))})),(0,v.Z)(r,T.fulfilled,C.setAll),(0,v.Z)(r,P.xJ.fulfilled,C.upsertOne),(0,v.Z)(r,P.gI.fulfilled,C.addOne),(0,v.Z)(r,P.F6.fulfilled,(function(e,t){return C.removeOne(e,t.payload)})),(0,v.Z)(r,z.fulfilled,C.setAll),r)}),R=(L.actions.setTasksSearchText,L.reducer),B=function(e){var t=(0,o.v9)(F);return(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row item-center sm:items-start space-y-16 sm:space-y-0 p-24 sm:p-32 w-full border-b-1 flex items-center justify-between",children:[(0,p.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:space-x-12",children:[(0,p.jsx)(f.Z,{component:h.E.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-24 md:text-32 font-extrabold tracking-tight leading-none",children:"Tasks"}),(0,p.jsx)(f.Z,{component:h.E.span,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},delay:500,className:"text-14 font-medium ml-2",color:"text.secondary",children:"".concat(t," remaining tasks")})]}),(0,p.jsxs)("div",{className:"flex items-center -mx-8",children:[(0,p.jsxs)(g.Z,{className:"mx-8 whitespace-nowrap",component:Z.Z,to:"new/section",children:[(0,p.jsx)(j.Z,{size:20,children:"heroicons-outline:plus"}),(0,p.jsx)("span",{className:"mx-8",children:"Add Section"})]}),(0,p.jsxs)(g.Z,{className:"mx-8 whitespace-nowrap",variant:"contained",color:"secondary",component:Z.Z,to:"new/task",children:[(0,p.jsx)(j.Z,{size:20,children:"heroicons-outline:plus"}),(0,p.jsx)("span",{className:"mx-8",children:"Add Task"})]})]})]})},E=n(48310),H=n(702),_=n(1413),J=n(60194),V=n(83213),K=n(19536),U=n(74748),W=n(47131),M=n(89600),Y=n(83061),q=function(e){var t=e.data,n=e.index,r=(0,o.I0)();return(0,p.jsx)(H._l,{draggableId:t.id,index:n,type:"list",children:function(e,n){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(J.ZP,(0,_.Z)((0,_.Z)({className:(0,Y.Z)(n.isDragging?"shadow-lg":"shadow","px-40 py-12 group"),sx:{bgcolor:"background.paper"},button:!0,component:Z.Z,to:"/apps/tasks/".concat(t.id),ref:e.innerRef},e.draggableProps),{},{children:[(0,p.jsx)("div",(0,_.Z)((0,_.Z)({className:"md:hidden absolute flex items-center justify-center inset-y-0 left-0 w-32 cursor-move md:group-hover:flex"},e.dragHandleProps),{},{children:(0,p.jsx)(j.Z,{sx:{color:"text.disabled"},size:20,children:"heroicons-solid:menu"})})),(0,p.jsx)(U.Z,{className:"min-w-40 -ml-10 mr-8",children:(0,p.jsx)(W.Z,{sx:{color:t.completed?"secondary.main":"text.disabled"},onClick:function(e){e.preventDefault(),e.stopPropagation(),r((0,P.xJ)((0,_.Z)((0,_.Z)({},t),{},{completed:!t.completed})))},children:(0,p.jsx)(j.Z,{children:"heroicons-outline:check-circle"})})}),(0,p.jsx)(V.Z,{classes:{root:"m-0",primary:"truncate"},primary:t.title}),(0,p.jsxs)("div",{className:"flex items-center",children:[(0,p.jsxs)("div",{children:[0===t.priority&&(0,p.jsx)(j.Z,{className:"text-green icon-size-16 mx-12",children:"heroicons-outline:arrow-narrow-down"}),2===t.priority&&(0,p.jsx)(j.Z,{className:"text-red icon-size-16 mx-12",children:"heroicons-outline:arrow-narrow-up"})]}),t.dueDate&&(0,p.jsx)(f.Z,{className:"text-12 whitespace-nowrap",color:"text.secondary",children:(0,M.Z)(new Date(t.dueDate),"LLL dd")})]})]})),(0,p.jsx)(K.Z,{})]})}})},G=function(e){var t=e.data,n=e.index;return(0,p.jsx)(H._l,{draggableId:t.id,index:n,type:"list",children:function(e,n){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsxs)(J.ZP,(0,_.Z)((0,_.Z)({className:"px-40 py-12 group",sx:{bgcolor:"background.default"},button:!0,component:Z.Z,to:"/apps/tasks/".concat(t.id),ref:e.innerRef},e.draggableProps),{},{children:[(0,p.jsx)("div",(0,_.Z)((0,_.Z)({className:"md:hidden absolute flex items-center justify-center inset-y-0 left-0 w-32 cursor-move md:group-hover:flex"},e.dragHandleProps),{},{children:(0,p.jsx)(j.Z,{sx:{color:"text.disabled"},size:20,children:"heroicons-solid:menu"})})),(0,p.jsx)(V.Z,{classes:{root:"m-0",primary:"font-semibold text-16 truncate"},primary:t.title})]})),(0,p.jsx)(K.Z,{})]})}})},Q=function(e){var t=(0,o.I0)(),n=(0,o.v9)(D);if(!n)return null;if(0===n.length)return(0,p.jsx)("div",{className:"flex flex-1 items-center justify-center h-full",children:(0,p.jsx)(f.Z,{color:"text.secondary",variant:"h5",children:"There are no tasks!"})});return(0,p.jsx)(E.Z,{className:"w-full m-0 p-0",children:(0,p.jsx)(H.Z5,{onDragEnd:function(e){e.destination&&e.destination.index!==e.source.index&&t(T({arr:n,startIndex:e.source.index,endIndex:e.destination.index}))},children:(0,p.jsx)(H.bK,{droppableId:"list",type:"list",direction:"vertical",children:function(e){return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("div",{ref:e.innerRef,children:n.map((function(e,t){return"task"===e.type?(0,p.jsx)(q,{index:e.orderIndex,data:e},e.id):"section"===e.type?(0,p.jsx)(G,{index:e.orderIndex,data:e},e.id):null}))}),e.placeholder]})}})})})},X=n(9038),$=n(53706),ee=(0,X.UY)({tags:$.ZP,tasks:R,task:P.ZP}),te=(0,u.ZP)(a.Z)((function(e){return{"& .FusePageSimple-header":{backgroundColor:e.theme.palette.background.paper}}})),ne=(0,i.Z)("tasksApp",ee)((function(e){var t=(0,o.I0)(),n=(0,c.useRef)(null),r=(0,l.UO)(),a=(0,c.useState)(!1),i=(0,s.Z)(a,2),u=i[0],f=i[1],h=(0,x.Z)((function(e){return e.breakpoints.down("lg")}));return(0,d.KW)((function(){t(z()),t((0,$.NJ)())}),[t]),(0,c.useEffect)((function(){f(Boolean(r.id))}),[r]),(0,p.jsx)(te,{header:(0,p.jsx)(B,{pageLayout:n}),content:(0,p.jsx)(Q,{}),ref:n,rightSidebarContent:(0,p.jsx)(m,{}),rightSidebarOpen:u,rightSidebarOnClose:function(){return f(!1)},rightSidebarWidth:640,scroll:h?"normal":"content"})}))}}]);