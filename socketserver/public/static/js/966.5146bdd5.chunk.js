"use strict";(self.webpackChunkfoxconnect_app=self.webpackChunkfoxconnect_app||[]).push([[966],{66966:function(e,n,t){t.r(n),t.d(n,{default:function(){return _t}});var r=t(29439),a=t(23132),i=t(43850),s=t(47313),l=t(702),o=t(22408),c=t(97890),d=t(8139),u=t(69649),m=t(53996),h=t(38768),f=t(34500),x=t(11910),p=t(1413),v=t(75627),j=t(17551),Z=t(14790),b=t(1550),g=t(15103),y=t(88797),N=t(51405),w=t(24193),C=t(10368),k=t(66212),I=t(73428),S=t(31685),z=t(47131),D=t(41727),T=t(24631),P=t(3463),R=t(58970),L=t(56993),E=t(68085),M=t(46417),A={title:"",description:"",chatType:"",chatLabel:[]},F=P.Ry().shape({title:P.Z_().required("You must enter a title")}),V=[{key:"",label:"No Chat"},{key:"active",label:"Active"},{key:"resolve",label:"Resolved"}],O=function(e){var n=(0,o.I0)(),t=(0,o.v9)((function(e){return e.scrumboardApp.lists})).labelOption,a=(0,s.useState)(!1),i=(0,r.Z)(a,2),l=i[0],c=i[1],d=(0,v.cI)({mode:"onChange",defaultValues:A,resolver:(0,Z.X)(F)}),u=d.control,m=d.formState,h=d.handleSubmit,f=d.reset,x=m.isValid,P=m.dirtyFields;m.errors;function O(){c(!1)}return(0,s.useEffect)((function(){l||f(A)}),[l,f]),(0,M.jsx)("div",{children:(0,M.jsx)(I.Z,{className:"w-320 mx-8 sm:mx-12 rounded-xl shadow-0",square:!0,sx:{backgroundColor:function(e){return(0,j._j)(e.palette.background.default,"light"===e.palette.mode?.03:.25)}},children:l?(0,M.jsx)(S.Z,{onClickAway:function(){},children:(0,M.jsxs)("form",{className:"flex flex-col w-full space-y-10 p-12",onSubmit:h((function(e){n((0,E.Bl)(e)),O()})),children:[(0,M.jsx)(v.Qr,{name:"title",control:u,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},n),{},{required:!0,fullWidth:!0,variant:"filled",label:"List title",autoFocus:!0,InputProps:{endAdornment:(0,M.jsx)(D.Z,{position:"end",children:(0,M.jsx)(z.Z,{onClick:O,size:"large",children:(0,M.jsx)(L.Z,{size:18,children:"heroicons-outline:x"})})})}}))}}),(0,M.jsx)(v.Qr,{name:"chatType",control:u,render:function(e){var n=e.field;return(0,M.jsxs)(b.Z,{children:[(0,M.jsx)(g.Z,{children:"Chat List"}),(0,M.jsx)(y.Z,(0,p.Z)((0,p.Z)({},n),{},{label:"Chat List",id:"chatType",variant:"filled",fullWidth:!0,children:V.map((function(e,n){return(0,M.jsx)(N.Z,{value:e.key,children:e.label},n)}))}))]})}}),(0,M.jsx)(v.Qr,{name:"chatLabel",control:u,defaultValue:[],render:function(e){var n=e.field,r=n.onChange,a=n.value;return(0,M.jsx)(C.Z,{fullWidth:!0,multiple:!0,options:t,getOptionLabel:function(e){return e.label},value:a||[],onChange:function(e,n){r(n)},filterSelectedOptions:!0,renderInput:function(e){return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},e),{},{fullWidth:!0,variant:"filled",placeholder:"",multiline:!0,label:"Chat Label"}))},renderTags:function(e,n){return e.map((function(e,t){return(0,M.jsx)(k.Z,(0,p.Z)({label:e.label},n({index:t})))}))}})}}),(0,M.jsxs)("div",{className:"flex justify-between items-center pt-12",children:[(0,M.jsx)(w.Z,{variant:"contained",color:"secondary",type:"submit",disabled:R.Z.isEmpty(P)||!x,startIcon:(0,M.jsx)(L.Z,{children:"heroicons-outline:plus"}),size:"small",children:"Add"}),(0,M.jsx)(w.Z,{variant:"contained",color:"error",onClick:O,startIcon:(0,M.jsx)(L.Z,{children:"heroicons-outline:x"}),size:"small",children:"Cancel"})]})]})}):(0,M.jsx)(w.Z,{onClick:function(e){e.stopPropagation(),c(!0)},classes:{root:"font-medium w-full rounded-lg p-24 justify-start"},startIcon:(0,M.jsx)(L.Z,{children:"heroicons-outline:plus-circle"}),sx:{color:"text.secondary"},children:"Add another list"})})})},B=t(88564),Q=t(93405),q=t(83061),W=t(86226),_={title:""},U=P.Ry().shape({title:P.Z_().required("You must enter a title")}),X=function(e){var n=(0,o.I0)(),t=(0,s.useState)(!1),a=(0,r.Z)(t,2),i=a[0],l=a[1],c=(0,v.cI)({mode:"onChange",defaultValues:_,resolver:(0,Z.X)(U)}),d=c.control,u=c.formState,m=c.handleSubmit,h=c.reset,f=u.isValid,x=u.dirtyFields;u.errors;function j(){l(!1)}return(0,s.useEffect)((function(){i||h(_)}),[i,h]),(0,M.jsx)("div",{className:"w-full",children:i?(0,M.jsx)(S.Z,{onClickAway:j,children:(0,M.jsxs)("form",{onSubmit:m((function(t){n((0,W.mS)({listId:e.listId,newData:t})).then((function(){e.onCardAdded()})),j()})),children:[(0,M.jsx)(v.Qr,{name:"title",control:d,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,{className:"mb-16",required:!0,fullWidth:!0,variant:"filled",label:"Card title",autoFocus:!0,InputProps:(0,p.Z)((0,p.Z)({},n),{},{endAdornment:(0,M.jsx)(D.Z,{position:"end",children:(0,M.jsx)(z.Z,{onClick:j,size:"large",children:(0,M.jsx)(L.Z,{size:18,children:"heroicons-outline:x"})})})})})}}),(0,M.jsx)("div",{className:"flex justify-between items-center",children:(0,M.jsx)(w.Z,{variant:"contained",color:"secondary",type:"submit",disabled:R.Z.isEmpty(x)||!f,size:"small",children:"Add"})})]})}):(0,M.jsx)(w.Z,{onClick:function(e){e.stopPropagation(),l(!0)},classes:{root:"font-medium w-full rounded-lg p-24 justify-start"},startIcon:(0,M.jsx)(L.Z,{children:"heroicons-outline:plus-circle"}),sx:{color:"text.secondary"},children:"Add another card"})})},H=t(49709),G=t(61113),Y=t(76017),K=t(25002),$=t(57597),J=t(34245),ee=t(99086),ne=t(80735),te=function(e){var n=e.id,t=(0,o.v9)((function(e){return(0,ne.mX)(e,n)}));return t?(0,M.jsx)("div",{children:(0,M.jsx)(k.Z,{className:"font-semibold text-[12px] mx-2 mb-6 rounded",label:t.title,size:"small"})},n):null},re=t(51686),ae=t(93601),ie=t(34800);function se(e){return(0,ie.Z)(1,arguments),Math.floor(function(e){return(0,ie.Z)(1,arguments),(0,ae.Z)(e).getTime()}(e)/1e3)}var le=t(89600),oe=t(68627);function ce(e){(0,ie.Z)(1,arguments);var n=(0,oe.Z)(e);return(0,ae.Z)(1e3*n)}var de=function(e){var n=e.dueDate;return n?(0,M.jsx)(k.Z,{size:"small",className:(0,q.Z)("flex items-center font-semibold text-12 mx-4",se(new Date)>n?"bg-red text-white":"bg-[#9e9e9e] text-white"),sx:{"& .MuiChip-icon":{color:"inherit"}},label:(0,le.Z)(ce(n),"MMM do yy"),icon:(0,M.jsx)(L.Z,{size:16,color:"inherit",children:"heroicons-outline:clock"})}):null},ue=function(e){var n,t=e.card,r=(n=t,R.Z.sum(n.checklists.map((function(e){return R.Z.sum(e.checkItems.map((function(e){return e.checked?1:0})))})))),a=function(e){return R.Z.sum(e.checklists.map((function(e){return e.checkItems.length})))}(t);return 0===a?null:(0,M.jsx)(k.Z,{size:"small",className:(0,q.Z)("flex items-center font-semibold text-12 mx-4",r===a?"bg-green text-white":"bg-grey-500 text-white"),sx:{"& .MuiChip-icon":{color:"inherit"}},icon:(0,M.jsx)(L.Z,{size:16,color:"inherit",children:"heroicons-outline:check"}),label:"".concat(r,"/").concat(a)})},me=t(74165),he=t(15861),fe=t(60194),xe=t(9506),pe=(0,B.ZP)(fe.ZP)((function(e){var n=e.theme;e.active;return{"&.active":{backgroundColor:n.palette.background.default},"&.label":{borderRadius:6}}})),ve=function(e){(0,h.Z)((function(e){return e.breakpoints.down("lg")}));var n=e.chat,t=((0,c.UO)(),(0,s.useState)("")),a=(0,r.Z)(t,2),i=a[0],l=a[1],o=(0,s.useState)(""),d=(0,r.Z)(o,2),u=(d[0],d[1]),m=(0,s.useState)(""),f=(0,r.Z)(m,2),x=f[0],p=f[1],v=(0,s.useState)([]),j=(0,r.Z)(v,2),Z=j[0],b=j[1],g=(0,s.useState)([]),y=(0,r.Z)(g,2),N=y[0],w=y[1];(0,s.useMemo)((function(){if(e&&e.chat){var n=e.chat.lastMessage;if(n&&n.data&&n.type)if("text"===n.type){var t=JSON.parse(n.data).text;l(t),t.length>24?l("".concat(t.substring(0,21),"...")):l(t.substring(0,24))}else"sticker"===n.type?l("Sticker"):"image"===n.type?l("Image"):l("Unknown type");if(e.chat.channel&&("line"===e.chat.channel.channel&&e.chat.channel.line&&u(e.chat.channel.line.name),"facebook"===e.chat.channel.channel&&e.chat.channel.facebook&&u(e.chat.channel.facebook.name)),e.chat.customer.firstname&&e.chat.customer.lastname?"".concat(e.chat.customer.firstname," ").concat(e.chat.customer.lastname).length>0?p("".concat("".concat(e.chat.customer.firstname," ").concat(e.chat.customer.lastname).substring(0,7),"...")):p("".concat(e.chat.customer.firstname," ").concat(e.chat.customer.lastname).substring(0,10)):e.chat.customer.display.length>10?p("".concat(e.chat.customer.display.substring(0,7),"...")):p(e.chat.customer.display.substring(0,10)),e.chat.customer&&e.chat.customer.customerLabel&&e.chat.customer.customerLabel.length>0){var r=0,a=[],i=[];e.chat.customer.customerLabel.forEach(function(){var n=(0,he.Z)((0,me.Z)().mark((function n(t,s){return(0,me.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(r+=t.label.length<10?t.label.length:9)<20&&a.length<2?a.push(t):i.push(t),s+1===e.chat.customer.customerLabel.length&&(b(a),w(i));case 3:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}else b([]),w([])}}),[e]);var C=(0,s.useState)(null),I=(0,r.Z)(C,2),S=I[0],z=I[1],D=Boolean(S),T=function(){z(null)};return(0,M.jsx)(pe,{className:"px-20 pt-12 pb-0 min-h-96 w-full",children:(0,M.jsxs)("div",{className:"flex items-center flex-row w-full",children:[(0,M.jsx)($.f4,{contact:n.customer,channel:n.channel}),(0,M.jsxs)("div",{className:"flex flex-col grow pl-10",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)(G.Z,{variant:"subtitle1",className:"truncate font-medium max-w-120 text-14",color:"text.primary",children:x}),(0,M.jsx)(G.Z,{variant:"body1",className:"whitespace-nowrap font-medium text-12",color:"text.secondary",children:e.chat.lastMessage.createdAt&&(0,le.Z)(new Date(e.chat.lastMessage.createdAt),"dd/MM/yy")})]}),(0,M.jsxs)("div",{className:"flex justify-between",children:[(0,M.jsx)(G.Z,{variant:"body2",className:"text-desc",children:i}),(0,M.jsxs)("div",{className:"items-center flex flex-row space-x-6",children:[Boolean(e.chat.newMention)&&(0,M.jsx)(xe.Z,{sx:{backgroundColor:"red",color:"secondary.contrastText"},className:"flex items-center justify-center min-w-[1.8rem] h-[1.8rem] rounded-full font-medium text-10 text-center",children:e.chat.newMention&&"@"}),Boolean(e.chat.unread)&&(0,M.jsx)(xe.Z,{sx:{backgroundColor:"secondary.main",color:"secondary.contrastText"},className:"flex items-center justify-center min-w-[1.8rem] h-[1.8rem] rounded-full font-medium text-10 text-center",children:e.chat.unread})]})]}),(0,M.jsxs)("div",{className:"flex items-center flex-row w-full",children:[Z&&Z.length>0&&Z.map((function(e,n){return(0,M.jsx)(k.Z,{size:"small",variant:"outlined",className:"w-min m-1 truncate rounded w-42 border-[#8180E7] text-[#8180E7] text-[12px]",label:e.label},n)})),N&&N.length>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k.Z,{id:"morechatcardlabel-button",size:"small",className:"w-min my-1 rounded text-20 text-white bg-[#8180E7]",label:"+","aria-controls":D?"morechatcardlabel-menu":void 0,"aria-haspopup":"true","aria-expanded":D?"true":void 0,onMouseEnter:function(e){z(e.currentTarget)}}),(0,M.jsx)(K.ZP,{id:"popover-id",anchorOrigin:{vertical:"bottom",horizontal:"left"},open:D,anchorEl:S,onClose:T,PaperProps:{onMouseLeave:T},classes:{paper:"flex flex-col space-y-6 p-8"},children:N.map((function(e,n){return(0,M.jsx)(k.Z,{size:"small",variant:"outlined",className:"w-min truncate rounded text-[12px]",label:e.label,sx:{borderColor:"#8180E7",color:"#8180E7"}},n)}))})]})]})]})]})})},je=function(e){var n=e.id,t=(0,o.v9)((function(e){return(0,ne.mX)(e,n)}));return t?(0,M.jsx)(N.Z,{size:"small",variant:"outlined",className:"w-min truncate rounded my-1 text-black bg-gray-200 text-[12px]",label:t.label,children:t.title},t.id):null},Ze=(0,B.ZP)(I.Z)((function(e){var n=e.theme;return{transitionProperty:"box-shadow",transitionDuration:n.transitions.duration.short,transitionTimingFunction:n.transitions.easing.easeInOut}})),be=function(e){var n=e.cardId,t=e.index,a=(0,o.I0)(),i=(0,o.v9)(x.ZO),c=(0,o.v9)((function(e){return(0,W.Qs)(e,n)})),d=(0,o.v9)((function(e){return(0,ee.j0)(e,null===c||void 0===c?void 0:c.chatId)})),u=((0,o.v9)(ne.ir),(0,o.v9)(re.ad)),m=(0,s.useState)(0),h=(0,r.Z)(m,2),f=h[0],v=h[1],j=(0,s.useState)(null),Z=(0,r.Z)(j,2),b=Z[0],g=Z[1],y=(0,s.useState)([]),N=(0,r.Z)(y,2),w=N[0],C=N[1],I=(0,s.useState)([]),S=(0,r.Z)(I,2),z=S[0],D=S[1],T=(0,s.useState)(null),P=(0,r.Z)(T,2),E=P[0],A=P[1],F=function(e){A(e.currentTarget)},V=function(){A(null)},O=Boolean(E);return(0,s.useMemo)((function(){if(c)if(v((t=c,R.Z.sum(t.activities.map((function(e){return"comment"===e.type?1:0}))))),g(R.Z.find(c.attachments,{id:c.attachmentCoverId})),c.labels.length>0){var e=[],n=[];console.log(c),c.labels.forEach((function(t,r){r<3?e.push(t):n.push(t)})),D(e),C(n)}else D([]),C([]);var t}),[c]),c?(0,M.jsx)(l._l,{draggableId:n,index:t,type:"card",children:function(e,n){return(0,M.jsx)("div",(0,p.Z)((0,p.Z)((0,p.Z)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:(0,M.jsxs)(Ze,{className:(0,q.Z)(n.isDragging?"shadow-lg":"shadow","w-full mb-12 rounded-lg cursor-pointer"),onClick:function(e){return function(e,n){e.preventDefault(),a((0,J.V)(n))}(e,c)},children:[i.settings.cardCoverImages&&b&&(0,M.jsx)("img",{className:"block",src:b.src,alt:"card cover"}),d&&(0,M.jsx)("div",{className:"flex flex-wrap -mx-4",children:(0,M.jsx)(ve,{chat:d})}),(0,M.jsxs)("div",{className:(0,q.Z)("px-16",c.title||c.description?"pt-16":"pt-0"),id:c.id,children:[(0,M.jsx)(G.Z,{className:"font-600 text-16",children:null===c||void 0===c?void 0:c.title}),(0,M.jsx)(G.Z,{className:"my-2 font-400 text-14 text-desc line-clamp-2",children:null===c||void 0===c?void 0:c.description}),(c.dueDate||c.checklists.length>0)&&(0,M.jsxs)("div",{className:"flex items-center -mx-4 mb-5",children:[(0,M.jsx)(de,{dueDate:c.dueDate}),(0,M.jsx)(ue,{card:c})]}),(0,M.jsxs)("div",{className:"flex flex-wrap -mx-4",children:[z.length>0&&z.map((function(e){return(0,M.jsx)(te,{id:e},e)})),w&&w.length>0&&(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(k.Z,{id:"morecardlabel-button",size:"small",className:"w-min my-1 rounded text-20 text-white bg-gray",label:"+","aria-describedby":O?"morecardlabel-popover":void 0,onMouseEnter:F}),(0,M.jsx)(K.ZP,{id:"morecardlabel-popover",anchorOrigin:{vertical:"bottom",horizontal:"left"},open:O,anchorEl:E,onClose:V,PaperProps:{onMouseLeave:V},classes:{paper:"flex flex-col space-y-6 p-8"},children:w.map((function(e){return(0,M.jsx)(je,{id:e},e)}))})]})]})]}),(0,M.jsxs)("div",{className:"flex justify-between h-48 px-16",children:[(0,M.jsxs)("div",{className:"flex items-center space-x-4",children:[c.attachments&&(0,M.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,M.jsx)(L.Z,{size:16,color:"action",children:"heroicons-outline:paper-clip"}),(0,M.jsx)(G.Z,{className:"",color:"text.secondary",children:c.attachments.length})]}),f>0&&(0,M.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,M.jsx)(L.Z,{size:16,color:"action",children:"heroicons-outline:chat"}),(0,M.jsx)(G.Z,{className:"",color:"text.secondary",children:f})]})]}),(0,M.jsx)("div",{className:"flex items-center justify-end space-x-12",children:c.memberIds.length>0&&(0,M.jsx)("div",{className:"flex justify-start",children:(0,M.jsx)(Y.Z,{max:3,classes:{avatar:"w-24 h-24 text-12"},children:c.memberIds.map((function(e){var n=R.Z.find(u,{id:e});return n?(0,M.jsx)(H.Z,{title:n.display,children:(0,M.jsx)($.i6,{contact:n},t)},e):null}))})})})]})]})}))}}):null},ge=t(74748),ye=t(83213),Ne=t(82047),we=t(15743),Ce=P.Ry().shape({title:P.Z_().required("You must enter a title")}),ke=[{key:"",label:"No Chat"},{key:"active",label:"Active"},{key:"resolve",label:"Resolved"}],Ie=function(e){var n=e.list,t=e.cardIds,a=(0,o.I0)(),i=(0,o.v9)((function(e){return e.scrumboardApp.lists})).labelOption,l=(0,s.useState)(null),c=(0,r.Z)(l,2),d=c[0],u=c[1],m=(0,s.useState)(!1),h=(0,r.Z)(m,2),f=h[0],x=h[1],I=(0,v.cI)({mode:"onChange",defaultValues:{title:n.title||"",description:n.description||"",chatType:n.chatType||"",chatLabel:n.chatLabel||[]},resolver:(0,Z.X)(Ce)}),D=I.control,P=I.formState,R=I.handleSubmit,A=I.reset;(0,I.watch)("chatLabel"),P.isValid,P.dirtyFields,P.errors;function F(e){e.stopPropagation(),x(!0)}function V(){x(!1)}return(0,s.useEffect)((function(){f||A({title:n.title,description:n.description,chatType:n.chatType,chatLabel:n.chatLabel})}),[f,A,n.title,n.description,n.chatType,n.chatLabel]),(0,s.useEffect)((function(){f&&d&&u(null)}),[d,f]),(0,M.jsx)("div",(0,p.Z)((0,p.Z)({},e.handleProps),{},{children:(0,M.jsxs)("div",{className:"flex items-start justify-between h-min-48 sm:h-min-56 px-16 py-12",children:[(0,M.jsx)("div",{className:"flex items-center min-w-0 mr-10",children:f?(0,M.jsx)(S.Z,{onClickAway:function(){},children:(0,M.jsxs)("form",{className:"flex flex-col w-full space-y-10",onSubmit:R((function(e){a((0,E.s9)({id:n.id,newData:e})),V()})),children:[(0,M.jsx)(v.Qr,{name:"title",control:D,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},n),{},{id:"title",label:"Title",variant:"outlined",margin:"none",autoFocus:!0,size:"small"}))}}),(0,M.jsx)(v.Qr,{name:"chatType",control:D,render:function(e){var n=e.field;return(0,M.jsxs)(b.Z,{children:[(0,M.jsx)(g.Z,{size:"small",children:"Chat List"}),(0,M.jsx)(y.Z,(0,p.Z)((0,p.Z)({},n),{},{label:"Chat List",id:"chatType",size:"small",variant:"outlined",fullWidth:!0,className:"flex items-center",children:ke.map((function(e,n){return(0,M.jsx)(N.Z,{value:e.key,children:e.label},n)}))}))]})}}),(0,M.jsx)(v.Qr,{name:"chatLabel",control:D,defaultValue:[],render:function(e){var n=e.field,t=n.onChange,r=n.value;return(0,M.jsx)(C.Z,{fullWidth:!0,multiple:!0,options:i,getOptionLabel:function(e){return e.label},value:r||[],onChange:function(e,n){t(n)},filterSelectedOptions:!0,renderInput:function(e){return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},e),{},{label:"Chat Label",variant:"outlined",placeholder:"",multiline:!0,size:"small",fullWidth:!0}))},renderTags:function(e,n){return e.map((function(e,t){return(0,M.jsx)(k.Z,(0,p.Z)({label:e.label},n({index:t})))}))}})}}),(0,M.jsxs)("div",{className:"flex justify-around items-center py-12",children:[(0,M.jsx)(w.Z,{variant:"contained",color:"secondary",type:"submit",size:"small",startIcon:(0,M.jsx)(L.Z,{children:"heroicons-outline:check"}),children:"Update"}),(0,M.jsx)(w.Z,{variant:"contained",color:"error",onClick:V,size:"small",startIcon:(0,M.jsx)(L.Z,{children:"heroicons-outline:x"}),children:"Cancel"})]})]})}):(0,M.jsx)(G.Z,{className:"text-[16px] font-600 cursor-pointer",onClick:F,children:n.title})}),(0,M.jsxs)("div",{className:"flex items-center",children:[(0,M.jsx)(we.Z,{className:"flex items-center justify-center min-w-24 h-24 mx-4 text-sm font-semibold leading-24 rounded-full",sx:{backgroundColor:function(e){return(0,j._j)(e.palette.background.default,"light"===e.palette.mode?.1:.3)},color:"text.secondary"},children:t.length}),(0,M.jsx)(z.Z,{"aria-owns":d?"actions-menu":null,"aria-haspopup":"true",onClick:function(e){u(e.currentTarget)},variant:"outlined",size:"small",children:(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:dots-vertical"})}),(0,M.jsxs)(Ne.Z,{id:"actions-menu",anchorEl:d,open:Boolean(d),onClose:function(){u(null)},children:[(0,M.jsxs)(N.Z,{onClick:function(){a((0,E.J_)(n.id))},children:[(0,M.jsx)(ge.Z,{className:"min-w-40",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:trash"})}),(0,M.jsx)(ye.Z,{primary:"Remove List"})]}),(0,M.jsxs)(N.Z,{onClick:F,children:[(0,M.jsx)(ge.Z,{className:"min-w-40",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:pencil"})}),(0,M.jsx)(ye.Z,{primary:"Edit List"})]})]})]})]})}))},Se=t(44857),ze=(0,B.ZP)(I.Z)((function(e){var n=e.theme;return{transitionProperty:"box-shadow",transitionDuration:n.transitions.duration.short,transitionTimingFunction:n.transitions.easing.easeInOut}})),De=(0,B.ZP)(fe.ZP)((function(e){var n=e.theme;e.active;return{"&.active":{backgroundColor:n.palette.background.default},"&.label":{borderRadius:6}}})),Te=function(e){var n=e.cardId,t=e.index,a=(0,o.I0)(),i=(0,o.v9)(x.ZO),c=(0,o.v9)((function(e){return(0,W.Qs)(e,n)})),d=(0,o.v9)((function(e){return(0,ee.j0)(e,null===c||void 0===c?void 0:c.chatId)})),u=(0,s.useState)(""),m=(0,r.Z)(u,2),h=(m[0],m[1]),f=(0,s.useState)(""),v=(0,r.Z)(f,2),j=v[0],Z=v[1],b=(0,s.useState)(""),g=(0,r.Z)(b,2),y=g[0],N=g[1],w=((0,o.v9)(ne.ir),(0,s.useState)(0)),C=(0,r.Z)(w,2),k=C[0],I=C[1],S=(0,s.useState)(null),z=(0,r.Z)(S,2),D=z[0],T=z[1],P=(0,s.useState)(null),E=(0,r.Z)(P,2),A=E[0];E[1],Boolean(A);return(0,s.useMemo)((function(){var e;if(c&&(I((e=c,R.Z.sum(e.activities.map((function(e){return"comment"===e.type?1:0}))))),T(R.Z.find(c.attachments,{id:c.attachmentCoverId}))),d){var n=d.lastMessage;if(n&&n.data&&n.type)if("text"===n.type){var t=JSON.parse(n.data).text;Z(t),t.length>30?Z("".concat(t.substring(0,30),"...")):Z(t.substring(0,30))}else"sticker"===n.type?Z("Sticker"):"image"===n.type?Z("Image"):Z("Unknown type");d.channel&&("line"===d.channel.channel&&d.channel.line&&h(d.channel.line.name),"facebook"===d.channel.channel&&d.channel.facebook&&h(d.channel.facebook.name)),d.customer.firstname&&d.customer.lastname?"".concat(d.customer.firstname," ").concat(d.customer.lastname)>10?N("".concat("".concat(d.customer.firstname," ").concat(d.customer.lastname).substring(0,7),"...")):N("".concat(d.customer.firstname," ").concat(d.customer.lastname).substring(0,10)):d.customer.display.length>10?N("".concat(d.customer.display.substring(0,7),"...")):N(d.customer.display.substring(0,10))}}),[c,d]),c?(0,M.jsx)(l._l,{draggableId:n,index:t,type:"card",children:function(e,n){return(0,M.jsx)("div",(0,p.Z)((0,p.Z)((0,p.Z)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:(0,M.jsx)(ze,{className:(0,q.Z)(n.isDragging?"shadow-lg":"shadow","w-full mb-8 rounded-lg cursor-pointer"),onClick:function(e){return function(e,n){e.preventDefault(),a((0,J.V)(n))}(e,c)},children:d?(0,M.jsx)("div",{className:"flex flex-wrap -mx-4",children:(0,M.jsx)(De,{className:"flex items-center px-20 py-5 min-h-92 w-full",children:(0,M.jsx)("div",{className:"flex items-center flex-col w-full",children:(0,M.jsxs)("div",{className:"flex items-center flex-row w-full space-x-10",children:[(0,M.jsx)($.f4,{contact:d.customer,channel:d.channel}),(0,M.jsxs)("div",{className:"flex flex-col grow",children:[(0,M.jsxs)("div",{className:"flex justify-between items-center",children:[(0,M.jsx)(G.Z,{variant:"subtitle1",className:"truncate font-medium max-w-120 text-14",color:"text.primary",children:y}),(0,M.jsx)(G.Z,{variant:"body1",className:"whitespace-nowrap font-medium text-12",color:"text.secondary",children:d.lastMessage.createdAt&&(0,le.Z)(new Date(d.lastMessage.createdAt),"dd/MM/yy")})]}),(0,M.jsx)("div",{className:"flex justify-items-start",children:(0,M.jsx)(G.Z,{variant:"body2",className:"text-desc",children:j})}),(0,M.jsxs)("div",{className:"flex justify-between space-x-4",children:[(0,M.jsxs)("div",{className:"flex justify-items-start",children:[c.attachments&&(0,M.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,M.jsx)(L.Z,{size:16,color:"action",children:"heroicons-outline:paper-clip"}),(0,M.jsx)(G.Z,{className:"",color:"text.secondary",children:c.attachments.length})]}),k>0&&(0,M.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,M.jsx)(L.Z,{size:16,color:"action",children:"heroicons-outline:chat"}),(0,M.jsx)(G.Z,{className:"",color:"text.secondary",children:k})]})]}),(0,M.jsx)("div",{className:"items-center flex flex-row space-x-6",children:Boolean(d.newMention)&&(0,M.jsx)(xe.Z,{sx:{backgroundColor:"red",color:"secondary.contrastText"},className:"flex items-center justify-center min-w-18 h-18 rounded-full font-medium text-10 text-center",children:d.newMention&&"@"})})]})]})]})})})}):(0,M.jsx)("div",{className:"flex flex-wrap -mx-4",children:(0,M.jsx)("div",{className:"flex items-center px-20 py-5 min-h-92 w-full",children:(0,M.jsx)("div",{className:"flex items-center flex-col w-full",children:(0,M.jsxs)("div",{className:(0,q.Z)("flex items-center flex-row w-full",i.settings.cardCoverImages&&D?"space-x-10":null),children:[(0,M.jsx)(Se.Z,{className:"",children:i.settings.cardCoverImages&&D?(0,M.jsx)("img",{className:"w-[48px] h-[48px] rounded-2",src:D.src,alt:"card cover"}):null}),(0,M.jsxs)("div",{className:"flex flex-col grow w-5/6",children:[(0,M.jsx)("div",{className:"flex justify-items-start",children:(0,M.jsx)(G.Z,{variant:"subtitle1",className:"truncate font-600 text-16",color:"text.primary",children:null===c||void 0===c?void 0:c.title})}),(0,M.jsx)("div",{className:"flex justify-items-center",children:(0,M.jsx)(G.Z,{variant:"body2",className:"truncate my-2 font-400 text-14 text-desc",children:null===c||void 0===c?void 0:c.description})}),(0,M.jsxs)("div",{className:"flex justify-items-start space-x-4",children:[c.attachments&&(0,M.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,M.jsx)(L.Z,{size:16,color:"action",children:"heroicons-outline:paper-clip"}),(0,M.jsx)(G.Z,{className:"",color:"text.secondary",children:c.attachments.length})]}),k>0&&(0,M.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,M.jsx)(L.Z,{size:16,color:"action",children:"heroicons-outline:chat"}),(0,M.jsx)(G.Z,{className:"",color:"text.secondary",children:k})]})]})]})]})})})})})}))}}):null},Pe=(0,B.ZP)(I.Z)((function(e){var n=e.theme;return{transitionProperty:"box-shadow",transitionDuration:n.transitions.duration.short,transitionTimingFunction:n.transitions.easing.easeInOut}})),Re=function(e){var n=e.listId,t=e.cardIds,r=(0,s.useRef)(null),a=(0,o.v9)((function(e){return(0,E.Q)(e,n)})),i=(0,o.v9)((function(e){return e.scrumboardApp.boards})).isCompactView;function c(){r.current.scrollTop=r.current.scrollHeight}return a?(0,M.jsx)(l._l,{draggableId:n,index:e.index,type:"list",children:function(e,s){return(0,M.jsx)("div",(0,p.Z)((0,p.Z)({ref:e.innerRef},e.draggableProps),{},{children:(0,M.jsxs)(Pe,{sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,j.$n)(e.palette.background.default,.4):(0,j.$n)(e.palette.background.default,.02)}},className:(0,q.Z)(s.isDragging?"shadow-lg":"shadow-0","w-[80vw] sm:w-320 mx-8 max-h-full flex flex-col rounded-xl border"),square:!0,children:[(0,M.jsx)(Ie,{list:a,cardIds:t,className:"border-b-1",handleProps:e.dragHandleProps}),(0,M.jsx)(Q.Z,{className:"flex flex-col flex-auto h-full min-h-0 w-full p-0 overflow-auto",ref:r,children:(0,M.jsx)(l.bK,{droppableId:n,type:"card",direction:"vertical",children:function(e){return(0,M.jsxs)("div",{ref:e.innerRef,className:"flex flex-col w-full h-full px-12 min-h-1",children:[t.map((function(e,n){return i?(0,M.jsx)(be,{cardId:e,index:n,list:a},e):(0,M.jsx)(Te,{cardId:e,index:n,list:a},e)})),e.placeholder]})}})}),(0,M.jsx)("div",{className:"p-12",children:(0,M.jsx)(X,{listId:n,onCardAdded:c})})]})}))}}):null},Le=t(94469),Ee=t(93433),Me=t(73564),Ae=t(63585),Fe=t(96467),Ve=t(48310),Oe=t(58631),Be=t(9619),Qe=t(64385),qe=t(63445),We=function(e){var n=(0,o.v9)((function(n){return(0,re.Tj)(n,e.item.idMember)}));if(!n)return null;switch(e.item.type){case"comment":return(0,M.jsxs)(fe.ZP,{dense:!0,className:"px-0",children:[(0,M.jsx)($.i6,{className:"!w-32 !h-32",contact:n}),(0,M.jsxs)(xe.Z,{className:"flex flex-col mx-16 p-12",sx:{borderRadius:"5px 20px 20px 5px",border:function(e){return"1px solid ".concat(e.palette.divider)}},children:[(0,M.jsxs)("div",{className:"flex items-center",children:[(0,M.jsx)(G.Z,{children:n.name}),(0,M.jsx)(G.Z,{className:"mx-8 text-12",color:"text.secondary",children:(0,Be.Z)(ce(e.item.time),{addSuffix:!1})})]}),(0,M.jsx)(Qe.Z,{componentDecorator:function(e,n,t){return(0,M.jsx)("a",{target:"blank",href:e,children:n},t)},children:(0,M.jsx)("div",{dangerouslySetInnerHTML:{__html:qe.Z.formatMentionToText(e.item.message)}})})]})]});case"attachment":return(0,M.jsxs)(fe.ZP,{dense:!0,className:"px-0",children:[(0,M.jsx)(Ae.Z,{alt:n.name,src:n.avatar,className:"w-32 h-32"}),(0,M.jsxs)(xe.Z,{className:"flex flex-col mx-16 p-12",sx:{borderRadius:"5px 20px 20px 5px",border:function(e){return"1px solid ".concat(e.palette.divider)}},children:[(0,M.jsxs)("div",{className:"flex items-center",children:[(0,M.jsx)(G.Z,{children:n.name}),(0,M.jsx)(G.Z,{className:"mx-8 text-12",color:"text.secondary",children:(0,Be.Z)(ce(e.item.time),{addSuffix:!1})})]}),(0,M.jsx)(Qe.Z,{className:"flex items-center justify-center",children:(0,M.jsx)(G.Z,{children:"Add new attachment"})})]})]});default:return null}},_e=t(82295),Ue=t(10387),Xe=function(e){var n=e.src,t=(0,s.useState)(!1),a=(0,r.Z)(t,2),i=a[0],l=a[1];return n?(0,M.jsxs)("div",{className:"block",children:[(0,M.jsx)("img",{src:n,alt:"attachment",className:"cursor-pointer",onClick:function(){return l(!0)},"aria-hidden":"true"}),(0,M.jsx)(Ue.Z,{open:i,onClose:function(){return l(!1)},className:"flex w-screen h-screen",children:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(L.Z,{className:"z-20 absolute right-20 bg-grey-800 hover:bg-black rounded-full cursor-pointer text-white text-48",size:40,onClick:function(){return l(!1)},children:"heroicons-outline:x"}),(0,M.jsx)("img",{src:n,alt:"attachment",className:"max-h-[90vh] relative modal-position rounded-8"})]})})]}):null},He=function(e){var n=e.src,t=e.fileExt;return n?(0,M.jsxs)("div",{className:"block",children:["pdf"===t&&(0,M.jsx)("a",{href:n,target:"_blank",rel:"noreferrer",children:(0,M.jsx)(L.Z,{size:100,color:"action",className:"flex flex-col",children:"heroicons-outline:document-text"})}),("doc"===t||"docx"===t)&&(0,M.jsx)("a",{href:"http://docs.google.com/gview?url=".concat(n,"&embedded=true"),target:"_blank",rel:"noreferrer",className:"cursor-pointer",children:(0,M.jsx)(L.Z,{size:100,color:"action",className:"flex flex-col",children:"heroicons-outline:document-text"})})]}):null},Ge=t(20510);function Ye(e){var n=new Date(1e3*e),t=n.getUTCHours(),r=n.getUTCMinutes(),a=Ke(n.getUTCSeconds());return t?"".concat(t,":").concat(Ke(r),":").concat(a):"".concat(r,":").concat(a)}function Ke(e){return"0".concat(e).slice(-2)}var $e=function(e){var n=e.className,t=e.seconds;return(0,M.jsx)("time",{dateTime:"P".concat(Math.round(t),"S"),className:n,children:Ye(t)})},Je=function(e){var n=e.open,t=e.onClose,a=e.src,i=(0,s.useRef)(),l=(0,s.useState)(),o=(0,r.Z)(l,2),c=o[0],d=o[1],u=(0,s.useState)(),m=(0,r.Z)(u,2),h=m[0],f=m[1],x=(0,s.useState)(0),p=(0,r.Z)(x,2),v=p[0],j=p[1],Z=(0,s.useState)(),b=(0,r.Z)(Z,2),g=b[0],y=b[1],N=(0,s.useState)(),w=(0,r.Z)(N,2),C=(w[0],w[1]),k=(0,s.useState)(.5),I=(0,r.Z)(k,2),S=I[0],z=I[1],D=(0,s.useState)(),T=(0,r.Z)(D,2),P=T[0],R=T[1],E=function(){d(!0)};return a?(0,M.jsx)(Ue.Z,{open:n,onClose:t,className:"flex w-screen h-screen",children:(0,M.jsxs)("div",{className:"w-full h-[calc(100vh-64px)] relative  modal-position",children:[(0,M.jsx)(L.Z,{className:"z-20 absolute right-20 bg-grey-800 hover:bg-black rounded-full cursor-pointer text-white",size:40,color:"inherit",onClick:t,children:"heroicons-outline:x"}),(0,M.jsx)(Ge.Z,{ref:i,url:a,muted:P,playing:c,volume:S,onPlay:E,onDuration:function(e){f(e)},onSeek:function(e){return console.log("onSeek",e)},onProgress:function(e){console.log("onProgress",e),g||j(e.played)},onPause:function(){d(!1)},onReady:function(){return console.log("onReady")},width:"100%",height:"100%",className:"rounded-8"}),(0,M.jsx)(L.Z,{className:(0,q.Z)("z-20 playIcon absolute  hover:bg-black rounded-full cursor-pointer text-white",c?"invisible":"visible"),size:40,color:"inherit",onClick:E,children:"heroicons-outline:play"}),(0,M.jsxs)("div",{className:"absolute flex flex-col w-3/5 h-48 max-h-60 bottom-10 items-center left-1/2 -translate-x-1/2",children:[(0,M.jsx)("div",{className:"flex w-full",children:(0,M.jsx)("input",{type:"range",min:0,max:1,step:"any",value:v,onMouseDown:function(e){y(!0)},onChange:function(e){j(parseFloat(e.target.value))},onMouseUp:function(e){y(!1),C(parseFloat(e.target.value))},className:"flex w-full"})}),(0,M.jsxs)("div",{className:"flex flex-1 w-full justify-between items-center pb-5",children:[(0,M.jsxs)("div",{className:"flex items-center gap-20",children:[(0,M.jsx)(L.Z,{size:30,color:"inherit",onClick:function(){d(!c)},className:" hover:bg-black rounded-full cursor-pointer text-white",children:c?"material-twotone:pause":"material-twotone:play_arrow"}),(0,M.jsx)($e,{seconds:h*v,className:"gap-20 text-white"}),(0,M.jsx)($e,{seconds:h,className:"gap-20 text-white"})]}),(0,M.jsxs)("div",{className:"flex items-center justify-center gap-20",children:[(0,M.jsx)("input",{type:"range",min:0,max:1,step:"any",value:S,onChange:function(e){z(parseFloat(e.target.value))}}),(0,M.jsx)(L.Z,{size:30,color:"inherit",onClick:function(){R(!P)},className:" hover:bg-black rounded-full cursor-pointer text-white",children:P?"heroicons-outline:volume-off":"heroicons-outline:volume-up"}),(0,M.jsx)(L.Z,{size:30,color:"inherit",onClick:t,className:"hover:bg-black rounded-full cursor-pointer text-white",children:"material-twotone:close_fullscreen"})]})]})]})]})}):null},en=function(e){var n=e.src,t=(0,s.useState)(!1),a=(0,r.Z)(t,2),i=a[0],l=a[1],o=(0,s.useRef)();return n?(0,M.jsxs)("div",{className:"w-full relative",children:[(0,M.jsx)(Ge.Z,{ref:o,url:n,width:"100%",height:"100%",onClick:function(){return l(!0)},className:"cursor-pointer"}),(0,M.jsx)(Je,{open:i,onClose:function(){return l(!1)},src:n})]}):null},nn=function(e){var n=(0,s.useState)(null),t=(0,r.Z)(n,2),a=t[0],i=t[1];function l(e){i(e.currentTarget)}function o(){i(null)}var c=e.item.src.substring(e.item.src.lastIndexOf(".")+1);switch(e.item.type){case"image":return(0,M.jsxs)("div",{className:"flex w-full sm:w-1/2 mb-16 px-16",children:[(0,M.jsx)("div",{className:"flex items-center justify-center min-w-128 w-128 h-128",children:(0,M.jsxs)(_e.Z,{className:"overflow-hidden shadow",children:[("jpg"===c||"gif"===c||"png"===c)&&(0,M.jsx)(Xe,{src:e.item.src}),("doc"===c||"docx"===c||"pdf"===c)&&(0,M.jsx)(He,{src:e.item.src,fileExt:c}),"mp4"===c&&(0,M.jsx)(en,{src:e.item.src})]})}),(0,M.jsxs)("div",{className:"flex flex-auto flex-col justify-center items-start min-w-0 px-16",children:[(0,M.jsxs)("div",{className:"flex items-center w-full",children:[(0,M.jsx)(G.Z,{className:"text-16 font-semibold truncate shrink",children:e.item.name}),e.card.attachmentCoverId===e.item.id&&(0,M.jsx)(L.Z,{className:"text-orange-300 mx-4",size:20,children:"heroicons-outline:start"})]}),(0,M.jsx)(G.Z,{className:"truncate w-full mb-12",color:"text.secondary",children:(0,le.Z)(ce(e.item.time),"Pp")}),(0,M.jsx)(w.Z,{"aria-owns":a?"actions-menu":null,"aria-haspopup":"true",onClick:l,variant:"outlined",size:"small",endIcon:(0,M.jsx)(L.Z,{size:16,children:"heroicons-outline:chevron-down"}),children:"Actions"}),(0,M.jsxs)(Ne.Z,{id:"actions-menu",anchorEl:a,open:Boolean(a),onClose:o,children:[e.card.attachmentCoverId!==e.item.id?(0,M.jsx)(N.Z,{onClick:function(){o(),e.makeCover(e.item.id)},children:"Make Cover"}):(0,M.jsx)(N.Z,{onClick:function(){o(),e.removeCover()},children:"Remove Cover"}),(0,M.jsx)(N.Z,{onClick:function(){o(),e.removeAttachment(e.item.id)},children:"Remove Attachment"})]})]})]},e.item.id);case"link":return(0,M.jsxs)("div",{className:"flex w-full sm:w-1/2 mb-16 px-16",children:[(0,M.jsx)(_e.Z,{className:"min-w-128 w-128 h-128 flex items-center justify-center rounded-4 overflow-hidden shadow",children:(0,M.jsx)(G.Z,{className:"font-semibold",children:"LINK"})}),(0,M.jsxs)("div",{className:"flex flex-auto flex-col justify-center items-start min-w-0 px-16",children:[(0,M.jsx)(G.Z,{className:"text-16 font-semibold truncate w-full",children:e.item.url}),(0,M.jsx)(G.Z,{className:"truncate w-full mb-12",color:"text.secondary",children:e.item.time}),(0,M.jsx)(w.Z,{"aria-owns":a?"actions-menu":null,"aria-haspopup":"true",onClick:l,variant:"outlined",size:"small",endIcon:(0,M.jsx)(L.Z,{size:16,children:"heroicons-outline:chevron-down"}),children:"Actions"}),(0,M.jsx)(Ne.Z,{id:"simple-menu",anchorEl:a,open:Boolean(a),onClose:o,children:(0,M.jsx)(N.Z,{onClick:function(){o(),e.removeAttachment(e.item.id)},children:"Remove Attachment"})})]})]},e.item.id);default:return null}},tn=t(30168),rn=t(63366),an=t(87462),sn=t(21921),ln=t(30686),on=t(91615),cn=t(19860),dn=t(77342),un=t(32298);function mn(e){return(0,un.Z)("MuiLinearProgress",e)}(0,t(77430).Z)("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);var hn,fn,xn,pn,vn,jn,Zn,bn,gn,yn,Nn,wn,Cn=["className","color","value","valueBuffer","variant"],kn=(0,ln.F4)(Zn||(Zn=hn||(hn=(0,tn.Z)(["\n  0% {\n    left: -35%;\n    right: 100%;\n  }\n\n  60% {\n    left: 100%;\n    right: -90%;\n  }\n\n  100% {\n    left: 100%;\n    right: -90%;\n  }\n"])))),In=(0,ln.F4)(bn||(bn=fn||(fn=(0,tn.Z)(["\n  0% {\n    left: -200%;\n    right: 100%;\n  }\n\n  60% {\n    left: 107%;\n    right: -8%;\n  }\n\n  100% {\n    left: 107%;\n    right: -8%;\n  }\n"])))),Sn=(0,ln.F4)(gn||(gn=xn||(xn=(0,tn.Z)(["\n  0% {\n    opacity: 1;\n    background-position: 0 -23px;\n  }\n\n  60% {\n    opacity: 0;\n    background-position: 0 -23px;\n  }\n\n  100% {\n    opacity: 1;\n    background-position: -200px -23px;\n  }\n"])))),zn=function(e,n){return"inherit"===n?"currentColor":e.vars?e.vars.palette.LinearProgress["".concat(n,"Bg")]:"light"===e.palette.mode?(0,j.$n)(e.palette[n].main,.62):(0,j._j)(e.palette[n].main,.5)},Dn=(0,B.ZP)("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:function(e,n){var t=e.ownerState;return[n.root,n["color".concat((0,on.Z)(t.color))],n[t.variant]]}})((function(e){var n=e.ownerState,t=e.theme;return(0,an.Z)({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:zn(t,n.color)},"inherit"===n.color&&"buffer"!==n.variant&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},"buffer"===n.variant&&{backgroundColor:"transparent"},"query"===n.variant&&{transform:"rotate(180deg)"})})),Tn=(0,B.ZP)("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:function(e,n){var t=e.ownerState;return[n.dashed,n["dashedColor".concat((0,on.Z)(t.color))]]}})((function(e){var n=e.ownerState,t=e.theme,r=zn(t,n.color);return(0,an.Z)({position:"absolute",marginTop:0,height:"100%",width:"100%"},"inherit"===n.color&&{opacity:.3},{backgroundImage:"radial-gradient(".concat(r," 0%, ").concat(r," 16%, transparent 42%)"),backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})}),(0,ln.iv)(yn||(yn=pn||(pn=(0,tn.Z)(["\n    animation: "," 3s infinite linear;\n  "]))),Sn)),Pn=(0,B.ZP)("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:function(e,n){var t=e.ownerState;return[n.bar,n["barColor".concat((0,on.Z)(t.color))],("indeterminate"===t.variant||"query"===t.variant)&&n.bar1Indeterminate,"determinate"===t.variant&&n.bar1Determinate,"buffer"===t.variant&&n.bar1Buffer]}})((function(e){var n=e.ownerState,t=e.theme;return(0,an.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:"inherit"===n.color?"currentColor":(t.vars||t).palette[n.color].main},"determinate"===n.variant&&{transition:"transform .".concat(4,"s linear")},"buffer"===n.variant&&{zIndex:1,transition:"transform .".concat(4,"s linear")})}),(function(e){var n=e.ownerState;return("indeterminate"===n.variant||"query"===n.variant)&&(0,ln.iv)(Nn||(Nn=vn||(vn=(0,tn.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;\n    "]))),kn)})),Rn=(0,B.ZP)("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:function(e,n){var t=e.ownerState;return[n.bar,n["barColor".concat((0,on.Z)(t.color))],("indeterminate"===t.variant||"query"===t.variant)&&n.bar2Indeterminate,"buffer"===t.variant&&n.bar2Buffer]}})((function(e){var n=e.ownerState,t=e.theme;return(0,an.Z)({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},"buffer"!==n.variant&&{backgroundColor:"inherit"===n.color?"currentColor":(t.vars||t).palette[n.color].main},"inherit"===n.color&&{opacity:.3},"buffer"===n.variant&&{backgroundColor:zn(t,n.color),transition:"transform .".concat(4,"s linear")})}),(function(e){var n=e.ownerState;return("indeterminate"===n.variant||"query"===n.variant)&&(0,ln.iv)(wn||(wn=jn||(jn=(0,tn.Z)(["\n      width: auto;\n      animation: "," 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;\n    "]))),In)})),Ln=s.forwardRef((function(e,n){var t=(0,dn.Z)({props:e,name:"MuiLinearProgress"}),r=t.className,a=t.color,i=void 0===a?"primary":a,s=t.value,l=t.valueBuffer,o=t.variant,c=void 0===o?"indeterminate":o,d=(0,rn.Z)(t,Cn),u=(0,an.Z)({},t,{color:i,variant:c}),m=function(e){var n=e.classes,t=e.variant,r=e.color,a={root:["root","color".concat((0,on.Z)(r)),t],dashed:["dashed","dashedColor".concat((0,on.Z)(r))],bar1:["bar","barColor".concat((0,on.Z)(r)),("indeterminate"===t||"query"===t)&&"bar1Indeterminate","determinate"===t&&"bar1Determinate","buffer"===t&&"bar1Buffer"],bar2:["bar","buffer"!==t&&"barColor".concat((0,on.Z)(r)),"buffer"===t&&"color".concat((0,on.Z)(r)),("indeterminate"===t||"query"===t)&&"bar2Indeterminate","buffer"===t&&"bar2Buffer"]};return(0,sn.Z)(a,mn,n)}(u),h=(0,cn.Z)(),f={},x={bar1:{},bar2:{}};if("determinate"===c||"buffer"===c)if(void 0!==s){f["aria-valuenow"]=Math.round(s),f["aria-valuemin"]=0,f["aria-valuemax"]=100;var p=s-100;"rtl"===h.direction&&(p=-p),x.bar1.transform="translateX(".concat(p,"%)")}else 0;if("buffer"===c)if(void 0!==l){var v=(l||0)-100;"rtl"===h.direction&&(v=-v),x.bar2.transform="translateX(".concat(v,"%)")}else 0;return(0,M.jsxs)(Dn,(0,an.Z)({className:(0,q.Z)(m.root,r),ownerState:u,role:"progressbar"},f,{ref:n},d,{children:["buffer"===c?(0,M.jsx)(Tn,{className:m.dashed,ownerState:u}):null,(0,M.jsx)(Pn,{className:m.bar1,ownerState:u,style:x.bar1}),"determinate"===c?null:(0,M.jsx)(Rn,{className:m.bar2,ownerState:u,style:x.bar2})]}))})),En=t(42420),Mn=t(34814);var An=function(e){return e=e||{},R.Z.defaults(e,{id:Mn.Z.generateGUID(),name:"",checked:!1})},Fn=P.Ry().shape({name:P.Z_().required("You must enter a title")});var Vn=function(e){var n=(0,v.cI)({mode:"onChange",defaultValues:{name:e.name},resolver:(0,Z.X)(Fn)}),t=n.control,r=n.formState,a=n.handleSubmit,i=n.reset,s=r.isValid,l=r.dirtyFields;return r.errors,(0,M.jsx)("form",{onSubmit:a((function(n){e.onListItemAdd(An(n)),i({name:e.name})})),children:(0,M.jsxs)(fe.ZP,{className:"px-0",dense:!0,children:[(0,M.jsx)("span",{className:"w-40"}),(0,M.jsx)(v.Qr,{name:"name",control:t,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},n),{},{className:"flex flex-1 mx-8",name:"name",variant:"outlined",placeholder:"Add an item"}))}}),(0,M.jsx)(En.Z,{className:"mx-4","aria-label":"Add",size:"small",color:"secondary",type:"submit",disabled:R.Z.isEmpty(l)||!s,children:(0,M.jsx)(L.Z,{children:"heroicons-outline:plus"})})]})})},On=t(44758);var Bn=function(e){var n=e.item,t=e.onListItemChange,r=e.index,a=(0,v.cI)({mode:"onChange",defaultValues:n}),i=a.control,l=(0,a.watch)();return(0,s.useEffect)((function(){R.Z.isEqual(n,l)||t(l,r)}),[l,r,t,n]),(0,M.jsxs)(fe.ZP,{className:"px-0",dense:!0,children:[(0,M.jsx)(v.Qr,{name:"checked",control:i,defaultValue:!1,render:function(e){var n=e.field,t=n.onChange,r=n.value;return(0,M.jsx)(On.Z,{tabIndex:-1,checked:r,onChange:function(e){return t(e.target.checked)},disableRipple:!0})}}),(0,M.jsx)(v.Qr,{name:"name",control:i,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},n),{},{className:"flex flex-1 mx-8",variant:"outlined"}))}}),(0,M.jsx)(z.Z,{"aria-label":"Delete",onClick:e.onListItemRemove,size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:trash"})})]},n.id)},Qn=P.Ry().shape({name:P.Z_().required("You must enter a title")}),qn=(0,s.forwardRef)((function(e,n){var t=(0,s.useState)(!1),a=(0,r.Z)(t,2),i=a[0],l=a[1],o=(0,v.cI)({mode:"onChange",defaultValues:{name:e.name},resolver:(0,Z.X)(Qn)}),c=o.control,d=o.formState,u=o.handleSubmit,m=o.reset,h=d.isValid,f=d.dirtyFields;d.errors;function x(e){e.stopPropagation(),l(!0)}function j(){l(!1)}return(0,s.useEffect)((function(){i||m({name:e.name})}),[i,m,e.name]),(0,s.useImperativeHandle)(n,(function(){return{openForm:x}})),i?(0,M.jsx)(S.Z,{onClickAway:j,children:(0,M.jsx)("form",{onSubmit:u((function(n){e.onNameChange(n.name),j()})),children:(0,M.jsx)(v.Qr,{name:"name",control:c,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},n),{},{variant:"outlined",margin:"dense",autoFocus:!0,InputProps:{endAdornment:(0,M.jsx)(D.Z,{position:"end",children:(0,M.jsx)(z.Z,{type:"submit",disabled:R.Z.isEmpty(f)||!h,size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:check"})})})}}))}})})}):(0,M.jsx)(G.Z,{className:"text-16 font-semibold cursor-pointer mx-8",onClick:x,children:e.name})}));var Wn=function(e){var n=e.onCheckListChange,t=e.checklist,a=e.index,i=(0,s.useState)(null),l=(0,r.Z)(i,2),o=l[0],c=l[1],d=(0,s.useRef)(),u=(0,v.cI)({mode:"onChange",defaultValues:t}),m=u.watch,h=u.control,f=m();function x(){c(null)}function p(){return R.Z.sum(f.checkItems.map((function(e){return e.checked?1:0})))}return(0,s.useEffect)((function(){R.Z.isEqual(f,t)||n(f,a)}),[f,a,n,t]),f?(0,M.jsxs)("div",{className:"mb-24",children:[(0,M.jsxs)("div",{className:"flex items-center justify-between mt-16 mb-12",children:[(0,M.jsxs)("div",{className:"flex items-center",children:[(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:check-circle"}),(0,M.jsx)(v.Qr,{name:"name",control:h,defaultValue:"",render:function(e){var n=e.field,t=n.onChange,r=n.value;return(0,M.jsx)(qn,{name:r,onNameChange:function(e){return t(e)},ref:d})}})]}),(0,M.jsxs)("div",{className:"",children:[(0,M.jsx)(z.Z,{"aria-owns":o?"actions-menu":null,"aria-haspopup":"true",onClick:function(e){c(e.currentTarget)},variant:"outlined",size:"small",children:(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:dots-vertical"})}),(0,M.jsxs)(Ne.Z,{id:"actions-menu",anchorEl:o,open:Boolean(o),onClose:x,children:[(0,M.jsxs)(N.Z,{onClick:e.onRemoveCheckList,children:[(0,M.jsx)(ge.Z,{className:"min-w-40",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:trash"})}),(0,M.jsx)(ye.Z,{primary:"Remove Checklist"})]}),(0,M.jsxs)(N.Z,{onClick:function(e){x(),d.current.openForm(e)},children:[(0,M.jsx)(ge.Z,{className:"min-w-40",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:pencil"})}),(0,M.jsx)(ye.Z,{primary:"Rename Checklist"})]})]})]})]}),(0,M.jsxs)("div",{className:"",children:[(0,M.jsxs)("div",{className:"flex items-center -mx-6",children:[(0,M.jsx)(G.Z,{className:"flex font-semibold mx-6",children:"".concat(p()," / ").concat(f.checkItems.length)}),(0,M.jsx)(Ln,{className:"flex flex-1 mx-6",variant:"determinate",color:"secondary",value:100*p()/f.checkItems.length})]}),(0,M.jsx)(v.Qr,{name:"checkItems",control:h,defaultValue:[],render:function(e){var n=e.field,t=n.onChange,r=n.value;return(0,M.jsxs)(Ve.Z,{className:"",children:[r.map((function(e,n){return(0,M.jsx)(Bn,{item:e,index:n,onListItemChange:function(e,n){t(R.Z.setIn(r,"[".concat(n,"]"),e))},onListItemRemove:function(){t(R.Z.reject(r,{id:e.id}))}},e.id)})),(0,M.jsx)(Vn,{onListItemAdd:function(e){return t([].concat((0,Ee.Z)(r),[e]))}})]})}})]})]}):null},_n=t(45987),Un=t(52500),Xn=t(47925),Hn=t(38783),Gn=t(9397);var Yn=function(e){return e=e||{},R.Z.defaults(e,{id:Mn.Z.generateGUID(),type:"comment",idMember:null,message:"",time:se(new Date)})},Kn=["theme"],$n=["mention","theme","searchValue","isFocused"],Jn=P.Ry().shape({message:P.Z_().required("You must enter a comment")}),et={idMember:"",message:""},nt=(0,B.ZP)("div")((function(e){e.theme,(0,_n.Z)(e,Kn);return{padding:"9px 16px",borderWidth:"2px",display:"flex",flexGrow:"1",borderRadius:"1.2rem",cursor:"text",width:"100%","& .DraftEditor-root":{display:"flex",flexDirection:"row",flexGrow:"1","& .public-DraftEditorPlaceholder-root":{color:"#9d9d9d","&.public-DraftEditorPlaceholder-hasFocus":{display:"none"}}},"& .DraftEditor-editorContainer":{flexGrow:"1"},"& .public-DraftEditor-content":{minHeight:"96px"}}})),tt=function(e){var n=e.mention,t=e.theme,r=(e.searchValue,e.isFocused,(0,_n.Z)(e,$n));return(0,M.jsx)("div",(0,p.Z)((0,p.Z)({},r),{},{children:(0,M.jsxs)("div",{className:null===t||void 0===t?void 0:t.mentionSuggestionsEntryContainer,children:[(0,M.jsx)("div",{className:null===t||void 0===t?void 0:t.mentionSuggestionsEntryContainerLeft,children:(0,M.jsx)($.i6,{contact:n,className:"w-20 h-20"})}),(0,M.jsx)("div",{className:null===t||void 0===t?void 0:t.mentionSuggestionsEntryContainerRight,children:(0,M.jsx)("div",{className:null===t||void 0===t?void 0:t.mentionSuggestionsEntryText,children:n.display})})]})}))},rt=function(e){var n=(0,s.useRef)(null),t=(0,o.v9)(Oe.dy),a=(0,o.v9)(re.ad),i=(0,s.useMemo)((function(){return a.map((function(e){return(0,p.Z)((0,p.Z)({},e),{},{link:e.email,name:e.display,avatar:e.photoUrl})}))}),[a]),l=(0,s.useState)((function(){return Un.EditorState.createEmpty()})),c=(0,r.Z)(l,2),d=c[0],u=c[1],m=(0,s.useState)(!1),h=(0,r.Z)(m,2),f=h[0],x=h[1],j=(0,s.useState)(i),b=(0,r.Z)(j,2),g=b[0],y=b[1],N=(0,s.useMemo)((function(){var e=(0,Hn.ZP)({entityMutability:"IMMUTABLE",theme:Gn.Z,mentionPrefix:"@",supportWhitespace:!0});return{plugins:[e],MentionSuggestions:e.MentionSuggestions}}),[]),C=N.MentionSuggestions,k=N.plugins,I=(0,s.useCallback)((function(e){x(e)}),[]),S=(0,s.useCallback)((function(e){var n=e.value;y((0,Hn.zk)(n,i))}),[i]),z=(0,v.cI)({mode:"onChange",defaultValues:et,resolver:(0,Z.X)(Jn)}),D=z.control,T=z.formState,P=z.handleSubmit,L=z.reset,E=(z.setValue,T.isValid),A=T.dirtyFields;T.errors;return(0,s.useEffect)((function(){t&&L({idMember:t.uuid,message:""})}),[t,L]),t?(0,M.jsxs)("form",{onSubmit:P((function(n){e.onCommentAdd(Yn((0,p.Z)((0,p.Z)({},{idMember:t.uuid,message:""}),n))),u(Un.EditorState.createEmpty()),L({idMember:t.uuid,message:""})})),className:"flex -mx-8",children:[(0,M.jsx)($.i6,{className:"!w-32 !h-32 mx-8",contact:t.data}),(0,M.jsxs)("div",{className:"flex flex-col items-start flex-1 mx-8",children:[(0,M.jsx)(v.Qr,{name:"message",control:D,render:function(e){var t=e.field,r=(t.value,t.onChange);return(0,M.jsxs)(nt,{onClick:function(){n.current.focus()},children:[(0,M.jsx)(Xn.ZP,{editorKey:"editor",placeholder:"Type your message",editorState:d,onChange:function(e){u(e);var n=e.getCurrentContent(),t=qe.Z.formatTextToMention(n.getPlainText(),(0,Un.convertToRaw)(n).entityMap);r(t)},plugins:k,ref:n}),(0,M.jsx)(C,{open:f,onOpenChange:I,suggestions:g,onSearchChange:S,entryComponent:tt})]})}}),(0,M.jsx)(w.Z,{className:"mt-16","aria-label":"save",variant:"contained",color:"secondary",type:"submit",size:"small",disabled:R.Z.isEmpty(A)||!E,children:"Save"})]})]}):null},at=t(85281);var it=function(e){return e=e||{},R.Z.defaults(e,{id:"",name:"",src:"",time:se(new Date),type:""})},st=function(e){var n=e.boardId,t=e.cardId,a=e.onAddAttachment,i=(0,o.I0)(),l=(0,s.useState)(!1),c=(0,r.Z)(l,2),d=c[0],u=c[1],m=(0,s.useState)(null),h=(0,r.Z)(m,2);h[0],h[1];return(0,M.jsx)("div",{children:d?(0,M.jsx)(at.Z,{color:"inherit",size:20}):(0,M.jsxs)(z.Z,{size:"large",component:"label",children:[(0,M.jsx)("input",{hidden:!0,accept:"image/gif, image/png, image/jpeg, video/mp4, application/pdf, application/msword,",onChange:function(e){u(!0);var r=new FormData;r.append("file",e.target.files[0]),i((0,J.Qd)({boardId:n,cardId:t,formData:r})).unwrap().then((function(e){setTimeout((function(){u(!1),a(it(e))}),5e3)}))},type:"file"}),(0,M.jsx)(L.Z,{children:"heroicons-outline:paper-clip"})]})})};var lt=function(e){return(0,M.jsx)(K.ZP,{open:Boolean(e.state),anchorEl:e.state,onClose:e.onClose,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,M.jsx)(M.Fragment,{children:e.children})})},ot=function(e){var n=(0,s.useState)(null),t=(0,r.Z)(n,2),a=t[0],i=t[1],l=e.dueDate?(0,le.Z)(ce(e.dueDate),"Pp"):(0,le.Z)(new Date,"Pp");function o(){i(null)}return(0,M.jsxs)("div",{children:[(0,M.jsx)(z.Z,{onClick:function(e){i(e.currentTarget)},size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:calendar"})}),(0,M.jsx)(lt,{state:a,onClose:o,children:(0,M.jsx)("div",{className:"p-16 max-w-192",children:e.dueDate?(0,M.jsx)(N.Z,{onClick:function(n){e.onRemoveDue(),o()},children:"Remove Due Date"}):(0,M.jsx)(Me.x,{value:l,inputFormat:"Pp",onChange:function(n,t){e.onDueChange(se(n)),o()},renderInput:function(e){return(0,M.jsx)(T.Z,(0,p.Z)({label:"Due date",placeholder:"Choose a due date",className:"w-full"},e))}})})})]})},ct={title:""},dt=P.Ry().shape({title:P.Z_().required("You must enter a title")}),ut=function(e){var n=(0,o.I0)(),t=(0,s.useState)(!1),a=(0,r.Z)(t,2),i=a[0],l=a[1],c=(0,v.cI)({mode:"onChange",defaultValues:ct,resolver:(0,Z.X)(dt)}),d=c.control,u=c.formState,m=c.handleSubmit,h=c.reset,f=u.isValid,x=u.dirtyFields;u.errors;function j(){l(!1)}return(0,s.useEffect)((function(){i||h(ct)}),[i,h]),(0,M.jsx)("div",{className:"w-full",children:i?(0,M.jsx)(S.Z,{onClickAway:j,children:(0,M.jsxs)("form",{onSubmit:m((function(e){n((0,ne.SC)({newData:e})),j()})),children:[(0,M.jsx)(v.Qr,{name:"title",control:d,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,{className:"mb-16",required:!0,fullWidth:!0,variant:"filled",label:"Label title",autoFocus:!0,InputProps:(0,p.Z)((0,p.Z)({},n),{},{endAdornment:(0,M.jsx)(D.Z,{position:"end",children:(0,M.jsx)(z.Z,{onClick:j,size:"large",children:(0,M.jsx)(L.Z,{size:18,children:"heroicons-outline:x"})})})})})}}),(0,M.jsx)("div",{className:"flex justify-between items-center",children:(0,M.jsx)(w.Z,{variant:"contained",color:"secondary",type:"submit",disabled:R.Z.isEmpty(x)||!f,size:"small",children:"Add"})})]})}):(0,M.jsx)(w.Z,{onClick:function(e){e.stopPropagation(),l(!0)},classes:{root:"font-medium w-full rounded-lg p-24 justify-start"},startIcon:(0,M.jsx)(L.Z,{children:"heroicons-outline:plus-circle"}),sx:{color:"text.secondary"},children:"Add another label"})})},mt=function(e){var n=(0,o.v9)(ne.ir),t=(0,s.useState)(null),a=(0,r.Z)(t,2),i=a[0],l=a[1];return(0,M.jsxs)("div",{children:[(0,M.jsx)(z.Z,{onClick:function(e){l(e.currentTarget)},size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:tag"})}),(0,M.jsxs)(lt,{state:i,onClose:function(){l(null)},children:[(0,M.jsx)("div",{className:"",children:n.map((function(n){return(0,M.jsxs)(N.Z,{className:"px-8",onClick:function(t){e.onToggleLabel(n.id)},children:[(0,M.jsx)(On.Z,{checked:e.labels.includes(n.id)}),(0,M.jsx)(ye.Z,{className:"mx-8",children:n.title}),(0,M.jsx)(ge.Z,{className:"min-w-24",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:tag"})})]},n.id)}))}),(0,M.jsx)("div",{className:"p-12",children:(0,M.jsx)(ut,{})})]})]})},ht=function(e){var n=(0,s.useState)(null),t=(0,r.Z)(n,2),a=t[0],i=t[1],l=(0,o.v9)(re.ad);return(0,M.jsxs)("div",{children:[(0,M.jsx)(z.Z,{onClick:function(e){i(e.currentTarget)},size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:user-circle"})}),(0,M.jsx)(lt,{state:a,onClose:function(){i(null)},children:(0,M.jsx)("div",{className:"",children:l.map((function(n){return(0,M.jsxs)(N.Z,{className:"px-8",onClick:function(t){e.onToggleMember(n.id)},children:[(0,M.jsx)(On.Z,{checked:e.memberIds.includes(n.id)}),(0,M.jsx)($.i6,{className:"w-32 h-32",contact:n}),(0,M.jsx)(ye.Z,{className:"mx-8",children:n.display})]},n.id)}))})})]})};var ft=function(e){return e=e||{},R.Z.defaults(e,{id:Mn.Z.generateGUID(),name:"",checkItems:[]})},xt=P.Ry().shape({name:P.Z_().required("You must enter a title")}),pt=function(e){var n=(0,s.useState)(null),t=(0,r.Z)(n,2),a=t[0],i=t[1],l=(0,v.cI)({mode:"onChange",defaultValues:{name:e.name},resolver:(0,Z.X)(xt)}),o=l.control,c=l.formState,d=l.handleSubmit,u=l.reset,m=c.isValid,h=c.dirtyFields,f=c.errors;function x(){i(null)}return(0,s.useEffect)((function(){a||u({name:e.name})}),[a,u,e.name]),(0,M.jsxs)("div",{children:[(0,M.jsx)(z.Z,{onClick:function(e){i(e.currentTarget)},size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:check-circle"})}),(0,M.jsx)(lt,{state:a,onClose:x,children:(0,M.jsxs)("form",{onSubmit:d((function(n){e.onAddCheckList(ft(n)),x()})),className:"p-16 flex flex-col items-end",children:[(0,M.jsx)(v.Qr,{name:"name",control:o,render:function(e){var n,t=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},t),{},{label:"Checklist title",error:!!f.name,helperText:null===f||void 0===f||null===(n=f.name)||void 0===n?void 0:n.message,fullWidth:!0,className:"mb-12",variant:"outlined",required:!0,autoFocus:!0}))}}),(0,M.jsx)(w.Z,{color:"secondary",type:"submit",disabled:R.Z.isEmpty(h)||!m,variant:"contained",children:"Add"})]})})]})},vt=function(e){var n=(0,s.useState)(null),t=(0,r.Z)(n,2),a=t[0],i=t[1];return(0,M.jsxs)("div",{children:[(0,M.jsx)(z.Z,{onClick:function(e){i(e.currentTarget)},size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:dots-horizontal"})}),(0,M.jsx)(lt,{state:a,onClose:function(){i(null)},children:(0,M.jsx)(N.Z,{onClick:e.onRemoveCard,children:"Remove Card"})})]})},jt=t(92550),Zt=t(63738),bt=t(31649),gt=t(56605),yt=t(9289),Nt=t(57451),wt=t(11120),Ct=t(48070),kt=t(75908),It=t(4117),St=(0,Ct.Z)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120,maxWidth:150,height:30,marginTop:"1rem !important"},chips:{display:"flex",flexWrap:"wrap"},chip:{margin:2},noLabel:{marginTop:e.spacing(3)}}})),zt=function(e){St();var n=(0,o.I0)(),t=(0,o.v9)(wt.Z1),a=(0,o.v9)(re.ad),i=a.user,l=a.userList,c=(0,s.useState)(null),d=(0,r.Z)(c,2),u=d[0],m=d[1],h=Boolean(u),f=function(){m(null)},x=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(r){return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r&&r.user&&n((0,wt.a4)((0,p.Z)((0,p.Z)({},t),{},{owner:r.user}))),f();case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(w.Z,{id:"chat-owner-button","aria-controls":h?"chat-owner-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:function(e){m(e.currentTarget)},variant:"outlined",className:"rounded border-gray",children:(0,M.jsx)(G.Z,{className:"capitalize font-medium",children:t.owner?t.owner.firstname:"Owner"})}),(0,M.jsx)(Ne.Z,{id:"chat-owner-menu","aria-labelledby":"chat-owner-button",anchorEl:u,open:h,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:l.map((function(e,n){return(0,M.jsxs)(N.Z,{value:e,disabled:t.owner&&t.owner.id===e.userId,onClick:function(){x(e)},children:[e.user.firstname," ",e.user.lastname,i&&e.userId===i.id&&"(Me)"]},n)}))})]})},Dt=function(e){St();var n=(0,o.I0)(),t=(0,o.v9)(wt.Z1),a=(0,s.useState)(!1),i=(0,r.Z)(a,2),l=i[0],c=(i[1],(0,s.useState)(null)),d=(0,r.Z)(c,2),u=d[0],m=d[1],h=Boolean(u),f=function(){var e=(0,he.Z)((0,me.Z)().mark((function e(r){return(0,me.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n((0,wt.a4)((0,p.Z)((0,p.Z)({},t),{},{status:r})));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=(0,v.cI)({mode:"onChange"}),j=(x.control,x.watch,x.reset),Z=(x.handleSubmit,x.formState);x.getValues,Z.isValid,Z.dirtyFields,Z.errors;return(0,s.useEffect)((function(){return l&&j({ticketDetail:t.ticketDetail}),function(){j({ticketDetail:""})}}),[l,t]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(w.Z,{id:"demo-positioned-button","aria-controls":h?"demo-positioned-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:function(e){m(e.currentTarget)},variant:"outlined",className:"rounded border-gray",children:(0,M.jsx)(G.Z,{className:"capitalize font-medium",children:t.status?t.status:"Status"})}),(0,M.jsxs)(Ne.Z,{id:"demo-positioned-menu","aria-labelledby":"demo-positioned-button",anchorEl:u,open:h,onClose:function(){m(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},children:[(0,M.jsx)(N.Z,{value:"open",onClick:function(){return f("open")},children:"Open"},1),(0,M.jsx)(N.Z,{value:"Resolved",onClick:function(){return f("resolved")},children:"Resolved"},2)]})]})},Tt=function(){St();var e=(0,o.I0)(),n=(0,o.v9)(wt.Z1),t=(0,s.useState)(!1),a=(0,r.Z)(t,2),l=a[0],c=a[1],d=(0,v.cI)({mode:"onChange"}),u=d.control,m=(d.watch,d.reset),h=d.handleSubmit,f=d.formState,x=(d.getValues,f.isValid),j=f.dirtyFields,Z=f.errors;return(0,s.useEffect)((function(){return l&&m({ticketDetail:n.ticketDetail}),function(){m({ticketDetail:""})}}),[l,n]),(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(w.Z,{variant:"outlined",className:"rounded border-gray",onClick:function(){c(!0)},children:"Edit Ticket Topic"}),(0,M.jsxs)(Le.Z,{fullWidth:!0,maxWidth:"xs",className:"m-24",onClose:function(){c(!1)},"aria-labelledby":"simple-dialog-title",open:l,children:[(0,M.jsx)(kt.Z,{position:"static",elevation:0,children:(0,M.jsx)(yt.Z,{className:"flex w-full",children:(0,M.jsx)(G.Z,{className:"capitalize font-medium",children:"Ticket Detail"})})}),(0,M.jsxs)("form",{noValidate:!0,onSubmit:h((function(t){e((0,wt.a4)((0,p.Z)((0,p.Z)({},n),{},{description:t.ticketDetail}))).then((function(){c(!1),e((0,i.PV)({message:"Ticket Detail success!",autoHideDuration:1e3,variant:"success"}))})).catch((function(n){console.error("[TicketDetailSetting] error ",n.message),e((0,i.PV)({message:"Ticket Detail fail!",autoHideDuration:2e3,variant:"error"}))}))})),className:"flex flex-col md:overflow-hidden",children:[(0,M.jsx)(Fe.Z,{classes:{root:"p-24"},children:(0,M.jsx)("div",{className:"flex",children:(0,M.jsx)(v.Qr,{control:u,name:"ticketDetail",render:function(e){var n,t=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},t),{},{className:"mb-8",label:"Ticket Detail",id:"ticketDetail",error:!!Z.name,helperText:null===Z||void 0===Z||null===(n=Z.name)||void 0===n?void 0:n.message,variant:"outlined",required:!0,fullWidth:!0}))}})})}),(0,M.jsx)(It.Z,{className:"justify-between p-4 pb-16",children:(0,M.jsx)("div",{className:"px-16",children:(0,M.jsx)(w.Z,{variant:"contained",color:"secondary",type:"submit",disabled:R.Z.isEmpty(j)||!x,children:"Save"})})})]})]})]})},Pt=function(e){var n=(0,c.UO)(),t=n.mode,a=(n.id,e.className),i=(0,s.useState)(null),l=(0,r.Z)(i,2),o=l[0],d=l[1];function u(e){d(null)}return(0,M.jsxs)("div",{className:a,children:[(0,M.jsx)(z.Z,{"aria-owns":o?"main-more-menu":null,"aria-haspopup":"true",onClick:function(e){d(e.currentTarget)},size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:dots-vertical"})}),(0,M.jsx)(K.ZP,{id:"chats-more-menu",anchorEl:o,open:Boolean(o),onClose:u,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},maxWidth:"md",children:(0,M.jsxs)("div",{className:"flex flex-col space-y-8 m-8",children:[(0,M.jsxs)(Nt.Z,{lgUp:!0,children:[(0,M.jsx)(zt,{}),(0,M.jsx)(Dt,{onClose:u})]}),"history"!==t&&(0,M.jsx)(Tt,{})]})})]})},Rt=(0,B.ZP)("div")((function(e){var n=e.theme;return{"&.contact":{"& .bubble":{backgroundColor:n.palette.secondary.light,color:n.palette.secondary.contrastText,borderTopLeftRadius:5,borderBottomLeftRadius:5,borderTopRightRadius:20,borderBottomRightRadius:20,"& .time":{marginLeft:12}},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:20}},"&.last-of-group":{"& .bubble":{borderBottomLeftRadius:20}}},"&.me":{paddingLeft:40,"& .bubble":{marginLeft:"auto",backgroundColor:n.palette.primary.light,color:n.palette.primary.contrastText,borderTopLeftRadius:20,borderBottomLeftRadius:20,borderTopRightRadius:5,borderBottomRightRadius:5,"& .time":{justifyContent:"flex-end",right:0,marginRight:12}},"&.first-of-group":{"& .bubble":{borderTopRightRadius:20}},"&.last-of-group":{"& .bubble":{borderBottomRightRadius:20}}},"&.contact + .me, &.me + .contact":{paddingTop:20,marginTop:20},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:20,paddingTop:13}},"&.last-of-group":{"& .bubble":{borderBottomLeftRadius:20,paddingBottom:13,"& .time":{display:"flex"}}}}})),Lt=function(e){var n,t=e.chatId,a=((0,c.s0)(),(0,o.I0)()),i=(0,o.v9)(wt.Z1),l=(0,o.v9)(Oe.dy),d=(0,s.useRef)(null),u=(0,s.useState)(),m=(0,r.Z)(u,2),h=m[0],f=m[1],x=(0,s.useState)(""),p=(0,r.Z)(x,2),v=p[0],Z=p[1],b=(0,s.useState)(""),g=(0,r.Z)(b,2),y=g[0],N=g[1],w=(0,s.useState)(!1),C=(0,r.Z)(w,2),I=C[0],S=C[1],D=(0,s.useState)(),T=(0,r.Z)(D,2);T[0],T[1];(0,s.useEffect)((function(){t&&a((0,wt.mb)({chatId:t}))}),[t,a]),(0,s.useEffect)((function(){i&&(setTimeout(R()),i.customer&&f(i.customer),i.channel&&("line"===i.channel.channel&&i.channel.line&&N(i.channel.line.name),"facebook"===i.channel.channel&&i.channel.facebook&&N(i.channel.facebook.name)))}),[a,i]),(0,s.useEffect)((function(){i&&setTimeout(R)}),[i]);var P=function(){R()};function R(){d.current&&d.current.scrollTo({top:d.current.scrollHeight,behavior:"smooth"})}function E(e,n){return 0===n||i.message[n-1]&&i.message[n-1].direction!==e.direction}function A(e,n){return n===i.message.length-1||i.message[n+1]&&i.message[n+1].direction!==e.direction}function F(e){if(e.preventDefault(),""!==v){var n=v;Z(""),a((0,wt.Yv)({id:"",data:JSON.stringify({text:n}),type:"text",timestamp:new Date,isError:!1,isRead:!1,direction:"outbound",createdAt:new Date,updatedAt:new Date})),a((0,wt.bG)({messageText:v,chatId:i.id})).then((function(){Z("")}))}}return l&&i&&h?(0,M.jsxs)("div",{className:"flex flex-col border-1 rounded-[4px] mb-24",children:[(0,M.jsx)(xe.Z,{className:"w-full border-1 mb-10",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,j.$n)(e.palette.background.default,.4):(0,j.$n)(e.palette.background.default,.02)}},children:(0,M.jsx)(yt.Z,{className:"flex items-center justify-between px-16 py-8 w-full",children:(0,M.jsx)("div",{className:"flex flex-col w-full items-center space-y-4",children:(0,M.jsxs)("div",{className:"flex flex-row w-full items-center",children:[(0,M.jsx)("div",{className:"flex w-full items-center",children:(0,M.jsxs)("div",{className:"flex items-center cursor-pointer",children:[(0,M.jsx)($.f4,{contact:h,channel:i.channel}),(0,M.jsxs)("div",{className:"flex flex-col px-8",children:[(0,M.jsx)(G.Z,{color:"inherit",className:"text-16 font-semibold px-4",children:(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(Nt.Z,{mdDown:!0,children:"".concat(h.display)}),(0,M.jsx)(Nt.Z,{mdUp:!0,children:"".concat(null===h||void 0===h||null===(n=h.display)||void 0===n?void 0:n.substring(0,15))})]})}),(0,M.jsx)(k.Z,{size:"small",className:"w-min my-1 rounded bg-[#6D6D6D] text-[#FFFFFF]",label:y})]})]})}),(0,M.jsx)(Pt,{className:"mx-8"})]})})})}),(0,M.jsx)("div",{className:"flex flex-auto min-h-200 max-h-320 w-full mb-10",children:(0,M.jsx)("div",{className:(0,q.Z)("flex flex-1 z-10 flex-col relative",e.className),children:(0,M.jsx)(jt.Z,{ref:d,className:"flex flex-1 flex-col overflow-y-auto",children:(null===i||void 0===i?void 0:i.message.length)>0&&(0,M.jsx)("div",{className:"flex flex-col p-16",children:i.message.map((function(e,n){var t=JSON.parse(e.data);return(0,M.jsx)(Rt,{className:(0,q.Z)("flex flex-col grow-0 shrink-0 items-start justify-end relative px-16 pb-4",{me:"outbound"===e.direction},{contact:"inbound"===e.direction},{"first-of-group":E(e,n)},{"last-of-group":A(e,n)},n+1===i.message.length&&"pb-0"),children:(0,M.jsxs)("div",{className:"bubble flex relative items-center justify-center p-12 max-w-[90%] shadow",children:[e.type&&"image"===e.type&&(0,M.jsx)("img",{src:t.url,alt:t.id,className:"max-w-xs h-auto",onLoad:P}),e.type&&"sticker"===e.type&&(0,M.jsx)("img",{src:t.url,alt:"Sticker",className:"max-w-xs h-auto",onLoad:P}),e.type&&"text"===e.type&&(0,M.jsx)(Qe.Z,{children:(0,M.jsx)("p",{className:"break-words whitespace-pre-wrap max-w-full",children:t.text})}),e.type&&("buttons"===e.type||"confirm"===e.type||"carousel"===e.type||"flex"===e.type)&&(0,M.jsx)("div",{className:" break-all",children:"This is a template message"}),(0,M.jsxs)(G.Z,{className:"time absolute hidden w-full text-11 mt-8 -mb-24 ltr:left-0 rtl:right-0 bottom-0 whitespace-nowrap",color:"textSecondary",children:["outbound"===e.direction&&e.createdBy?(0,M.jsxs)("b",{children:[e.createdBy.display,"\xa0\xa0"]}):null,e.createdAt?(0,Be.Z)(new Date(e.createdAt),{addSuffix:!1}):null]})]})},n)}))})})})}),i&&"open"===i.status&&(0,M.jsx)(_e.Z,{square:!0,component:"form",autoComplete:"off",onSubmit:F,className:"flex flex-auto border-t-1 right-0 left-0 py-16 px-16",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,j.$n)(e.palette.background.default,.4):(0,j.$n)(e.palette.background.default,.02)}},children:(0,M.jsxs)("div",{className:"flex items-center relative w-full",children:[(0,M.jsxs)("label",{htmlFor:"icon-button-file",children:[(0,M.jsx)(gt.Z,{accept:"image/gif, image/png, image/jpeg, video/mp4",id:"icon-button-file",type:"file",className:"hidden",onChange:function(e){S(!0);var n=new FormData;n.append("file",e.target.files[0]),a((0,wt.x5)({formData:n,chat:i})).then((function(){setTimeout((function(){S(!1)}),5e3)}))}}),(0,M.jsx)(z.Z,{color:"primary","aria-label":"upload picture",component:"span",children:I?(0,M.jsx)(at.Z,{size:24}):(0,M.jsx)(L.Z,{className:"text-24",color:"action",children:"heroicons-outline:paper-clip"})})]}),(0,M.jsx)(bt.ZP,{multiline:!0,maxRows:4,autoFocus:!0,id:"message-input",className:"flex-1 flex grow shrink-0 mx-8 px-16 border-2 rounded-xl max-w-full",placeholder:"Type your message",onChange:function(e){Z(e.target.value)},value:v,sx:{backgroundColor:"background.paper"},onKeyDown:function(e){13===e.keyCode&&!1===e.shiftKey&&(e.preventDefault(),F(e))}}),(0,M.jsx)(z.Z,{className:"",onClick:F,size:"large",children:(0,M.jsx)(L.Z,{className:"rotate-90",color:"action",children:"heroicons-outline:paper-airplane"})})]})})]}):(0,M.jsx)("div",{className:"flex w-full h-full items-center",children:(0,M.jsx)(Zt.Z,{})})},Et=function(e){var n=(0,o.I0)(),t=(0,o.v9)(x.ZO),r=(0,o.v9)(ne.ir),a=(0,o.v9)(re.ad),i=(0,o.v9)(Oe.dy),l=(0,o.v9)(J.VN),c=(0,o.v9)((function(e){return(0,E.Q)(e,null===l||void 0===l?void 0:l.listId)})),d=(0,o.v9)((function(e){return(0,ee.j0)(e,null===l||void 0===l?void 0:l.chatId)})),m=(0,v.cI)({mode:"onChange",defaultValues:{name:"",boardId:"",listId:"",title:"",description:"",labels:[],dueDate:"",attachmentCoverId:"",memberIds:[],attachments:[],subscribed:!0,checklists:[],activities:[]}}),h=m.register,f=m.watch,j=m.control,Z=m.setValue,b=m.reset,g=f(),y=(0,u.Nr)((function(e){e&&e.cardId&&n((0,J.OV)(e))}),10);return(0,s.useEffect)((function(){l&&b(l)}),[l,b]),(0,s.useEffect)((function(){h("attachmentCoverId")}),[h]),l?(0,M.jsxs)(Fe.Z,{className:"flex flex-col sm:flex-row p-8",children:[(0,M.jsxs)("div",{className:"flex flex-auto flex-col py-16 px-0 sm:px-16",children:[(0,M.jsxs)("div",{className:"w-full flex flex-row justify-between items-center",children:[(0,M.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between justify-center items-center mb-24",children:[(0,M.jsxs)("div",{className:"mb-16 sm:mb-0 flex items-center",children:[(0,M.jsx)(G.Z,{className:"font-600",children:t.title||""}),(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:chevron-right"}),(0,M.jsx)(G.Z,{className:"font-600",children:c&&c.title||""})]}),g.dueDate&&(0,M.jsx)(Me.x,{className:"px-12",value:(0,le.Z)(ce(g.dueDate),"Pp"),inputFormat:"Pp",onChange:function(e){return Z("dueDate",se(e))},renderInput:function(e){return(0,M.jsx)(T.Z,(0,p.Z)({size:"small",label:"Due date",placeholder:"Choose a due date",className:"w-full sm:w-auto"},e))}})]}),(0,M.jsx)("div",{children:(0,M.jsx)(w.Z,{className:"mb-24 h-auto","aria-label":"save",variant:"contained",color:"secondary",type:"submit",size:"small",onClick:function(){return y(g)},disabled:R.Z.isEqual(l,g),children:"Save"})})]}),d&&(0,M.jsx)(Lt,{chatId:d.id}),(0,M.jsx)("div",{className:"flex items-center mb-24",children:(0,M.jsx)(v.Qr,{name:"title",control:j,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},n),{},{label:"Title",type:"text",variant:"outlined",fullWidth:!0,required:!0,InputProps:{endAdornment:(0,M.jsx)(D.Z,{position:"end",children:l.subscribed&&(0,M.jsx)(L.Z,{size:20,color:"action",children:"heroicons-outline:eye"})})}}))}})}),(0,M.jsx)("div",{className:"w-full mb-24",children:(0,M.jsx)(v.Qr,{name:"description",control:j,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},n),{},{label:"Description",multiline:!0,rows:"4",variant:"outlined",fullWidth:!0}))}})}),g.labels&&g.labels.length>0&&(0,M.jsxs)("div",{className:"flex-1 mb-24 mx-8",children:[(0,M.jsxs)("div",{className:"flex items-center mt-16 mb-12",children:[(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:tag"}),(0,M.jsx)(G.Z,{className:"font-semibold text-16 mx-8",children:"Labels"})]}),(0,M.jsx)(C.Z,{disableClearable:!0,className:"mt-8 mb-16",multiple:!0,freeSolo:!0,options:r,getOptionLabel:function(e){return e&&e.title||""},value:g.labels.map((function(e){return R.Z.find(r,{id:e})})),onChange:function(e,n){Z("labels",n.map((function(e){return e.id})))},renderTags:function(e,n){return e.map((function(e,t){return(0,M.jsx)(k.Z,(0,p.Z)((0,p.Z)({label:(null===e||void 0===e?void 0:e.title)||""},n({index:t})),{},{className:"m-3"}))}))},renderInput:function(e){return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},e),{},{placeholder:"Select multiple Labels",label:"Labels",variant:"outlined",InputLabelProps:{shrink:!0}}))}})]}),g.memberIds&&g.memberIds.length>0&&(0,M.jsxs)("div",{className:"flex-1 mb-24 mx-8",children:[(0,M.jsxs)("div",{className:"flex items-center mt-16 mb-12",children:[(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:users"}),(0,M.jsx)(G.Z,{className:"font-semibold text-16 mx-8",children:"Members"})]}),(0,M.jsx)(C.Z,{className:"mt-8 mb-16",multiple:!0,freeSolo:!0,options:a,getOptionLabel:function(e){return e.display},value:R.Z.compact(g.memberIds.map((function(e){return R.Z.find(a,{id:e})}))),onChange:function(e,n){Z("memberIds",n.map((function(e){return e.id})))},renderTags:function(e,n){return e.map((function(e,t){return e?(0,M.jsx)(k.Z,(0,p.Z)((0,p.Z)({label:e.display},n({index:t})),{},{className:(0,q.Z)("m-3",e.class),avatar:(0,M.jsx)(H.Z,{title:e.display||"",children:(0,M.jsx)(Ae.Z,{src:e.pictureURL,children:e.display.charAt(0)})})})):null}))},renderInput:function(e){return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},e),{},{placeholder:"Select multiple Members",label:"Members",variant:"outlined",InputLabelProps:{shrink:!0}}))}})]}),g.attachments&&g.attachments.length>0&&(0,M.jsxs)("div",{className:"mb-24",children:[(0,M.jsxs)("div",{className:"flex items-center mt-16 mb-12",children:[(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:paper-clip"}),(0,M.jsx)(G.Z,{className:"font-semibold text-16 mx-8",children:"Attachments"})]}),(0,M.jsx)("div",{className:"flex flex-col sm:flex-row flex-wrap -mx-16",children:g.attachments.map((function(e){return(0,M.jsx)(nn,{item:e,card:g,makeCover:function(){Z("attachmentCoverId",e.id),Z("activities",[Yn({idMember:i.uuid,message:"Make a cover image"})].concat((0,Ee.Z)(g.activities)))},removeCover:function(){Z("attachmentCoverId",""),Z("activities",[Yn({idMember:i.uuid,message:"Remove a cover image"})].concat((0,Ee.Z)(g.activities)))},removeAttachment:function(){Z("attachments",R.Z.reject(g.attachments,{id:e.id})),Z("activities",[Yn({idMember:i.uuid,message:"Remove a attachment"})].concat((0,Ee.Z)(g.activities)))}},e.id)}))})]}),g.checklists&&g.checklists.map((function(e,n){return(0,M.jsx)(Wn,{checklist:e,index:n,onCheckListChange:function(e,n){Z("checklists",R.Z.setIn(g.checklists,"[".concat(n,"]"),e))},onRemoveCheckList:function(){Z("checklists",R.Z.reject(g.checklists,{id:e.id}))}},e.id)})),(0,M.jsxs)("div",{className:"mb-24",children:[(0,M.jsxs)("div",{className:"flex items-center mt-16 mb-12",children:[(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:chat-alt"}),(0,M.jsx)(G.Z,{className:"font-semibold text-16 mx-8",children:"Comment"})]}),(0,M.jsx)("div",{className:"mb-24",children:(0,M.jsx)(rt,{onCommentAdd:function(e){return Z("activities",[e].concat((0,Ee.Z)(g.activities)))}})})]}),(0,M.jsx)(v.Qr,{name:"activities",control:j,defaultValue:[],render:function(e){var n=e.field,t=(n.onChange,n.value);return(0,M.jsx)("div",{children:t.length>0&&(0,M.jsxs)("div",{className:"mb-24",children:[(0,M.jsxs)("div",{className:"flex items-center mt-16",children:[(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:clipboard-list"}),(0,M.jsx)(G.Z,{className:"font-semibold text-16 mx-8",children:"Activity"})]}),(0,M.jsx)(Ve.Z,{className:"",children:t.map((function(e){return(0,M.jsx)(We,{item:e},e.id)}))})]})})}})]}),(0,M.jsx)("div",{className:"flex order-first sm:order-last items-start sticky top-0 z-99",children:(0,M.jsxs)(we.Z,{className:"flex flex-row sm:flex-col items-center sm:py-8 rounded-12 w-full",sx:{backgroundColor:"background.default"},children:[(0,M.jsx)(z.Z,{className:"order-last sm:order-first",color:"inherit",onClick:function(e){return n((0,J.T2)())},size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:x"})}),(0,M.jsxs)("div",{className:"flex flex-row items-center sm:items-start sm:flex-col flex-1",children:[(0,M.jsx)(v.Qr,{name:"dueDate",control:j,defaultValue:null,render:function(e){var n=e.field,t=n.onChange,r=n.value;return(0,M.jsx)(ot,{onDueChange:t,onRemoveDue:function(){return t(null)},dueDate:r})}}),(0,M.jsx)(v.Qr,{name:"labels",control:j,defaultValue:[],render:function(e){var n=e.field,t=n.onChange,r=n.value;return(0,M.jsx)(mt,{onToggleLabel:function(e){return t(R.Z.xor(r,[e]))},labels:r})}}),(0,M.jsx)(v.Qr,{name:"memberIds",control:j,defaultValue:[],render:function(e){var n=e.field,t=n.onChange,r=n.value;return(0,M.jsx)(ht,{onToggleMember:function(e){return t(R.Z.xor(r,[e]))},memberIds:r})}}),(0,M.jsx)(v.Qr,{name:"attachments",control:j,defaultValue:[],render:function(e){var n=e.field,r=n.onChange;n.value;return(0,M.jsx)(st,{boardId:t.id,cardId:l.cardId,onAddAttachment:function(e){r([].concat((0,Ee.Z)(g.attachments),[e])),Z("activities",[Yn({idMember:i.uuid,message:e.src,type:"attachment"})].concat((0,Ee.Z)(g.activities)))}})}}),(0,M.jsx)(v.Qr,{name:"checklists",control:j,defaultValue:[],render:function(e){var n=e.field,t=n.onChange;n.value;return(0,M.jsx)(pt,{onAddCheckList:function(e){return t([].concat((0,Ee.Z)(g.checklists),[e]))}})}}),(0,M.jsx)(vt,{onRemoveCard:function(){return n((0,J.yJ)())}})]})]})})]}):null},Mt=function(e){var n=(0,o.I0)(),t=(0,o.v9)(J.o1);return(0,M.jsx)(Le.Z,{classes:{paper:"max-w-lg w-full m-8 sm:m-24"},onClose:function(e){return n((0,J.T2)())},open:t,children:(0,M.jsx)(Et,{})})},At=t(51824),Ft=t(70024),Vt=function(e){var n=(0,o.I0)(),t=(0,o.v9)(x.ZO),r=(0,v.cI)({mode:"onChange",defaultValues:t.settings}),a=r.watch,i=r.control,l=r.reset,c=a(),d=(0,u.Nr)((function(e){n((0,x.wN)(e))}),600);return(0,u.KW)((function(){!R.Z.isEmpty(c)&&null!==t&&void 0!==t&&t.settings&&(R.Z.isEqual(t.settings,c)||d({settings:c}))}),[t,c,d]),(0,s.useEffect)((function(){t&&l(t.settings)}),[t,l]),R.Z.isEmpty(c)?null:(0,M.jsxs)("div",{children:[(0,M.jsx)(xe.Z,{sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,j.$n)(e.palette.background.default,.4):(0,j.$n)(e.palette.background.default,.02)}},className:"border-b-1",children:(0,M.jsxs)(yt.Z,{className:"flex items-center px-4",children:[(0,M.jsx)(z.Z,{onClick:function(){return e.onSetSidebarOpen(!1)},color:"inherit",size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:x"})}),(0,M.jsx)(G.Z,{className:"px-4 font-medium text-16",color:"inherit",variant:"subtitle1",children:"Settings"})]})}),(0,M.jsxs)(Ve.Z,{className:"py-24",children:[(0,M.jsxs)(fe.ZP,{children:[(0,M.jsx)(ge.Z,{className:"min-w-40",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:photograph"})}),(0,M.jsx)(ye.Z,{primary:"Card Cover Images"}),(0,M.jsx)(At.Z,{children:(0,M.jsx)(v.Qr,{name:"cardCoverImages",control:i,render:function(e){var n=e.field,t=n.onChange,r=n.value;return(0,M.jsx)(Ft.Z,{onChange:function(e){t(e.target.checked)},checked:r})}})})]}),(0,M.jsxs)(fe.ZP,{children:[(0,M.jsx)(ge.Z,{className:"min-w-40",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:eye-off"})}),(0,M.jsx)(ye.Z,{primary:"Subscribe"}),(0,M.jsx)(At.Z,{children:(0,M.jsx)(v.Qr,{name:"subscribed",control:i,render:function(e){var n=e.field,t=n.onChange,r=n.value;return(0,M.jsx)(Ft.Z,{onChange:function(e){t(e.target.checked)},checked:r})}})})]}),(0,M.jsxs)(fe.ZP,{button:!0,onClick:function(){return n((0,x.L1)(t.id))},children:[(0,M.jsx)(ge.Z,{className:"min-w-40",children:(0,M.jsx)(L.Z,{style:{color:"red"},children:"heroicons-outline:trash"})}),(0,M.jsx)(ye.Z,{primary:"Delete Board",style:{color:"red"}})]})]})]})},Ot=t(5227),Bt=t(26529),Qt=P.Ry().shape({title:P.Z_().required("You must enter a title")}),qt=function(e){var n=(0,o.I0)(),t=(0,o.v9)(x.ZO),a=(0,s.useState)(!1),i=(0,r.Z)(a,2),l=i[0],c=i[1],d=(0,v.cI)({mode:"onChange",defaultValues:{title:t.title},resolver:(0,Z.X)(Qt)}),u=d.control,m=d.formState,h=d.handleSubmit,f=d.reset,j=m.isValid,b=m.dirtyFields;m.errors;function g(){c(!1)}return(0,s.useEffect)((function(){l||f({title:t.title})}),[l,f,t.title]),(0,M.jsx)("div",{className:"flex items-center min-w-0",children:l?(0,M.jsx)(S.Z,{onClickAway:g,children:(0,M.jsx)("form",{className:"flex w-full",onSubmit:h((function(e){n((0,x.wN)(e)),g()})),children:(0,M.jsx)(v.Qr,{name:"title",control:u,render:function(e){var n=e.field;return(0,M.jsx)(T.Z,(0,p.Z)((0,p.Z)({},n),{},{variant:"filled",margin:"none",autoFocus:!0,hiddenLabel:!0,InputProps:{endAdornment:(0,M.jsx)(D.Z,{position:"end",children:(0,M.jsx)(z.Z,{type:"submit",disabled:R.Z.isEmpty(b)||!j,size:"large",children:(0,M.jsx)(L.Z,{children:"heroicons-outline:check"})})})}}))}})})}):(0,M.jsxs)("div",{className:"flex items-center justify-center space-x-12",children:[(0,M.jsx)(G.Z,{className:"text-16  sm:text-24 md:text-32 font-600 tracking-tight leading-none cursor-pointer",onClick:function(e){e.stopPropagation(),c(!0)},color:"inherit",children:t.title}),(null===t||void 0===t?void 0:t.settings.subscribed)&&(0,M.jsx)(L.Z,{children:"heroicons-outline:eye"})]})})},Wt=function(e){var n=(0,o.I0)(),t=(0,o.v9)((function(e){return e.scrumboardApp.boards})).isCompactView;return(0,M.jsxs)("div",{className:"p-24 sm:p-32 w-full border-b-1 flex flex-col sm:flex-row items-center justify-between container",children:[(0,M.jsx)("div",{className:"flex items-center mb-12 sm:mb-0",children:(0,M.jsx)(qt,{})}),(0,M.jsxs)("div",{className:"flex items-center justify-end space-x-12",children:[(0,M.jsx)(w.Z,{className:"whitespace-nowrap px-10",onClick:function(){return n((0,Bt.Gw)(!t))},startIcon:(0,M.jsx)(L.Z,{className:"text-48",size:20,children:"material-outline:view_agenda"}),children:"View"}),(0,M.jsx)(w.Z,{className:"whitespace-nowrap px-10",component:Ot.Z,to:"/apps/kanbanboard/boards/",startIcon:(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:view-boards"}),children:"Boards"}),(0,M.jsx)(w.Z,{className:"whitespace-nowrap",variant:"contained",color:"secondary",onClick:function(){return e.onSetSidebarOpen(!0)},startIcon:(0,M.jsx)(L.Z,{size:20,children:"heroicons-outline:cog"}),children:"Settings"})]})]})},_t=(0,a.Z)("scrumboardApp",f.Z)((0,d.Z)((function(e){var n=(0,o.I0)(),t=(0,o.v9)(x.ZO),a=(0,o.v9)(E.PG),d=(0,h.Z)((function(e){return e.breakpoints.down("lg")})),f=(0,c.UO)(),p=(0,s.useState)(!1),v=(0,r.Z)(p,2),j=v[0],Z=v[1];return(0,u.KW)((function(){return n((0,x.SZ)(f.boardId)),n((0,E.XP)()),n((0,ne.g7)(f.boardId)),function(){n((0,x.iH)())}}),[n,f]),(0,u.KW)((function(){t&&(n((0,W.vm)(f.boardId)),n((0,ee.zG)(f.boardId)),n((0,E.yr)(f.boardId)))}),[n,f,t]),t?(0,M.jsxs)(M.Fragment,{children:[(0,M.jsx)(m.Z,{header:(0,M.jsx)(Wt,{onSetSidebarOpen:Z}),content:(0,M.jsx)(M.Fragment,{children:(null===t||void 0===t?void 0:t.lists)&&(0,M.jsx)("div",{className:"flex flex-1 overflow-x-auto overflow-y-hidden h-full",children:(0,M.jsx)(l.Z5,{onDragEnd:function(e){var t=e.source,r=e.destination;if(r&&(t.droppableId!==r.droppableId||t.index!==r.index)&&("list"===e.type&&n((0,x.aD)(e)),"card"===e.type)){var s=a.find((function(e){return e.id===t.droppableId})).chatType,l=a.find((function(e){return e.id===r.droppableId})).chatType;n("resolve"===s&&"active"===l?(0,i.PV)({message:'Resolved chat can not change status to "Active"',autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"right"},variant:"error"}):(0,x.aO)(e))}},children:(0,M.jsx)(l.bK,{droppableId:"list",type:"list",direction:"horizontal",children:function(e){return(0,M.jsxs)("div",{ref:e.innerRef,className:"flex py-16 md:py-24 px-8 md:px-12",children:[null===t||void 0===t?void 0:t.lists.map((function(e,n){return(0,M.jsx)(Re,{listId:e.id,cardIds:e.cards,index:n},e.id)})),e.placeholder,(0,M.jsx)(O,{})]})}})})})}),rightSidebarOpen:j,rightSidebarContent:(0,M.jsx)(Vt,{onSetSidebarOpen:Z}),rightSidebarOnClose:function(){return Z(!1)},scroll:d?"normal":"content",rightSidebarWidth:320}),(0,M.jsx)(Mt,{})]}):null})))}}]);