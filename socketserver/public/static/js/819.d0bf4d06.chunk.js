"use strict";(self.webpackChunkfoxconnect_app=self.webpackChunkfoxconnect_app||[]).push([[819],{53819:function(e,t,n){n.r(t),n.d(t,{default:function(){return pt}});var a=n(29439),r=n(4942),l=n(53996),s=n(23132),i=n(47313),c=n(22408),o=n(97890),d=n(88564),u=n(60211),m=n(38768),x=n(83061),f=n(1413),h=n(56993),p=n(32387),b=n(9506),j=n(61113),v=n(49709),Z=n(52769),y=n(98492),g=n(41872),w=n(17551),N=n(58631),C=n(57597),k=n(70091),S=n(48310),I=n(89840),O=n(63445),T=n(89600),M=n(64385),P=n(7918),A=n(25613),D=n(29809),B=n(25850),U=n(46417),R=function(e){var t=(0,o.s0)(),n=(0,c.I0)(),a=(0,o.UO)().channelId,r=(0,B.l)(),l=r.eventUpdate,s=(r.eventData,r.tabHasFocus,(0,c.v9)(A.H0));return(0,i.useEffect)((function(){n((0,A.Ky)())}),[n]),(0,i.useEffect)((function(){l&&l<new Date&&(console.log("\u2709\ufe0f [Teamchat] get Channel list."),n((0,A.Ky)({})))}),[n,l]),s?(0,U.jsx)(S.Z,{sx:{width:"100%",backgroundColor:"background.paper"},component:"nav",className:"p-0","aria-labelledby":"nested-list-subheader",children:s.map((function(e,r){return(0,U.jsx)(I.Z,{className:(0,x.Z)({highlightItem:e.channelId===a},"px-15 py-5 min-h-40 w-full"),component:P.fO,to:"".concat(e.channelId,"/#").concat(e.id),onClick:function(){t(e.channelId),n((0,D.mr)({channelId:a}))},children:(0,U.jsxs)("div",{className:"flex items-center flex-row w-full",children:[e.isPublic?(0,U.jsx)(h.Z,{className:"text-48",size:20,color:"action",children:"heroicons-outline:hashtag"}):(0,U.jsx)(h.Z,{className:"text-48",size:20,color:"action",children:"material-outline:lock"}),(0,U.jsxs)("div",{className:"flex flex-col grow pl-[1.5rem]",children:[(0,U.jsxs)("div",{className:"flex justify-between items-center",children:[(0,U.jsx)(j.Z,{variant:"subtitle1",className:"truncate font-600 text-[14px] max-w-200",color:"text.primary",children:e.name}),e.createdAt&&(0,U.jsx)(j.Z,{className:"whitespace-nowra font-medium text-12",color:"text.secondary",children:(new Date).getTime()-864e5<new Date(e.createdAt)?(0,T.Z)(new Date(e.createdAt),"p"):(0,T.Z)(new Date(e.createdAt),"dd/MM/yy")})]}),(0,U.jsxs)("div",{className:"flex justify-between",children:[(0,U.jsx)(M.Z,{children:(0,U.jsx)(j.Z,{variant:"body2",className:"truncate max-w-200",color:"text.secondary",dangerouslySetInnerHTML:{__html:O.Z.formatMentionToText(e.lastMessage)}})}),(0,U.jsx)("div",{className:"items-center flex flex-row space-x-6",children:Boolean(e.unread)&&(0,U.jsx)(b.Z,{sx:{backgroundColor:"secondary.main",color:"secondary.contrastText"},className:"flex items-center justify-center min-w-20 h-20 rounded-full font-medium text-10 text-center",children:e.unread})})]})]})]})},r)}))}):null},E=n(61193),z=function(e){(0,o.s0)();var t=(0,c.I0)(),n=(0,o.UO)().contactId,a=(0,B.l)(),r=a.eventUpdate,l=(a.eventData,a.tabHasFocus,(0,c.v9)(E.ES)),s=(0,c.v9)(N.dy);return(0,i.useEffect)((function(){t((0,E.Rf)())}),[t]),(0,i.useEffect)((function(){r&&r<new Date&&(console.log("\u2709\ufe0f [Teamchat] get direct message list."),t((0,E.Rf)({})))}),[t,r]),l?(0,U.jsx)(S.Z,{sx:{width:"100%",backgroundColor:"background.paper"},className:"p-0",component:"nav","aria-labelledby":"nested-list-subheader",children:l.filter((function(e){return e.userId!==s.uuid})).map((function(e,t){return(0,U.jsx)(I.Z,{className:(0,x.Z)({highlightItem:e.userId===n},"px-15 py-5 min-h-40 w-full"),component:P.fO,to:"dm/".concat(e.userId),children:(0,U.jsxs)("div",{className:"flex items-center flex-row w-full",children:[(0,U.jsx)(C.i6,{contact:e,className:"w-[3.5rem] h-[3.5rem]"}),(0,U.jsxs)("div",{className:"flex flex-col grow pl-[1.5rem]",children:[(0,U.jsxs)("div",{className:"flex justify-between items-center",children:[(0,U.jsx)(j.Z,{variant:"subtitle1",className:"truncate font-600 text-[14px] max-w-200",color:"text.primary",children:e.display}),e.createdAt&&(0,U.jsx)(j.Z,{className:"whitespace-nowra font-medium text-12",color:"text.secondary",children:(new Date).getTime()-864e5<new Date(e.createdAt)?(0,T.Z)(new Date(e.createdAt),"p"):(0,T.Z)(new Date(e.createdAt),"dd/MM/yy")})]}),(0,U.jsxs)("div",{className:"flex justify-between",children:[(0,U.jsx)(j.Z,{variant:"body2",className:"truncate max-w-200",color:"text.secondary",children:(0,U.jsx)(M.Z,{children:e.lastMessage})}),(0,U.jsx)("div",{className:"items-center flex flex-row space-x-6",children:Boolean(e.unread)&&(0,U.jsx)(b.Z,{sx:{backgroundColor:"secondary.main",color:"secondary.contrastText"},className:"flex items-center justify-center min-w-20 h-20 rounded-full font-medium text-10 text-center",children:e.unread})})]})]})]})},t)}))}):null},L=n(95139),$=function(e){var t=(0,o.s0)(),n=(0,c.I0)(),a=(0,B.l)(),r=a.eventUpdate,l=(a.eventData,a.tabHasFocus,(0,c.v9)(L.yA));return(0,i.useEffect)((function(){n((0,L.T5)())}),[n]),(0,i.useEffect)((function(){r&&r<new Date&&(console.log("\u2709\ufe0f [Teamchat] get HQ list."),n((0,L.T5)({})))}),[n,r]),l?(0,U.jsx)(S.Z,{sx:{backgroundColor:"background.paper"},className:"p-0 w-full",component:"nav","aria-labelledby":"nested-list-subheader",children:(0,U.jsx)(I.Z,{className:(0,x.Z)("px-15 py-5 min-h-40 w-full"),component:P.fO,to:"hq/#".concat(l.id),onClick:function(){t("hq"),n((0,L.Tw)()),n((0,L.T5)())},children:(0,U.jsx)("div",{className:"flex items-center flex-row w-full",children:(0,U.jsxs)("div",{className:"flex flex-col grow",children:[(0,U.jsxs)("div",{className:"flex justify-between items-center",children:[(0,U.jsx)(j.Z,{variant:"subtitle1",className:"truncate font-600 text-[14px]",color:"text.primary",children:"General Chat (Chat HQ)"}),l.createdAt&&(0,U.jsx)(j.Z,{className:"whitespace-nowra font-medium text-12",color:"text.secondary",children:(new Date).getTime()-864e5<new Date(l.createdAt)?(0,T.Z)(new Date(l.createdAt),"p"):(0,T.Z)(new Date(l.createdAt),"dd/MM/yy")})]}),(0,U.jsxs)("div",{className:"flex justify-between",children:[(0,U.jsx)(M.Z,{children:(0,U.jsx)(j.Z,{variant:"body2",className:"truncate max-w-200",color:"text.secondary",dangerouslySetInnerHTML:{__html:O.Z.formatMentionToText(l.lastMessage)}})}),(0,U.jsx)("div",{className:"items-center flex flex-row space-x-6",children:Boolean(l.unread)&&(0,U.jsx)(b.Z,{sx:{backgroundColor:"secondary.main",color:"secondary.contrastText"},className:"flex items-center justify-center min-w-20 h-20 rounded-full font-medium text-10 text-center",children:l.unread})})]})]})})})}):null},q=n(94469),H=n(33604),W=n(96467),_=n(60194),F=n(24631),V=n(1550),K=n(15103),Y=n(88797),Q=n(51405),X=n(10368),G=n(66212),J=n(63585),ee=n(4117),te=n(24193),ne=n(58970),ae=n(3463),re=n(75627),le=n(65520),se=ae.Ry().shape({channelName:ae.Z_().required("You must enter a Channel name")}),ie={channelName:"",channelDescription:"",isPublic:!1,channelMembers:[]},ce=function(e){var t=e.open,n=e.initialData,r=e.onClose,l=(0,c.I0)(),s=(0,o.UO)().channelId,d=(0,c.v9)(N.dy),u=(0,c.v9)(E.YN),m=(0,i.useState)([]),x=(0,a.Z)(m,2),h=x[0],p=x[1],b=(0,re.cI)({mode:"onChange",resolver:(0,le.X)(se),defaultValues:ie}),v=b.control,Z=b.watch,y=b.reset,g=b.handleSubmit,w=b.formState,C=(b.getValues,w.isValid),k=w.dirtyFields,I=w.errors,O=(Z(),Z("channelName")),T=Z("channelDescription"),M=Z("isPublic"),P=Z("channelMembers");return(0,i.useEffect)((function(){if(t){if(n)console.log("initialData",n),y(n);else if(u){var e=u.find((function(e){return e.userId===d.uuid}));y((0,f.Z)((0,f.Z)({},ie),{},{channelMembers:[e]}))}}else y(ie);return function(){y(ie)}}),[t,n,y,u]),(0,i.useEffect)((function(){return u?n&&n.channelMembers&&n.channelMembers.length>0?p(u.filter((function(e){return-1===n.channelMembers.map((function(e){return e.memberId})).indexOf(e.userId)}))):p(u.filter((function(e){return e.userId!==d.uuid}))):p([]),function(){p([])}}),[u,n]),(0,U.jsxs)(q.Z,{open:t,onClose:r,fullWidth:!0,maxWidth:"sm",children:[(0,U.jsx)(H.Z,{children:(0,U.jsx)(j.Z,{variant:"h6",children:n?"Edit a Channel":"Create a Channel"})}),(0,U.jsx)(W.Z,{children:(0,U.jsxs)(S.Z,{children:[(0,U.jsx)(_.ZP,{className:"p-8",children:(0,U.jsx)(re.Qr,{control:v,name:"channelName",render:function(e){var t,n=e.field;return(0,U.jsx)(F.Z,(0,f.Z)((0,f.Z)({},n),{},{label:"Channel Name",placeholder:"Channel Name",id:"channelName",error:!!I.channelName,helperText:null===I||void 0===I||null===(t=I.channelName)||void 0===t?void 0:t.message,variant:"outlined",fullWidth:!0,required:!0}))}})}),(0,U.jsx)(_.ZP,{className:"p-8",children:(0,U.jsx)(re.Qr,{control:v,name:"channelDescription",render:function(e){var t=e.field;return(0,U.jsx)(F.Z,(0,f.Z)((0,f.Z)({multiline:!0,fullWidth:!0,maxRows:4},t),{},{label:"Description",placeholder:"Description",id:"channelDescription",variant:"outlined"}))}})}),(0,U.jsx)(_.ZP,{className:"p-8",children:(0,U.jsx)(re.Qr,{control:v,name:"isPublic",render:function(e){var t=e.field;return(0,U.jsxs)(V.Z,{variant:"outlined",className:"w-full",children:[(0,U.jsx)(K.Z,{id:"select-public",children:"Privacy"}),(0,U.jsxs)(Y.Z,(0,f.Z)((0,f.Z)({},t),{},{labelId:"select-public",id:"select-public-fullwidth",label:"Privacy",fullWidth:!0,children:[(0,U.jsx)(Q.Z,{value:!0,children:"Public"}),(0,U.jsx)(Q.Z,{value:!1,children:"Private"})]}))]})}})}),(0,U.jsx)(_.ZP,{className:"p-8",children:(0,U.jsx)(re.Qr,{control:v,name:"channelMembers",render:function(e){var t=e.field;return(0,U.jsx)(X.Z,(0,f.Z)((0,f.Z)({},t),{},{multiple:!0,fullWidth:!0,id:"channelMembers",onChange:function(e,n){return t.onChange(n)},options:h,getOptionLabel:function(e){return e.display},renderTags:function(e,t){return e.map((function(e,a){return(0,U.jsx)("div",{className:"flex",children:(0,U.jsx)(G.Z,(0,f.Z)((0,f.Z)({label:e.display},t({index:a})),{},{avatar:(0,U.jsx)(J.Z,{alt:e.display,src:e.picture}),disabled:n?e.userId===n.memberId:e.userId===d.uuid}))},a)}))},renderInput:function(e){return(0,U.jsx)(F.Z,(0,f.Z)((0,f.Z)({},e),{},{label:"Members",variant:"outlined",placeholder:"Add members"}))}}))}})})]})}),(0,U.jsxs)(ee.Z,{className:"px-12",children:[(0,U.jsx)(te.Z,{onClick:r,children:"Cancel"}),(0,U.jsx)(te.Z,{disabled:ne.Z.isEmpty(k)||!C||P&&P.length<1,onClick:g((function(e){n?(l((0,A.hk)({channelId:s,channelName:O,channelDescription:T,isPublic:M,channelMembers:P})),y(ie),r()):(l((0,A.kj)({channelName:O,channelDescription:T,isPublic:M,channelMembers:P})),y(ie),r())})),children:n?"Update":"Create"})]})]})},oe=(0,d.ZP)((function(e){return(0,U.jsx)(Z.Z,(0,f.Z)({disableGutters:!0,elevation:0,square:!0},e))}))((function(e){var t=e.theme;return{border:"1px solid ".concat(t.palette.divider),"&:not(:last-child)":{borderBottom:0},"&:before":{display:"none"}}})),de=(0,d.ZP)((function(e){return(0,U.jsx)(y.Z,(0,f.Z)({expandIcon:(0,U.jsx)(p.Z,{sx:{fontSize:"0.9rem"}})},e))}))((function(e){var t=e.theme;return{backgroundColor:"dark"===t.palette.mode?"rgba(255, 255, 255, .05)":"rgba(0, 0, 0, .03)",flexDirection:"row-reverse","& .MuiAccordionSummary-expandIconWrapper.Mui-expanded":{transform:"rotate(90deg)"},"& .MuiAccordionSummary-content":{marginLeft:t.spacing(1)}}})),ue=(0,d.ZP)(g.Z)((function(e){var t=e.theme;return{padding:t.spacing(2),borderTop:"1px solid rgba(0, 0, 0, .125)","& .highlightItem":"dark"===t.palette.mode?{background:"rgba(0, 0, 0, 0.2)"}:{background:"rgba(0, 0, 0, 0.04)"},"& .MuiListItemButton-root:hover":{}}})),me=function(){var e=(0,i.useContext)(k.Z).setUserSidebarOpen;console.log("oooooooooooooooooooooooo");var t=(0,c.I0)(),n=(0,c.v9)(N.dy),r=(0,c.v9)((function(e){return e.teamchatApp.channels.isOpen})),l=(0,c.v9)((function(e){return e.teamchatApp.directMessageUsers.isOpen})),s=(0,i.useState)(!1),o=(0,a.Z)(s,2),d=o[0],u=o[1],m=function(e){return function(n,a){"channelPanel"===e?t((0,A.VJ)(a)):"directMessagePanel"===e&&t((0,E.VJ)(a))}};return(0,U.jsxs)("div",{className:"flex flex-col flex-auto h-full",children:[(0,U.jsx)(b.Z,{className:"p-16 border-b-1",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:(0,U.jsx)("div",{className:"flex justify-between items-center",children:n&&(0,U.jsxs)("div",{"aria-hidden":"true",role:"button",tabIndex:0,className:"flex flex-row w-full justify-start items-center cursor-pointer",onClick:function(){return e(!0)},children:[(0,U.jsx)(C.i6,{contact:n.data}),(0,U.jsxs)("div",{className:"flex flex-col mx-4 items-start",children:[(0,U.jsx)(j.Z,{className:"mx-4 font-medium",children:n.data.display}),(0,U.jsxs)(j.Z,{className:"mx-4 text-11 font-medium capitalize",color:"text.secondary",children:[n.role&&n.role.toString(),(!n.role||Array.isArray(n.role)&&0===n.role.length)&&"Guest"]})]})]})})}),(0,U.jsx)($,{}),(0,U.jsxs)(oe,{expanded:r,onChange:m("channelPanel"),children:[(0,U.jsx)(de,{"aria-controls":"channelPanel-content",id:"channelPanel-header",children:(0,U.jsx)(j.Z,{style:{fontWeight:600},children:"Channels"})}),(0,U.jsx)(v.Z,{title:"Create a Channel",children:(0,U.jsx)(h.Z,{className:"text-48 absolute right-12 top-12 cursor-pointer visible ",size:24,color:"action",onClick:function(){return u(!0)},children:"material-outline:add_circle"})}),(0,U.jsx)(ue,{className:"p-0",children:(0,U.jsx)(R,{})})]},"channels"),(0,U.jsxs)(oe,{expanded:l,onChange:m("directMessagePanel"),children:[(0,U.jsx)(de,{"aria-controls":"directMessagePanel-content",id:"directMessagePanel-header",children:(0,U.jsx)(j.Z,{style:{fontWeight:600},children:"Direct Messages"})}),(0,U.jsx)(ue,{className:"p-0",children:(0,U.jsx)(z,{})})]},"directMessages"),(0,U.jsx)(ce,{open:d,onClose:function(){u(!1)},initialData:null})]})},xe=n(47131),fe=n(9289),he=n(19536),pe=n(74165),be=n(15861),je=n(80827),ve=n(43850),Ze=n(31881),ye=n.n(Ze),ge=n(42939),we=(0,je.hg)("teamchatApp/directMessageUser/getContact",function(){var e=(0,be.Z)((0,pe.Z)().mark((function e(t,n){var a,r,l,s,i,c;return(0,pe.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,r=n.getState,e.prev=1,e.next=4,ge.Z.getAccessToken();case 4:return l=e.sent,s=r().organization.organizationId,e.next=8,ye().get("/api/".concat(s,"/teamChat/getContact/").concat(t),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(l)}});case 8:return i=e.sent,e.next=11,i.data;case 11:return c=e.sent,e.abrupt("return",c);case 15:return e.prev=15,e.t0=e.catch(1),a((0,ve.PV)({message:"Get Contact Info error",variant:"error"})),e.abrupt("return",null);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t,n){return e.apply(this,arguments)}}()),Ne=(0,je.oM)({name:"teamchatApp/directMessageUser",initialState:{},reducers:{},extraReducers:(0,r.Z)({},we.fulfilled,(function(e,t){return t.payload}))}),Ce=function(e){return e.teamchatApp.directMessageUser},ke=Ne.reducer,Se=function(e){var t=(0,c.I0)(),n=(0,o.UO)().contactId,a=(0,i.useContext)(k.Z),r=a.setContactSidebarOpen,l=a.setMemberSidebarOpen,s=(0,c.v9)(Ce);return(0,i.useEffect)((function(){n&&t(we(n))}),[n,t]),s?(0,U.jsxs)("div",{children:[(0,U.jsx)(b.Z,{className:"border-b-1",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:(0,U.jsxs)(fe.Z,{className:"flex items-center justify-between px-10",children:[(0,U.jsx)(j.Z,{className:"px-4 font-medium text-16",color:"inherit",variant:"subtitle1",children:"Contact info"}),(0,U.jsx)(xe.Z,{onClick:function(){r(!1),l(!1)},color:"inherit",size:"large",children:(0,U.jsx)(h.Z,{children:"heroicons-outline:x"})})]})}),(0,U.jsx)("div",{className:"relative flex flex-col flex-auto items-center p-12 pt-0 sm:p-24 sm:pt-0",children:(0,U.jsxs)("div",{className:"w-full max-w-3xl",children:[(0,U.jsx)("div",{className:"flex flex-auto items-end mt-12",children:(0,U.jsx)(J.Z,{sx:{borderWidth:4,borderStyle:"solid",borderColor:"background.paper",backgroundColor:"background.default",color:"text.secondary"},className:"w-96 h-96 text-48 font-bold",src:s.pictureURL,alt:s.display,children:s.display&&s.display.charAt(0)})}),(0,U.jsx)(j.Z,{className:"mt-12 text-xl font-bold truncate",children:s.display}),(0,U.jsx)("div",{className:"flex flex-wrap items-center mt-8",children:s.team&&(0,U.jsx)(G.Z,{label:s.team.name,className:"mr-12 mb-12",size:"small"},s.team.id)}),(0,U.jsx)(he.Z,{className:"my-24"}),(0,U.jsxs)("div",{className:"flex flex-col space-y-24",children:[s.firstname&&s.lastname&&(0,U.jsxs)("div",{className:"flex items-center",children:[(0,U.jsx)(h.Z,{children:"heroicons-outline:user"}),(0,U.jsx)("div",{className:"ml-24 leading-6",children:"".concat(s.firstname," ").concat(s.lastname)})]}),s.mobile&&(0,U.jsxs)("div",{className:"flex items-center",children:[(0,U.jsx)(h.Z,{children:"heroicons-outline:phone"}),(0,U.jsx)("div",{className:"ml-24 leading-6",children:s.mobile})]}),s.email&&(0,U.jsxs)("div",{className:"flex items-center",children:[(0,U.jsx)(h.Z,{children:"heroicons-outline:mail"}),(0,U.jsx)("div",{className:"ml-24 leading-6",children:s.email})]}),s.address&&(0,U.jsxs)("div",{className:"flex",children:[(0,U.jsx)(h.Z,{children:"heroicons-outline:location-marker"}),(0,U.jsx)("div",{className:"max-w-none ml-24 prose dark:prose-invert",dangerouslySetInnerHTML:{__html:s.address}})]})]})]})})]}):null},Ie=n(74748),Oe=n(83213),Te=n(38571),Me=function(e){var t=e.open,n=e.onClose,a=e.channelMember,r=(0,i.useContext)(k.Z).setMemberSidebarOpen,l=(0,c.I0)(),s=(0,c.v9)(N.dy);(0,c.v9)(E.YN);return a?(0,U.jsxs)(q.Z,{open:t,onClose:n,className:"create-channel-modal",fullWidth:!0,maxWidth:"sm",children:[(0,U.jsx)(H.Z,{children:(0,U.jsx)(j.Z,{variant:"h6",className:"pb-10",children:"Leave Channel?"})}),(0,U.jsx)(W.Z,{children:(0,U.jsx)(j.Z,{gutterBottom:!0,children:"When you leave a private channel, you'll no longer be able to see any of its messages. To To rejoin this channel later, you'll need to be added by channel member."})}),(0,U.jsxs)(ee.Z,{children:[(0,U.jsx)(te.Z,{onClick:n,children:"Cancel"}),(0,U.jsx)(te.Z,{variant:"text",style:{color:"red"},onClick:function(){l((0,Te.O0)({id:a.id,me:a.memberId===s.uuid})),r(!a.memberId===s.uuid),n()},children:"Leave channel"})]})]}):null},Pe=function(e){var t=(0,i.useContext)(k.Z),n=t.setContactSidebarOpen,a=t.setMemberSidebarOpen,r=e.open,l=e.onClose,s=e.channelId,d=(0,c.I0)(),u=(0,o.s0)();return s?(0,U.jsxs)(q.Z,{open:r,onClose:l,className:"create-channel-modal",fullWidth:!0,maxWidth:"sm",children:[(0,U.jsx)(H.Z,{children:(0,U.jsx)(j.Z,{variant:"h6",className:"pb-10",children:"Remove Channel?"})}),(0,U.jsx)(W.Z,{children:(0,U.jsx)(j.Z,{gutterBottom:!0,children:"When you remove a private channel, you'll no longer be able to see any of its messages. And this channel will disapear on channelList of everybody."})}),(0,U.jsxs)(ee.Z,{children:[(0,U.jsx)(te.Z,{onClick:l,children:"Cancel"}),(0,U.jsx)(te.Z,{variant:"text",className:"bg-[#FF110D] hover:bg-[#DF0B07] whitespace-nowrap px-10 text-[#ffffff]",onClick:function(){d((0,A.zz)({channelId:s})),l(),n(!1),a(!1),u("/apps/teamchat/")},children:"Remove"})]})]}):null},Ae=function(e){var t=(0,c.I0)(),n=(0,o.UO)().channelId,r=(0,i.useContext)(k.Z),l=r.setContactSidebarOpen,s=r.setMemberSidebarOpen,d=(0,c.v9)(Te.Kw),u=(0,c.v9)(D.QE),m=(0,c.v9)(N.dy),x=(0,i.useState)(!1),f=(0,a.Z)(x,2),p=f[0],Z=f[1],y=(0,i.useState)(null),g=(0,a.Z)(y,2),O=g[0],T=g[1],M=(0,i.useState)(!1),P=(0,a.Z)(M,2),A=P[0],B=P[1],R=(0,i.useState)(null),E=(0,a.Z)(R,2),z=E[0],L=E[1],$=(0,i.useState)(!1),q=(0,a.Z)($,2),H=q[0],W=q[1],_=(0,i.useState)(null),F=(0,a.Z)(_,2),V=F[0],K=F[1];return(0,i.useEffect)((function(){n&&(t((0,Te.L)({channelId:n})),t((0,D.mr)({channelId:n})))}),[n,t]),d?(0,U.jsxs)("div",{className:"flex flex-col flex-auto h-[calc(100vh-6.4rem)] justify-between",children:[(0,U.jsx)(b.Z,{className:"border-b-1 min-h-64",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:(0,U.jsxs)(fe.Z,{className:"flex items-center justify-between px-10",children:[(0,U.jsxs)("div",{className:"flex flex-row justify-start space-x-5 items-center",children:[(0,U.jsx)(j.Z,{className:"px-4 font-medium text-16",color:"inherit",variant:"subtitle1",children:"Channel members"}),(0,U.jsx)(v.Z,{title:"Edit a Channel",children:(0,U.jsx)(xe.Z,{onClick:function(){Z(!0),T({channelName:u.name||"",channelDescription:u.description||"",isPublic:u.isPublic,channelMembers:d})},color:"inherit",size:"large",className:"p-10",children:(0,U.jsx)(h.Z,{className:"text-48",size:20,color:"action",children:"material-outline:edit"})})})]}),(0,U.jsx)(xe.Z,{onClick:function(){l(!1),s(!1)},color:"inherit",size:"large",children:(0,U.jsx)(h.Z,{children:"heroicons-outline:x"})})]})}),(0,U.jsx)("div",{className:"relative flex flex-col flex-auto items-center p-0",children:(0,U.jsx)("div",{className:"w-full max-w-3xl overflow-y-auto overscroll-contain",children:(0,U.jsx)(S.Z,{sx:{width:"100%",bgcolor:"background.paper"},component:"nav",className:"p-0 w-full","aria-labelledby":"nested-list-subheader",children:null===d||void 0===d?void 0:d.map((function(e,n){return(0,U.jsxs)(I.Z,{className:"py-15 px-20 w-full",children:[(0,U.jsx)(Ie.Z,{children:(0,U.jsx)(C.i6,{contact:e})}),(0,U.jsx)(Oe.Z,{primary:e.display}),e.memberId!==m.uuid&&(0,U.jsx)(te.Z,{variant:"text",style:{paddingRight:"10px",color:"blue"},onClick:function(){t((0,Te.O0)({id:e.id,me:e.memberId===m.uuid}))},children:"Remove"})]},n)}))})})}),(0,U.jsx)(b.Z,{className:"border-t-1 min-h-80 flex flex-row items-center justify-center sm:justify-end px-0 sm:px-20",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:m.uuid===u.createdBy.id?(0,U.jsx)(te.Z,{variant:"text",sx:{color:"red"},onClick:function(){W(!0),K(n)},children:"Remove channel"}):(0,U.jsx)(te.Z,{variant:"text",sx:{color:"red"},onClick:function(){B(!0),L(d.find((function(e){return e.memberId===m.uuid})))},children:"Leave channel"})}),(0,U.jsx)(ce,{open:p,onClose:function(){Z(!1),T(null)},initialData:O}),(0,U.jsx)(Me,{open:A,onClose:function(){B(!1),L(null)},channelMember:z}),(0,U.jsx)(Pe,{open:H,onClose:function(){W(!1),K(null)},channelId:V})]}):null},De=n(82295),Be=n(92550),Ue=n(9619),Re=n(69649),Ee=n(16747),ze=n(83779),Le=n(53444),$e=n(38740),qe=n(90336),He=(0,d.ZP)("div")((function(e){var t=e.theme;return{"&.contact":{"& .bubble":{backgroundColor:"#64748B",color:t.palette.secondary.contrastText}},"&.me":{"& .bubble":{backgroundColor:"#2559C7",color:t.palette.primary.contrastText}}}})),We=function(e){var t=(0,c.I0)(),n=e.messages,a=(0,o.UO)(),r=a.channelId,l=a.contactId,s=(0,i.useContext)(k.Z),d=s.setContactSidebarOpen,u=s.setMemberSidebarOpen,m=s.setHqPinSidebarOpen,f=s.setCmPinSidebarOpen,p=s.setDmPinSidebarOpen,v=s.setThreadSidebarOpen,Z=s.setHqThreadsSidebarOpen,y=s.setCmThreadsSidebarOpen,g=s.setDmThreadsSidebarOpen,C=s.setThreadsSidebarOpen,S=s.setPinsSidebarOpen,I=(0,c.v9)(N.dy),O=(0,i.useRef)(null),T=[];T=n.filter((function(e){return!e.isDelete&&e.isPin})).sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()}));var M=(0,Re.RH)((function(e){return e.breakpoints.down("sm")}));return(0,U.jsxs)("div",{className:(0,x.Z)(M?"w-[85vw]":"w-full","flex flex-col h-screen sm:h-[calc(100vh-64px)] overflow-hidden"),children:[(0,U.jsx)(b.Z,{className:"border-b-1 w-full flex flex-col",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:(0,U.jsxs)(fe.Z,{className:"flex items-center justify-between px-10",children:[(0,U.jsx)("div",{className:"flex flex-row justify-start space-x-5 items-center",children:(0,U.jsx)(j.Z,{className:"px-4 font-medium text-16",variant:"subtitle1",children:"Pins"})}),(0,U.jsx)(xe.Z,{onClick:function(){d(!1),u(!1),m(!1),f(!1),p(!1),v(!1),Z(!1),y(!1),g(!1),C(!1),S(!1)},color:"inherit",size:"large",children:(0,U.jsx)(h.Z,{children:"heroicons-outline:x"})})]})}),(0,U.jsx)("div",{className:"flex flex-col overflow-y-scroll",children:(0,U.jsx)(Be.Z,{ref:O,className:"flex flex-1 flex-col",option:{suppressScrollX:!0,wheelPropagation:!1},children:(0,U.jsx)("div",{className:"flex flex-col w-full py-10 px-[1.5rem]",children:T.map((function(e,n){return(0,U.jsx)(He,{className:(0,x.Z)(e.createdBy?e.createdBy.id===I.uuid?"me":"contact":e.sendUser.id===I.uuid?"me":"contact"),children:(0,U.jsxs)(De.Z,{className:"w-full rounded-10 shadow flex flex-col justify-between p-10 mb-16 cursor-pointer",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:[(0,U.jsx)("div",{className:"flex justify-end items-center",children:(0,U.jsx)(xe.Z,{onClick:function(){t(r?(0,D.Ys)({message:{id:e.id,isPin:!1},channelId:r}):l?(0,qe.y3)({message:{id:e.id,isPin:!1},contactId:l}):(0,L.oU)({id:e.id,isPin:!1}))},color:"inherit",size:"small",children:(0,U.jsx)(h.Z,{size:15,className:"min-w-[15px] min-h-[15px]",children:"heroicons-outline:x"})})}),(0,U.jsxs)("a",{className:"bubble shadow flex flex-col w-full p-10 rounded-20",style:{textDecoration:"none"},href:(a=e.id,r?"apps/teamChat/".concat(r,"/#").concat(a):l?"apps/teamChat/dm/".concat(l,"/#").concat(a):"apps/teamChat/hq/#".concat(a)),"aria-hidden":"true",children:[e.type&&"text"===e.type&&(0,U.jsx)(Ee.Z,{item:e}),e.type&&"image"===e.type&&(0,U.jsx)(ze.Z,{item:e}),e.type&&"video"===e.type&&(0,U.jsx)(Le.Z,{item:e}),e.type&&"file"===e.type&&(0,U.jsx)($e.Z,{item:e})]}),(0,U.jsxs)(j.Z,{className:"time text-11 mt-5 ml-5",color:"textSecondary",children:[e.createdBy?(0,U.jsxs)("b",{children:[e.createdBy.display,"\xa0\xa0"]}):(0,U.jsxs)("b",{children:[e.sendUser.display,"\xa0\xa0"]}),e.createdAt?(0,Ue.Z)(new Date(e.createdAt),{addSuffix:!1}):null]})]})},n);var a}))})})})]})},_e=function(e){var t=(0,c.v9)((function(e){return e.teamchatApp.hq})).messages;return(0,U.jsx)(We,{messages:t})},Fe=function(e){var t=(0,c.v9)((function(e){return e.teamchatApp.channel})).messages;return(0,U.jsx)(We,{messages:t})},Ve=function(e){var t=(0,c.v9)((function(e){return e.teamchatApp.directMessage})).messages;return(0,U.jsx)(We,{messages:t})},Ke=n(9038),Ye=n(12458),Qe=(0,Ke.UY)({channel:D.ZP,channels:A.ZP,channelMember:Te.ZP,directMessage:qe.ZP,directMessageUser:ke,directMessageUsers:E.ZP,hq:L.ZP,thread:Ye.ZP}),Xe=n(83929),Ge=n(5178),Je=n(74268),et=n(54299),tt=n(16210),nt=function(e){var t=(0,c.I0)(),n=(0,c.v9)(N.dy),a=(0,i.useContext)(k.Z).setUserSidebarOpen,r=(0,re.cI)({defaultValues:n.data}),l=r.control,s=r.handleSubmit,o=r.watch,d=r.reset,u=r.formState,m=u.isValid,x=u.dirtyFields,p=(u.errors,o());return(0,i.useEffect)((function(){d(n.data)}),[d,n]),ne.Z.isEmpty(p)?null:(0,U.jsxs)("div",{className:"flex flex-col flex-auto h-full",children:[(0,U.jsx)(b.Z,{className:"border-b-1",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:(0,U.jsxs)(fe.Z,{className:"flex items-center px-24",children:[(0,U.jsx)(xe.Z,{onClick:function(){return a(!1)},color:"inherit",size:"small",children:(0,U.jsx)(h.Z,{className:"text-48",size:16,children:"heroicons-outline:arrow-left"})}),(0,U.jsx)("div",{className:"flex flex-row justify-start space-x-5 items-center",children:(0,U.jsx)(j.Z,{className:"px-4 font-medium text-16",variant:"subtitle1",children:"Profile"})})]})}),(0,U.jsx)("div",{className:"flex flex-col justify-center items-center py-32",children:(0,U.jsx)(C.i6,{className:"w-160 h-160 text-64",contact:n.data})}),(0,U.jsxs)("form",{onSubmit:s((function(e){t((0,tt.Ld)(e))})),className:"flex flex-col h-full",children:[(0,U.jsx)("div",{className:"flex-1 p-24",children:(0,U.jsxs)(V.Z,{component:"fieldset",className:"w-full mb-16",children:[(0,U.jsx)(Ge.Z,{component:"legend",children:"Status"}),(0,U.jsx)(re.Qr,{name:"isOnline",control:l,render:function(e){var t=e.field;return(0,U.jsx)(et.Z,(0,f.Z)((0,f.Z)({},t),{},{"aria-label":"Status",name:"status",children:C.t3.map((function(e){return(0,U.jsx)(Xe.Z,{value:e.value,control:(0,U.jsx)(Je.Z,{}),label:(0,U.jsxs)("div",{className:"flex items-center",children:[(0,U.jsx)(b.Z,{className:"w-8 h-8 rounded-full",sx:{backgroundColor:e.color}}),(0,U.jsx)("span",{className:"mx-8",children:e.title})]})},e.value)}))}))}})]})}),(0,U.jsxs)(b.Z,{className:"border-t-1 min-h-80 flex flex-row items-center justify-center sm:justify-end px-0 sm:px-20",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:[(0,U.jsx)(te.Z,{onClick:function(){return a(!1)},children:"Cancel"}),(0,U.jsx)(te.Z,{type:"submit",className:"mx-8",variant:"contained",color:"secondary",disabled:ne.Z.isEmpty(x)||!m,children:"Save"})]})]})]})},at=n(52500),rt=n(85281),lt=(0,d.ZP)("div")((function(e){var t=e.theme;return{"& .text-field-channel":"dark"===t.palette.mode&&{background:"rgba(0, 0, 0, 0.2) !important"},"&.contact":{justifyContent:"flex-start","& .hiddenAvatar":{visibility:"hidden"},"& .bubble":{backgroundColor:"#64748B",color:t.palette.secondary.contrastText,borderTopLeftRadius:5,borderBottomLeftRadius:5,borderTopRightRadius:20,borderBottomRightRadius:20,"& .time":{marginLeft:12}},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:20}},"&.last-of-group":{"& .bubble":{borderBottomLeftRadius:20}}},"&.me":{flexDirection:"row-reverse",justifyContent:"flex-start","& .MuiAvatar-root":{display:"none"},"& .bubble":{backgroundColor:"#2559C7",color:t.palette.primary.contrastText,borderRadius:10,"& .time":{justifyContent:"flex-end"}},"&.first-of-group":{"& .bubble":{borderRadius:10}},"&.last-of-group":{"& .bubble":{borderRadius:10}}},"&.first-of-group":{"& .bubble":{borderTopLeftRadius:20,paddingTop:13}},"&.last-of-group":{"& .bubble":{borderBottomLeftRadius:20,paddingBottom:13,marginBottom:20,"& .time":{display:"flex"}}}}})),st=function(e){var t=(0,c.I0)(),n=(0,o.UO)(),r=n.channelId,l=n.contactId,s=(0,i.useContext)(k.Z),d=s.setHqPinSidebarOpen,u=s.setCmPinSidebarOpen,m=s.setDmPinSidebarOpen,p=s.setContactSidebarOpen,v=s.setMemberSidebarOpen,Z=s.setThreadSidebarOpen,y=(0,c.v9)((function(e){return e.teamchatApp.thread})),g=y.messages,S=y.id,I=y.basedata,T=y.basecreatedAt,M=y.basecreatedBy,P=y.basetype,A=(0,c.v9)(N.dy),D=(0,c.v9)(E.YN),B=(0,c.v9)(Te.Kw),R=(0,i.useState)((function(){return at.EditorState.createEmpty()})),z=(0,a.Z)(R,2),L=z[0],$=z[1],q=(0,i.useState)(!1),H=(0,a.Z)(q,2),W=H[0],_=H[1],F=(0,i.useRef)(null),V=(0,i.useMemo)((function(){return r?B?B.map((function(e){return(0,f.Z)((0,f.Z)({},e),{},{link:e.email,name:e.display})})):[]:D?D.map((function(e){return(0,f.Z)((0,f.Z)({},e),{},{link:e.email,name:e.display})})):[]}),[D,B,r]);function K(e,t){return 0===t||g[t-1]&&g[t-1].createdBy.id!==e.createdBy.id}function Y(e,t){return t===g.length-1||g[t+1]&&g[t+1].createdBy.id!==e.createdBy.id}function Q(e){var n;e.preventDefault(),n=r?"channel":l?"direct":"hq";var a=L.getCurrentContent(),s=O.Z.formatTextToMention(a.getPlainText(),(0,at.convertToRaw)(a).entityMap);""!==s.trim()&&(console.log("threadType ",n),t((0,Ye.bG)({threadId:S,threadType:n,messageText:s,channelId:r,contactId:l})).then((function(){$(at.EditorState.createEmpty())})),F.current&&F.current.scrollTo({top:F.current.scrollHeight,behavior:"smooth"}))}(0,i.useEffect)((function(){t((0,Ye.P)({threadId:S})),p(!1)}),[t,p,S]);var X=(0,Re.RH)((function(e){return e.breakpoints.down("sm")}));return S&&g?(0,U.jsxs)("div",{className:(0,x.Z)(X?"w-[85vw]":"w-full","flex flex-col flex-1 h-screen sm:h-[calc(100vh-64px)] overflow-hidden"),children:[(0,U.jsx)("div",{className:"flex flex-col w-full left-0 right-0 top-0 z-30",children:(0,U.jsx)(b.Z,{className:"border-b-1 w-full flex flex-col",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:(0,U.jsxs)(fe.Z,{className:"flex items-center justify-between px-10 w-full",children:[(0,U.jsx)("div",{className:"flex flex-row justify-start space-x-5 items-center",children:(0,U.jsx)(j.Z,{className:"px-4 font-medium text-16",variant:"subtitle1",children:"Thread"})}),(0,U.jsx)(xe.Z,{onClick:function(){Z(!1),v(!1),d(!1),u(!1),m(!1)},color:"inherit",size:"large",children:(0,U.jsx)(h.Z,{children:"heroicons-outline:x"})})]})})}),(0,U.jsx)("div",{className:"flex flex-auto min-h-0",children:(0,U.jsxs)("div",{className:"flex flex-1 z-10 flex-col max-w-[400px]",children:[(0,U.jsxs)(Be.Z,{ref:F,className:"flex flex-1 flex-col overflow-y-scroll",children:[(0,U.jsx)("div",{className:"flex flex-col pt-[1.5rem] px-12 pb-[3rem] bg-white",children:(0,U.jsxs)(lt,{className:(0,x.Z)("flex grow-0 shrink-0 items-start justify-end relative pb-4 chat-row",M.id===A.uuid?"me":"contact"),children:[(0,U.jsx)(J.Z,{src:M.pictureURL,alt:M.display,className:(0,x.Z)("w-[3rem] h-[3rem] mr-10")}),(0,U.jsxs)("div",{className:(0,x.Z)("bubble flex relative items-center justify-center p-10 max-w-full shadow text-field-channel"),children:["text"===P&&(0,U.jsx)(Ee.Z,{item:I}),"image"===P&&(0,U.jsx)(ze.Z,{item:I}),"video"===P&&(0,U.jsx)(Le.Z,{item:I}),"file"===P&&(0,U.jsx)($e.Z,{item:I}),(0,U.jsxs)(j.Z,{className:"time absolute flex w-full text-11 mt-8 -mb-24 ltr:left-0 rtl:right-0 bottom-0 whitespace-nowrap",color:"textSecondary",children:[M?(0,U.jsxs)("b",{children:[M.display,"\xa0\xa0"]}):null,T?(0,Ue.Z)(new Date(T),{addSuffix:!1}):null]})]})]})}),(0,U.jsx)(he.Z,{className:"border-[#E5E5E5]"}),g&&g.length>0&&(0,U.jsx)("div",{className:"flex flex-col pt-[1.5rem] px-12 pb-[3rem]",children:g.map((function(e,t){JSON.parse(e.data);return(0,U.jsxs)(lt,{className:(0,x.Z)("flex grow-0 shrink-0 items-start justify-end relative pb-4 chat-row",e.createdBy.id===A.uuid?"me":"contact",{"first-of-group":K(e,t)},{"last-of-group":Y(e,t)},t+1===g.length&&"pb-96"),children:[(0,U.jsx)(J.Z,{src:e.createdBy.pictureURL,alt:e.createdBy.display,className:(0,x.Z)("w-[3rem] h-[3rem] mr-10",{hiddenAvatar:!K(e,t)})}),(0,U.jsxs)("div",{className:(0,x.Z)("bubble flex relative items-center justify-center p-10 max-w-full shadow text-field-channel"),children:[e.type&&"text"===e.type&&(0,U.jsx)(Ee.Z,{item:e}),e.type&&"image"===e.type&&(0,U.jsx)(ze.Z,{item:e}),e.type&&"video"===e.type&&(0,U.jsx)(Le.Z,{item:e}),e.type&&"file"===e.type&&(0,U.jsx)($e.Z,{item:e}),(0,U.jsxs)(j.Z,{className:"time absolute hidden w-full text-11 mt-8 -mb-24 ltr:left-0 rtl:right-0 bottom-0 whitespace-nowrap",color:"textSecondary",children:[Y(e,t)&&e.createdBy?(0,U.jsxs)("b",{children:[e.createdBy.display,"\xa0\xa0"]}):null,e.createdAt?(0,Ue.Z)(new Date(e.createdAt),{addSuffix:!1}):null]})]})]},t)}))})]}),(0,U.jsx)(De.Z,{square:!0,component:"form",autoComplete:"off",onSubmit:Q,className:"sticky border-t-1 bottom-0 right-0 left-0 py-16 px-16",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},ref:function(e){e},children:(0,U.jsxs)("div",{className:"flex items-center relative",children:[W?(0,U.jsx)(rt.Z,{color:"inherit",size:20}):(0,U.jsxs)(xe.Z,{size:"large",component:"label",children:[(0,U.jsx)("input",{hidden:!0,accept:"image/gif, image/png, image/jpeg, video/mp4, application/pdf, application/msword, application/vnd.ms-excel,application/vnd.ms-powerpoint, application/vnd.openxmlformats-officedocument.wordprocessingml.document, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.openxmlformats-officedocument.presentationml.slideshow, application/vnd.openxmlformats-officedocument.presentationml.presentation",onChange:function(e){_(!0);var n=new FormData;n.append("file",e.target.files[0]),t((0,Ye.x5)({formData:n,threadId:S,channelId:r,contactId:l})).then((function(){setTimeout((function(){_(!1)}),4e3)}))},type:"file"}),(0,U.jsx)(h.Z,{children:"heroicons-outline:paper-clip"})]}),(0,U.jsx)(C.sU,{editorState:L,setEditorState:$,onMessageSubmit:Q,options:V}),(0,U.jsx)(xe.Z,{className:"",onClick:Q,size:"large",children:(0,U.jsx)(h.Z,{className:"rotate-90",color:"action",children:"heroicons-outline:paper-airplane"})})]})})]})})]}):null},it=n(63738),ct=n(76017),ot=(0,d.ZP)("div")((function(e){var t=e.theme;return{"&.contact":{"& .bubble":{backgroundColor:"#64748B",color:t.palette.secondary.contrastText}},"&.me":{"& .bubble":{backgroundColor:"#2559C7",color:t.palette.primary.contrastText}}}})),dt=function(e){var t=e.threadsMessage,n=e.loginUser,a=e.replies,r=(0,c.I0)(),l=(0,o.UO)(),s=l.channelId,d=l.contactId,u=(0,i.useRef)(null),m=(0,i.useContext)(k.Z),f=m.setContactSidebarOpen,p=m.setMemberSidebarOpen,Z=m.setHqPinSidebarOpen,y=m.setCmPinSidebarOpen,g=m.setDmPinSidebarOpen,N=m.setThreadSidebarOpen,C=m.setHqThreadsSidebarOpen,S=m.setCmThreadsSidebarOpen,I=m.setDmThreadsSidebarOpen,T=m.setThreadsSidebarOpen,M=m.setPinsSidebarOpen,P=(0,Re.RH)((function(e){return e.breakpoints.down("sm")}));return(0,U.jsxs)("div",{className:(0,x.Z)(P?"w-[85vw]":"w-full","flex flex-col h-screen sm:h-[calc(100vh-64px)] overflow-hidden"),children:[(0,U.jsx)(b.Z,{className:"border-b-1 w-full flex flex-col",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:(0,U.jsxs)(fe.Z,{className:"flex items-center justify-between px-10",children:[(0,U.jsx)("div",{className:"flex flex-row justify-start space-x-5 items-center",children:(0,U.jsx)(j.Z,{className:"px-4 font-medium text-16",variant:"subtitle1",children:"Threads"})}),(0,U.jsx)(xe.Z,{onClick:function(){f(!1),p(!1),Z(!1),y(!1),g(!1),N(!1),C(!1),S(!1),I(!1),T(!1),M(!1)},color:"inherit",size:"large",children:(0,U.jsx)(h.Z,{children:"heroicons-outline:x"})})]})}),(0,U.jsx)("div",{className:"flex flex-col overflow-y-scroll",children:(0,U.jsx)(Be.Z,{ref:u,className:"flex flex-1 flex-col",option:{suppressScrollX:!0,wheelPropagation:!1},children:(0,U.jsx)("div",{className:"flex flex-col w-full py-10 px-[1.5rem]",children:t.sort((function(e,t){return new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime()})).map((function(e,t){return e.type&&"text"===e.type?O.Z.formatMentionToText(JSON.parse(e.data).text):"file"===e.type?"File":"image"===e.type?"Image":"Unknown type",(0,U.jsx)(ot,{className:(0,x.Z)(e.createdBy?e.createdBy.id===n.uuid?"me":"contact":e.sendUser.id===n.uuid?"me":"contact"),children:(0,U.jsxs)(De.Z,{className:"w-full rounded-10 shadow flex flex-col justify-between p-10 mb-16 cursor-pointer",sx:{backgroundColor:function(e){return"light"===e.palette.mode?(0,w.$n)(e.palette.background.default,.4):(0,w.$n)(e.palette.background.default,.02)}},children:[(0,U.jsx)("div",{className:"flex justify-end items-center",children:(0,U.jsx)(xe.Z,{color:"inherit",size:"small",onClick:function(){return t=e.id,void r(s?(0,D.rS)({message:{id:t,isReply:!1},channelId:s}):d?(0,qe.y3)({message:{id:t,isReply:!1},contactId:d}):(0,L.cK)({id:t,isReply:!1}));var t},children:(0,U.jsx)(h.Z,{size:15,className:"min-w-[15px] min-h-[15px]",children:"heroicons-outline:x"})})}),(0,U.jsxs)("div",{className:"pt-5 flex space-x-5",onClick:function(){r((0,Ye.DX)({messageText:e,createdBy:e.createdBy?e.createdBy:e.sendUser,createdAt:e.createdAt,threadId:e.id,type:e.type,channelId:s,contactId:d})),N(!0),f(!1),p(!1),Z(!1),y(!1),g(!1),C(!1),S(!1),I(!1)},"aria-hidden":"true",children:[(0,U.jsx)(J.Z,{src:e.createdBy?e.createdBy.pictureURL:e.sendUser.pictureURL,alt:e.createdBy?e.createdBy.display:e.sendUser.display,className:"w-24 h-24",children:e.createdBy?e.createdBy.display.charAt(0):e.sendUser.display.charAt(0)}),(0,U.jsxs)("div",{className:"flex flex-col w-full",children:[(0,U.jsxs)("div",{className:"bubble shadow flex w-full p-10 rounded-12 line-clamp-2",children:[e.type&&"text"===e.type&&(0,U.jsx)(Ee.Z,{item:e}),e.type&&"image"===e.type&&(0,U.jsx)(ze.Z,{item:e}),e.type&&"video"===e.type&&(0,U.jsx)(Le.Z,{item:e}),e.type&&"file"===e.type&&(0,U.jsx)($e.Z,{item:e})]}),(0,U.jsxs)("div",{className:"flex justify-between items-center pt-5",children:[(0,U.jsxs)("div",{className:"flex space-x-5 items-center",children:[(0,U.jsx)(h.Z,{className:"min-w-[16px] min-h-[16px]",size:16,color:"action",children:"material-outline:subdirectory_arrow_right"}),(0,U.jsx)(j.Z,{className:"flex text-12 text-blue-600",children:1!==a[e.id].length?"".concat(a[e.id].length," replies"):"1 reply"}),(0,U.jsx)(ct.Z,{max:4,classes:{avatar:"w-20 h-20 text-10 -ml-2"},children:O.Z.removeDuplicateMembers(a[e.id]).map((function(e){return(0,U.jsx)(v.Z,{title:e.createdBy.display,children:(0,U.jsx)(J.Z,{src:e.createdBy.pictureURL,alt:e.createdBy.display,children:e.createdBy.display.charAt(0)})},e.createdBy.id)}))})]}),(0,U.jsx)(j.Z,{className:"text-11",color:"textSecondary",children:e.createdAt&&"".concat((0,Ue.Z)(new Date(e.createdAt),{addSuffix:!1}))})]})]})]})]})},t)}))})})})]})},ut=((0,d.ZP)("div")((function(e){var t=e.theme;return{"&.contact":{"& .bubble":{backgroundColor:t.palette.secondary.light,color:t.palette.secondary.contrastText}},"&.me":{"& .bubble":{backgroundColor:t.palette.primary.light,color:t.palette.primary.contrastText}}}})),function(e){var t=(0,c.I0)(),n=(0,c.v9)(Ye.Y2),a=(0,c.v9)(N.dy),r=(0,c.v9)((function(e){return e.teamchatApp.hq})).messages,l=(0,i.useMemo)((function(){return r.filter((function(e){return!e.isDelete&&e.isReply}))}),[r]),s=(0,i.useMemo)((function(){return l.map((function(e){return e.id}))}),[l]);return(0,i.useEffect)((function(){s&&t((0,Ye.qX)({threadIds:s}))}),[r]),l&&n?(0,U.jsx)(dt,{threadsMessage:l,loginUser:a,replies:n}):(0,U.jsx)("div",{className:"flex w-full h-full items-center",children:(0,U.jsx)(it.Z,{})})}),mt=((0,d.ZP)("div")((function(e){var t=e.theme;return{"&.contact":{"& .bubble":{backgroundColor:t.palette.secondary.light,color:t.palette.secondary.contrastText}},"&.me":{"& .bubble":{backgroundColor:t.palette.primary.light,color:t.palette.primary.contrastText}}}})),function(e){var t=(0,c.I0)(),n=(0,c.v9)(Ye.Y2),a=(0,c.v9)(Ye.ym),r=(0,c.v9)(N.dy),l=(0,c.v9)((function(e){return e.teamchatApp.channel})).messages,s=(0,i.useMemo)((function(){return l.filter((function(e){return!e.isDelete&&e.isReply}))}),[l]),o=(0,i.useMemo)((function(){return s.map((function(e){return e.id}))}),[s]);return(0,i.useEffect)((function(){o&&t((0,Ye.qX)({threadIds:o}))}),[l]),s&&n&&a?(0,U.jsx)(dt,{threadsMessage:s,loginUser:r,replies:n,members:a}):(0,U.jsx)("div",{className:"flex w-full h-full items-center",children:(0,U.jsx)(it.Z,{})})}),xt=((0,d.ZP)("div")((function(e){var t=e.theme;return{"&.contact":{"& .bubble":{backgroundColor:t.palette.secondary.light,color:t.palette.secondary.contrastText}},"&.me":{"& .bubble":{backgroundColor:t.palette.primary.light,color:t.palette.primary.contrastText}}}})),function(e){var t=(0,c.I0)(),n=(0,c.v9)(Ye.Y2),a=(0,c.v9)(Ye.ym),r=(0,c.v9)(N.dy),l=(0,c.v9)((function(e){return e.teamchatApp.directMessage})).messages,s=(0,i.useMemo)((function(){return l.filter((function(e){return!e.isDelete&&e.isReply}))}),[l]),o=(0,i.useMemo)((function(){return s.map((function(e){return e.id}))}),[s]);return(0,i.useEffect)((function(){o&&t((0,Ye.qX)({threadIds:o}))}),[l]),s&&n&&a?(0,U.jsx)(dt,{threadsMessage:s,loginUser:r,replies:n,members:a}):(0,U.jsx)("div",{className:"flex w-full h-full items-center",children:(0,U.jsx)(it.Z,{})})}),ft=(0,d.ZP)(l.Z)((function(e){e.theme;return{"& .FusePageSimple-content":{display:"flex",flexDirection:"column",flex:"1 1 100%",height:"100%"}}})),ht=(0,d.ZP)(u.Z)((function(e){var t=e.theme;return{"& .MuiDrawer-paper":(0,r.Z)({width:400,maxWidth:"100%",overflow:"hidden"},t.breakpoints.up("md"),{position:"relative"})}})),pt=(0,s.Z)("teamchatApp",Qe)((function(e){(0,c.I0)();var t=(0,o.UO)(),n=t.channelId,r=t.contactId,l=t.threadId,s=(0,m.Z)((function(e){return e.breakpoints.down("sm")})),d=(0,i.useState)(!s),u=(0,a.Z)(d,2),f=u[0],h=u[1],p=(0,i.useState)(!1),b=(0,a.Z)(p,2),j=b[0],v=b[1],Z=(0,i.useState)(!1),y=(0,a.Z)(Z,2),g=y[0],w=y[1],N=(0,i.useState)(!1),C=(0,a.Z)(N,2),S=C[0],I=C[1],O=(0,i.useState)(!1),T=(0,a.Z)(O,2),M=T[0],P=T[1],A=(0,i.useState)(!1),D=(0,a.Z)(A,2),B=D[0],R=D[1],E=(0,i.useState)(!1),z=(0,a.Z)(E,2),L=z[0],$=z[1],q=(0,i.useState)(!1),H=(0,a.Z)(q,2),W=H[0],_=H[1],F=(0,i.useState)(!1),V=(0,a.Z)(F,2),K=V[0],Y=V[1],Q=(0,i.useState)(!1),X=(0,a.Z)(Q,2),G=X[0],J=X[1],ee=(0,i.useState)(!1),te=(0,a.Z)(ee,2),ne=te[0],ae=te[1],re=(0,o.TH)();(0,i.useEffect)((function(){h(!s)}),[s]),(0,i.useEffect)((function(){s&&h(!1)}),[re,s]),(0,i.useEffect)((function(){s&&h(!(n||r||l))}),[re,s,n,r,l]);var le=(0,i.useMemo)((function(){return{setMainSidebarOpen:h,setContactSidebarOpen:v,setMemberSidebarOpen:w,setHqPinSidebarOpen:I,setCmPinSidebarOpen:P,setDmPinSidebarOpen:R,setUserSidebarOpen:$,setThreadSidebarOpen:_,setHqThreadsSidebarOpen:Y,setCmThreadsSidebarOpen:J,setDmThreadsSidebarOpen:ae}}),[h,v,w,I,P,R,$,_,Y,J,ae]);return(0,U.jsxs)(k.Z.Provider,{value:le,children:[(0,U.jsx)(ft,{scroll:"content",content:(0,U.jsx)(o.j3,{}),leftSidebarContent:(0,U.jsx)(me,{}),leftSidebarOpen:f,leftSidebarOnClose:function(){h(!1)},leftSidebarWidth:400,rightSidebarContent:(0,U.jsxs)("div",{className:(0,x.Z)(s?"w-[85vw]":"w-full"),children:[j&&(0,U.jsx)(Se,{}),g&&(0,U.jsx)(Ae,{}),S&&(0,U.jsx)(_e,{}),M&&(0,U.jsx)(Fe,{}),B&&(0,U.jsx)(Ve,{}),W&&(0,U.jsx)(st,{}),K&&(0,U.jsx)(ut,{}),G&&(0,U.jsx)(mt,{}),ne&&(0,U.jsx)(xt,{})]}),rightSidebarOpen:j||g||S||M||B||W||K||G||ne,rightSidebarOnClose:function(){v(!1),w(!1),I(!1),P(!1),R(!1),_(!1),Y(!1),J(!1),ae(!1)},rightSidebarWidth:400}),(0,U.jsx)(ht,{className:"h-full absolute z-9999",variant:"temporary",anchor:"left",open:L,onOpen:function(e){},onClose:function(){return $(!1)},classes:{paper:"absolute left-0"},style:{position:"absolute"},ModalProps:{keepMounted:!1,disablePortal:!0,BackdropProps:{classes:{root:"absolute"}}},children:(0,U.jsx)(nt,{})})]})}))},32387:function(e,t,n){var a=n(64836);t.Z=void 0;var r=a(n(45045)),l=n(46417),s=(0,r.default)((0,l.jsx)("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"}),"ArrowForwardIosSharp");t.Z=s},7918:function(e,t,n){n.d(t,{fO:function(){return f}});var a=n(47313),r=n(29466),l=function(){return l=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},l.apply(this,arguments)};var s="",i=null,c=null,o=null;function d(){s="",null!==i&&i.disconnect(),null!==c&&(window.clearTimeout(c),c=null)}function u(e){return["BUTTON","INPUT","SELECT","TEXTAREA"].includes(e.tagName)&&!e.hasAttribute("disabled")||["A","AREA"].includes(e.tagName)&&e.hasAttribute("href")}function m(){var e=null;if("#"===s)e=document.body;else{var t=s.replace("#","");null===(e=document.getElementById(t))&&"#top"===s&&(e=document.body)}if(null!==e){o(e);var n=e.getAttribute("tabindex");return null!==n||u(e)||e.setAttribute("tabindex",-1),e.focus({preventScroll:!0}),null!==n||u(e)||(e.blur(),e.removeAttribute("tabindex")),d(),!0}return!1}function x(e){return a.forwardRef((function(t,n){var u="";"string"===typeof t.to&&t.to.includes("#")?u="#"+t.to.split("#").slice(1).join("#"):"object"===typeof t.to&&"string"===typeof t.to.hash&&(u=t.to.hash);var x={};e===r.OL&&(x.isActive=function(e,t){return e&&e.isExact&&t.hash===u});var f=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n}(t,["scroll","smooth","timeout","elementId"]);return a.createElement(e,l({},x,f,{onClick:function(e){var n;d(),s=t.elementId?"#"+t.elementId:u,t.onClick&&t.onClick(e),""===s||e.defaultPrevented||0!==e.button||t.target&&"_self"!==t.target||e.metaKey||e.altKey||e.ctrlKey||e.shiftKey||(o=t.scroll||function(e){return t.smooth?e.scrollIntoView({behavior:"smooth"}):e.scrollIntoView()},n=t.timeout,window.setTimeout((function(){!1===m()&&(null===i&&(i=new MutationObserver(m)),i.observe(document,{attributes:!0,childList:!0,subtree:!0}),c=window.setTimeout((function(){d()}),n||1e4))}),0))},ref:n}),t.children)}))}var f=x(r.rU);x(r.OL)}}]);